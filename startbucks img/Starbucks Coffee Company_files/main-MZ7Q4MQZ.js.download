import{a as ml}from"./chunk-HP77ZK5E.js";import{a as _l}from"./chunk-WSMIDPDQ.js";import{a as Il}from"./chunk-R7TMSDRD.js";import{a as gl}from"./chunk-UHHAGZ2E.js";import{a as fl}from"./chunk-C7LTXC5E.js";import"./chunk-272YROSE.js";import"./chunk-XZ5D3ARA.js";import"./chunk-HPTVTFLT.js";import{W as Tl,Z as xl,x as Sl}from"./chunk-DEIKXE5F.js";import{$ as ct,A as cl,B as dl,Ba as Cl,C as ul,D as hl,E as pl,I as vl,Z as ce,_ as Te,aa as It,ba as Ue,ca as $s,da as wl,ea as yl,fa as Ce,ga as Se,h as Ba,ha as ue,ia as Pt,ja as yi,ka as nt,l as Ha,la as dt,m as _n,ma as bl,n as il,na as U,o as wn,oa as ut,p as xt,pa as El,q as nl,qa as Sn,r as yn,s as bn,t as En,u as sl,v as Cn,w as rl,x as ol,y as al,z as ll}from"./chunk-BZ3BYEIA.js";import"./chunk-AE6UTKHP.js";import{$ as tl,A as ke,B as lt,C as mn,D as _i,F as Ka,I as Qa,K as B,L as be,M as oe,N as Ls,O as Za,P as wi,Q as Ee,R as Vt,S as gn,T as Fs,U as Ja,V as vn,Y as el,a as M,b as Ut,ba as zs,c as ja,ca as Yt,d as Ua,f as Va,h as me,i as Ya,k as Os,n as qa,p as je,w as fn,x as se,y as Ga,z as Xa}from"./chunk-SSUCICQO.js";import{A as $a,B as Wa,f as La,w as Fa,x as za}from"./chunk-73FMRXPN.js";import"./chunk-ATOYXHDB.js";import{$ as H,A as oa,Ac as Pa,B as St,C as aa,D as la,Ea as Ht,Gc as Ma,H as ca,Ic as ka,J as Ps,Jc as jt,Jd as Aa,K as da,L as ua,Mc as Ds,N as ha,P as re,Pb as ya,Q as Ms,Qb as ks,S as un,Sd as Ra,T as pa,U as fa,X as ne,Xa as va,Y as we,Ya as _a,Z as at,Za as wa,a as ea,b as Je,c as cn,d as ta,da as hn,e as ia,ea as ye,fc as ba,g as na,h as et,ha as ma,i as tt,k as $e,l as Wt,le as Na,m as sa,n as de,nc as As,oc as Ea,p as ra,q as dn,qa as ga,r as Is,ra as Be,sa as He,se as Tt,t as vi,tc as Ca,uc as Rs,v as ot,vc as Sa,w as Bt,wa as it,wc as Ns,x as We,xc as Ta,xe as pn,y as Ct,yc as xa,ye as Da,zc as Ia,ze as Oa}from"./chunk-XBEULE7H.js";import"./chunk-AG43DLNM.js";import{a as fe,b as an,k as ln}from"./chunk-BI7C37SH.js";var Ml=(()=>{let e=class e{constructor(n){this.router=n,this.devicetype="",this.devicetype=this.getMobileOperatingSystem()}ngOnInit(){this.devicetype!=""&&this.redirectToPlayStore()}getMobileOperatingSystem(){var n=navigator.userAgent||navigator.vendor;return/windows phone/i.test(n)?"Windows Phone":/android/i.test(n)?"Android":/iPad|iPhone|iPod/.test(n)?"IOs":"unknown"}redirectToPlayStore(){this.devicetype=="Android"?window.location.href="https://play.google.com/store/apps/details?id=com.starbucks.in":this.devicetype=="IOs"?window.location.href="https://apps.apple.com/in/app/starbucks-india/id1210203958":this.devicetype=="unknown"&&window.location.replace("https://www.starbucks.in/dashboard")}};e.\u0275fac=function(s){return new(s||e)(Ht(jt))},e.\u0275cmp=hn({type:e,selectors:[["app-app-download"]],decls:0,vars:0,template:function(s,r){}});let i=e;return i})();var Qu=[{path:"",pathMatch:"full",redirectTo:"/dashboard"},{path:"dashboard",loadChildren:()=>import("./chunk-CJV64LLR.js").then(i=>i.DashboardModule)},{path:"login",loadChildren:()=>import("./chunk-TWHURIE7.js").then(i=>i.LoginModule)},{path:"welcome",loadChildren:()=>import("./chunk-PDZMWK22.js").then(i=>i.WelcomePageModule)},{path:"registration",loadChildren:()=>import("./chunk-FWRAGLYN.js").then(i=>i.RegistrationModule)},{path:"events",loadChildren:()=>import("./chunk-M2UJHKG7.js").then(i=>i.OnlineEventsModule)},{path:"rewards",loadChildren:()=>import("./chunk-U2TR7RAG.js").then(i=>i.RewardsModule)},{path:"pay",loadChildren:()=>import("./chunk-UFOM7YDZ.js").then(i=>i.PaymentModule)},{path:"ordering",loadChildren:()=>import("./chunk-GHXMNXKT.js").then(i=>i.OrderingModule)},{path:"giftcards",loadChildren:()=>import("./chunk-QZMPFBBM.js").then(i=>i.GiftCardsModule)},{path:"gc/pgactivity",component:gl},{path:"manage-card",loadChildren:()=>import("./chunk-XC74N4CF.js").then(i=>i.ManageCardModule)},{path:"payment-activity",component:fl},{path:"store-locator",loadChildren:()=>import("./chunk-VHT4P5IW.js").then(i=>i.StoreModule)},{path:"profile",loadChildren:()=>import("./chunk-QA3TKIHR.js").then(i=>i.UserProfileModule)},{path:"order-track",loadChildren:()=>import("./chunk-BLYRDF5J.js").then(i=>i.OrderTrackModule)},{path:"discover-more-articles",loadChildren:()=>import("./chunk-F2DEA4YR.js").then(i=>i.DiscoverMoreArticlesModule)},{path:"saved-blogs",component:Ba},{path:"Blogs",component:Ha},{path:"terms-and-conditions",loadChildren:()=>import("./chunk-CEBYYNJ6.js").then(i=>i.TermsAndConditionsListingModule)},{path:"search",loadChildren:()=>import("./chunk-DXG7J2G4.js").then(i=>i.GlobalSearchModule)},{path:"subscription",loadChildren:()=>import("./chunk-4HXYWZCY.js").then(i=>i.SubscriptionModule)},{path:"subscription-order",component:ml},{path:"articles",loadChildren:()=>import("./chunk-5VXJ4CT6.js").then(i=>i.FooterContentModule)},{path:"whatsapp",loadChildren:()=>import("./chunk-FLNATOCB.js").then(i=>i.WhatsappModule)},{path:"CampaignDetail",loadChildren:()=>import("./chunk-3A5PG6XR.js").then(i=>i.SingleUseCouponModule)},{path:"appdownload",component:Ml},{path:":url",loadChildren:()=>import("./chunk-5VXJ4CT6.js").then(i=>i.FooterContentModule)},{path:"**",component:_l}],kl=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({imports:[Ds.forRoot(Qu,{scrollPositionRestoration:"enabled"}),Ds]});let i=e;return i})();var Ws=class{constructor(e,t){this.source=e,e.initialize&&e.initialize(t)}subscribe(e){this.sub=this.source.onInterrupt.subscribe(e)}unsubscribe(){this.sub.unsubscribe(),this.sub=null}resume(){this.source.attach()}pause(){this.source.detach()}},bi=class{constructor(){this.idValue=new Date,this.idlingValue=!1}id(e){if(e!==void 0){if(!e)throw new Error("A value must be specified for the ID.");this.idValue=e}return this.idValue}idling(e){return e!==void 0&&(this.idlingValue=e),this.idlingValue}now(){return new Date}isExpired(){let e=this.last();return e!=null&&e<=this.now()}},Bs=class{constructor(){this.storageMap={}}get length(){return Object.keys(this.storageMap).length}clear(){this.storageMap={}}getItem(e){return typeof this.storageMap[e]<"u"?this.storageMap[e]:null}key(e){return Object.keys(this.storageMap)[e]||null}removeItem(e){this.storageMap[e]=void 0}setItem(e,t){this.storageMap[e]=t}},Rl=(()=>{let e=class e{constructor(){this.storage=this.getStorage()}getStorage(){try{let n=localStorage;return n.setItem("ng2IdleStorage",""),n.removeItem("ng2IdleStorage"),n}catch{return new Bs}}getItem(n){return this.storage.getItem("ng2Idle."+n)}removeItem(n){this.storage.removeItem("ng2Idle."+n)}setItem(n,s){this.storage.setItem("ng2Idle."+n,s)}_wrapped(){return this.storage}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})(),Hs=(()=>{let e=class e extends bi{constructor(n){super(),this.localStorage=n,this.idleName="main"}last(n){return n!==void 0&&this.setExpiry(n),this.getExpiry()}idling(n){return n!==void 0&&this.setIdling(n),this.getIdling()}getIdleName(){return this.idleName}setIdleName(n){n&&(this.idleName=n)}getExpiry(){let n=this.localStorage.getItem(this.idleName+".expiry");return n?new Date(parseInt(n,10)):null}setExpiry(n){n?this.localStorage.setItem(this.idleName+".expiry",n.getTime().toString()):this.localStorage.removeItem(this.idleName+".expiry")}getIdling(){let n=this.localStorage.getItem(this.idleName+".idling");return n?n==="true":!1}setIdling(n){n?this.localStorage.setItem(this.idleName+".idling",n.toString()):this.localStorage.setItem(this.idleName+".idling","false")}};e.\u0275fac=function(s){return new(s||e)(H(Rl))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})(),qt=class{},Tn=function(i){return i[i.disabled=0]="disabled",i[i.idle=1]="idle",i[i.notIdle=2]="notIdle",i}(Tn||{}),Gs=(()=>{let e=class e{constructor(n,s,r,o){this.expiry=n,this.zone=s,this.platformId=o,this.idle=20*60,this.timeoutVal=30,this.autoResume=Tn.idle,this.interrupts=new Array,this.running=!1,this.keepaliveEnabled=!1,this.onIdleStart=new Be,this.onIdleEnd=new Be,this.onTimeoutWarning=new Be,this.onTimeout=new Be,this.onInterrupt=new Be,r&&(this.keepaliveSvc=r,this.keepaliveEnabled=!0),this.setIdling(!1)}setIdleName(n){if(this.expiry instanceof Hs)this.expiry.setIdleName(n);else throw new Error("Cannot set expiry key name because no LocalStorageExpiry has been provided.")}getKeepaliveEnabled(){return this.keepaliveEnabled}setKeepaliveEnabled(n){if(!this.keepaliveSvc)throw new Error("Cannot enable keepalive integration because no KeepaliveSvc has been provided.");return this.keepaliveEnabled=n}getTimeout(){return this.timeoutVal}setTimeout(n){if(n===!1)this.timeoutVal=0;else if(typeof n=="number"&&n>=0)this.timeoutVal=n;else throw new Error("'seconds' can only be 'false' or a positive number.");return this.timeoutVal}getIdle(){return this.idle}setIdle(n){if(n<=0)throw new Error("'seconds' must be greater zero");return this.idle=n}getAutoResume(){return this.autoResume}setAutoResume(n){return this.autoResume=n}setInterrupts(n){this.clearInterrupts();let s=this;for(let r of n){let o={platformId:this.platformId},a=new Ws(r,o);a.subscribe(l=>{s.interrupt(l.force,l.innerArgs)}),this.interrupts.push(a)}return this.interrupts}getInterrupts(){return this.interrupts}clearInterrupts(){for(let n of this.interrupts)n.pause(),n.unsubscribe();this.interrupts.length=0}isRunning(){return this.running}isIdling(){return this.idling}watch(n){this.safeClearInterval("idleHandle"),this.safeClearInterval("timeoutHandle");let s=this.timeoutVal?this.timeoutVal:0;if(!n){let o=new Date(this.expiry.now().getTime()+(this.idle+s)*1e3);this.expiry.last(o)}this.idling&&this.toggleState(),this.running||(this.startKeepalive(),this.toggleInterrupts(!0)),this.running=!0;let r=()=>{this.zone.run(()=>{this.getExpiryDiff(s)>0?(this.safeClearInterval("idleHandle"),this.setIdleIntervalOutsideOfZone(r,1e3)):this.toggleState()})};this.setIdleIntervalOutsideOfZone(r,1e3)}setIdleIntervalOutsideOfZone(n,s){this.zone.runOutsideAngular(()=>{this.idleHandle=setInterval(n,s)})}stop(){this.stopKeepalive(),this.toggleInterrupts(!1),this.safeClearInterval("idleHandle"),this.safeClearInterval("timeoutHandle"),this.setIdling(!1),this.running=!1,this.expiry.last(null)}timeout(){this.stopKeepalive(),this.toggleInterrupts(!1),this.safeClearInterval("idleHandle"),this.safeClearInterval("timeoutHandle"),this.setIdling(!0),this.running=!1,this.countdown=0,this.onTimeout.emit(null)}interrupt(n,s){if(this.running){if(this.timeoutVal&&this.expiry.isExpired()){this.timeout();return}this.onInterrupt.emit(s),(n===!0||this.autoResume===Tn.idle||this.autoResume===Tn.notIdle&&!this.expiry.idling())&&this.watch(n)}}setIdling(n){this.idling=n,this.expiry.idling(n)}toggleState(){this.setIdling(!this.idling),this.idling?(this.onIdleStart.emit(null),this.stopKeepalive(),this.timeoutVal>0&&(this.countdown=this.timeoutVal,this.doCountdown(),this.setTimeoutIntervalOutsideZone(()=>{this.doCountdownInZone()},1e3))):(this.toggleInterrupts(!0),this.onIdleEnd.emit(null),this.startKeepalive()),this.safeClearInterval("idleHandle")}setTimeoutIntervalOutsideZone(n,s){this.zone.runOutsideAngular(()=>{this.timeoutHandle=setInterval(()=>{n()},s)})}toggleInterrupts(n){for(let s of this.interrupts)n?s.resume():s.pause()}getExpiryDiff(n){let s=this.expiry.now();return(this.expiry.last()||s).getTime()-s.getTime()-n*1e3}doCountdownInZone(){this.zone.run(()=>{this.doCountdown()})}doCountdown(){let n=this.getExpiryDiff(this.timeoutVal);if(n>0){this.safeClearInterval("timeoutHandle"),this.interrupt(!0);return}if(!this.idling)return;if(this.countdown<=0){this.timeout();return}this.onTimeoutWarning.emit(this.countdown);let s=(this.timeoutVal-1)*1e3+n;this.countdown=Math.round(s/1e3)}safeClearInterval(n){let s=this[n];s!==null&&typeof s<"u"&&(clearInterval(this[n]),this[n]=null)}startKeepalive(){!this.keepaliveSvc||!this.keepaliveEnabled||(this.running&&this.keepaliveSvc.ping(),this.keepaliveSvc.start())}stopKeepalive(){!this.keepaliveSvc||!this.keepaliveEnabled||this.keepaliveSvc.stop()}ngOnDestroy(){this.stop(),this.clearInterrupts()}};e.\u0275fac=function(s){return new(s||e)(H(bi),H(He),H(qt,8),H(it,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})(),js=class{constructor(e,t,n=!1){this.source=e,this.innerArgs=t,this.force=n}},Us=class{constructor(e,t){this.attachFn=e,this.detachFn=t,this.isAttached=!1,this.onInterrupt=new Be}attach(){if(Zone.current.get("isAngularZone")===!0){Zone.current.parent.run(()=>this.attach());return}!this.isAttached&&this.attachFn&&this.attachFn(this),this.isAttached=!0}detach(){this.isAttached&&this.detachFn&&this.detachFn(this),this.isAttached=!1}},Al=500,xn=class extends Us{constructor(e,t,n){super(null,null),this.target=e,this.events=t,this.opts=n,this.eventSubscription=new ea,typeof this.opts=="number"&&(this.opts={throttleDelay:this.opts,passive:!1}),this.opts=this.opts||{passive:!1,throttleDelay:Al},(this.opts.throttleDelay===void 0||this.opts.throttleDelay===null)&&(this.opts.throttleDelay=Al),this.throttleDelay=this.opts.throttleDelay,this.passive=!!this.opts.passive}initialize(e){if(e?.platformId&&Ea(e.platformId))return;let t=typeof this.target=="function"?this.target():this.target,n=this.passive?{passive:!0}:null,s=this.events.split(" ").map(o=>vi(t,o,n));this.eventSrc=ot(...s),this.eventSrc=this.eventSrc.pipe(We(o=>!this.filterEvent(o))),this.throttleDelay>0&&(this.eventSrc=this.eventSrc.pipe(pa(this.throttleDelay)));let r=o=>this.onInterrupt.emit(new js(this,o));this.attachFn=()=>this.eventSubscription=this.eventSrc.subscribe(r),this.detachFn=()=>this.eventSubscription.unsubscribe()}filterEvent(e){return!1}get options(){return{passive:this.passive,throttleDelay:this.throttleDelay}}},Vs=class extends xn{constructor(e,t){super(()=>document.documentElement,e,t)}filterEvent(e){return!!(e.type==="mousemove"&&(e.originalEvent&&e.originalEvent.movementX===0&&e.originalEvent.movementY===0||e.movementX!==void 0&&!e.movementX||!e.movementY))}},Ys=class extends xn{constructor(e,t){super(()=>window,e,t)}},qs=class extends Ys{constructor(e=500){super("storage",e)}filterEvent(e){return!(e.key&&e.key.indexOf("ng2Idle.")>=0&&e.key.indexOf(".expiry")>=0)}};var Nl=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[Hs,{provide:bi,useExisting:Hs},Gs]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({providers:[Rl]});let i=e;return i})();function Zu(i){return[new Vs("mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",i),new qs(i)]}var Dl=Zu();var th=new at("angularfire2.messaging.vapid-key"),ih=new at("angularfire2.messaging.service-worker-registeration"),Xs=(()=>{class i{requestPermission;getToken;tokenChanges;messages;requestToken;deleteToken;constructor(t,n,s,r,o,a,l){let c=l,d=$e(void 0).pipe(tt(o.outsideAngular),et(o.insideAngular),re(Il),re(f=>f?import("./chunk-DGQT4S4U.js"):na),de(()=>En(t,r,n)),re(f=>Cn(`${f.name}.messaging`,"AngularFireMessaging",f.name,()=>$e(f.messaging()),[])),ua({bufferSize:1,refCount:!1}));this.requestPermission=d.pipe(tt(o.outsideAngular),et(o.insideAngular),re(()=>Notification.requestPermission())),this.getToken=d.pipe(tt(o.outsideAngular),et(o.insideAngular),re(f=>ln(this,null,function*(){if(Notification.permission==="granted"){let m=c?yield c:null;return yield f.getToken({vapidKey:a,serviceWorkerRegistration:m})}else return null})));let u=new Je(f=>{navigator.permissions.query({name:"notifications"}).then(m=>{m.onchange=()=>f.next()})}),h=d.pipe(tt(o.outsideAngular),et(o.insideAngular),Ms(u),Ms(this.getToken));return this.tokenChanges=d.pipe(tt(o.outsideAngular),et(o.insideAngular),re(()=>dn(this.getToken,h))),this.messages=d.pipe(tt(o.outsideAngular),et(o.insideAngular),re(f=>new Je(m=>f.onMessage(m)))),this.requestToken=d.pipe(tt(o.outsideAngular),et(o.insideAngular),re(()=>this.requestPermission),Ct(()=>$e(null)),ra(()=>this.tokenChanges)),this.deleteToken=()=>d.pipe(tt(o.outsideAngular),et(o.insideAngular),re(f=>f.deleteToken()),oa(!1)),nl(this,d,r)}static \u0275fac=function(n){return new(n||i)(H(yn),H(bn,8),H(it),H(He),H(wn),H(th,8),H(ih,8))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),Ol=(()=>{class i{constructor(){Yt.registerVersion("angularfire",_n.full,"fcm-compat")}static \u0275fac=function(n){return new(n||i)};static \u0275mod=ye({type:i});static \u0275inj=we({providers:[Xs]})}return i})();var In=(()=>{let e=class e{constructor(){this.permission=this.isSupported()?"default":"denied"}isSupported(){return"Notification"in window}requestPermission(){let n=this;"Notification"in window&&Notification.requestPermission(function(s){return n.permission=s})}create(n,s,r){let o=this;return new Je(function(a){"Notification"in window||a.complete(),o.permission!=="granted"&&a.complete();let l=new Notification(n,r);l.onshow=function(c){return a.next({notification:l,event:c})},l.onclick=function(c){return window.open(s,"_blank"),a.next({notification:l,event:c})},l.onerror=function(c){return a.error({notification:l,event:c})},l.onclose=function(){return a.complete()}})}generateNotification(n){let s=this;n.forEach(r=>{let o={body:r.alertContent,icon:"src/assets/icons/icon-512x512.png"},a=s.create(r.title,r.orderTrackUrl,o).subscribe()})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Pn=(()=>{let e=class e{constructor(n,s,r){this.angularFireMessaging=n,this._notificationService=s,this.commonFunction=r,this.currentMessage=new ta(null),this.isMobile=this.commonFunction.identifyDeviceType(),this.angularFireMessaging.messages.subscribe(o=>{o.onMessage=o.onMessage.bind(o),o.onTokenRefresh=o.onTokenRefresh.bind(o)})}requestPermission(){this.angularFireMessaging.requestToken.subscribe(n=>{localStorage.setItem("firebaseDeviceId",n)},n=>{console.error("Unable to get permission to notify.",n)})}receiveMessage(){this.angularFireMessaging.messages.subscribe(n=>{this.currentMessage.next(n),this.notify(n.data)})}notify(n){let s=[];s.push({title:n.title,alertContent:n.body});let r={body:s[0].alertContent,icon:"src/assets/icons/icon-512x512.png"};this.isMobile?navigator.serviceWorker.ready.then(o=>{o.showNotification(s[0].title,r)}):new Notification(s[0].title,r)}};e.\u0275fac=function(s){return new(s||e)(H(Xs),H(In),H(pn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Ll=(()=>{let e=class e{constructor(n,s,r){this.idle=n,this.router=s,this.messagingService=r,this.title="Tata-Starbucks",this.message="",this.idleState="Not started.",this.timedOut=!1,this.previousUrl="",n.setIdle(30),n.setTimeout(5400),n.setInterrupts(Dl),n.onIdleEnd.subscribe(()=>{this.idleState="No longer idle."}),n.onTimeout.subscribe(()=>{if(localStorage.excludeFromTimeout){this.reset();return}this.idleState="Timed out!",this.timedOut=!0;let o=this.router.url}),n.onIdleStart.subscribe(()=>{this.idleState="You've gone idle!"}),n.onTimeoutWarning.subscribe(o=>{this.idleState="You will time out in "+o+" seconds!"}),this.reset(),this.loadScripts(),this.setPreviousPage()}ngOnInit(){if(this.initiateApplicationProcess(),this.checkBuildVersion(),window.location.pathname==="/StoreDetails"){let n=window.location.href.split("=");this.router.navigate(["/store-locator/StoreDetails"],{queryParams:{storeId:n[1]}})}}checkBuildVersion(){let n=JSON.parse(localStorage.getItem("buildVersion")),s=Tt.buildVersion;n?n!==s?(localStorage.clear(),sessionStorage.clear(),localStorage.setItem("buildVersion",JSON.stringify(s))):console.warn("latest build!"):(localStorage.clear(),sessionStorage.clear(),localStorage.setItem("buildVersion",JSON.stringify(s)))}reset(){this.idle.stop(),this.idle.watch(),this.idleState="Started.",this.timedOut=!1}initiateApplicationProcess(){localStorage.getItem("deviceId")==null&&localStorage.setItem("deviceId",Da())}loadScripts(){let n=["./assets/js/sbxui.js"];for(let s=0;s<n.length;s++){let r=document.createElement("script");r.src=n[s],r.type="text/javascript",r.async=!1,document.getElementsByTagName("body")[0].appendChild(r)}}setPreviousPage(){let n=this.router.url;this.router.events.pipe(We(s=>s instanceof Ma)).subscribe(s=>{this.previousUrl=n,n=s.url,sessionStorage.setItem("previousPage",this.previousUrl)})}};e.\u0275fac=function(s){return new(s||e)(Ht(Gs),Ht(jt),Ht(Pn))},e.\u0275cmp=hn({type:e,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"app-container"]],template:function(s,r){s&1&&(va(0,"div",0),wa(1,"router-outlet"),_a())},dependencies:[ka],styles:[".app-container[_ngcontent-%COMP%]{height:100%}"]});let i=e;return i})();var Fl=(()=>{let e=class e{constructor(n,s,r){this.router=n,this.auth=s,this.storageService=r,this.refreshTokenInProgress=!1,this.tokenRefreshedSource=new cn,this.tokenRefreshed$=this.tokenRefreshedSource.asObservable()}refreshToken(){if(this.refreshTokenInProgress)return new Je(n=>{this.tokenRefreshed$.subscribe(()=>{n.next(!0),n.complete()})});{this.refreshTokenInProgress=!0;let n={refreshToken:JSON.parse(localStorage.getItem("refresh_token"))},s={"Accept-Language":"EN"};return this.auth.getRefreshToken(n,s).pipe(un(r=>{this.updatedAuthData=r,this.refreshTokenInProgress=!1,this.tokenRefreshedSource.next(!0)}))}}handleResponseError(n,s,r){return n.status===400&&(n.error.response[0]=="Invalid Refresh token or token expired, Please login again using username and password."||n.error.response[0]=="Refresh token should not be empty."||n.error.response[0]=="Your session has been expired. Please login again."||n.error.response[0]==`You have been logged out because your account is active on another device.
Please login again using username and password.`)&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_type"),sessionStorage.setItem("logOut",JSON.stringify(!0)),this.router.navigate(["/login"])),n.status===401&&n.error.response[0]=="Your session has been expired. Please login again."&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_type"),sessionStorage.setItem("logOut",JSON.stringify(!0)),this.router.navigate(["/login"])),n.status===401&&n.error.response[0]=="Authentication Failed"&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_type"),sessionStorage.setItem("logOut",JSON.stringify(!0))),n.status===401&&n.error.response[0]!="Your session has been expired. Please login again."?this.refreshToken().pipe(re(o=>{this.storageService.setAccessToken(o.response.access_token);let a=o.response.access_token,l=o.response.token_type;return s=s.clone({setHeaders:{Authorization:l+" "+a,"Content-Type":"application/json"}}),r.handle(s)}),Ct(o=>{if(o.status!==401)return this.handleResponseError(o)})):Wt(n)}intercept(n,s){return this.updatedAuthData&&this.updatedAuthData.access_token&&(n=n.clone({setHeaders:{Authorization:this.updatedAuthData.token_type+" "+this.updatedAuthData.access_token,"Content-Type":"application/json"}})),s.handle(n).pipe(Ct(r=>this.handleResponseError(r,n,s)))}};e.\u0275fac=function(s){return new(s||e)(H(jt),H(Wa),H(Oa))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})();var zl="@firebase/database",$l="1.0.7";var ao="";function lo(i){ao=i}var nr=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),se(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:fn(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var sr=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return ke(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var gc=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){let e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nr(e)}}catch{}return new sr},kt=gc("localStorage"),rr=gc("sessionStorage");var Qt=new vn("@firebase/database"),vc=function(){let i=1;return function(){return i++}}(),_c=function(i){let e=Za(i),t=new Qa;t.update(e);let n=t.digest();return ja.encodeByteArray(n)},Vi=function(...i){let e="";for(let t=0;t<i.length;t++){let n=i[t];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Vi.apply(null,n):typeof n=="object"?e+=se(n):e+=n,e+=" "}return e},At=null,Wl=!0,wc=function(i,e){M(!e||i===!0||i===!1,"Can't turn on custom loggers persistently."),i===!0?(Qt.logLevel=Ja.VERBOSE,At=Qt.log.bind(Qt),e&&rr.set("logging_enabled",!0)):typeof i=="function"?At=i:(At=null,rr.remove("logging_enabled"))},ae=function(...i){if(Wl===!0&&(Wl=!1,At===null&&rr.get("logging_enabled")===!0&&wc(!0)),At){let e=Vi.apply(null,i);At(e)}},Yi=function(i){return function(...e){ae(i,...e)}},or=function(...i){let e="FIREBASE INTERNAL ERROR: "+Vi(...i);Qt.error(e)},qe=function(...i){let e=`FIREBASE FATAL ERROR: ${Vi(...i)}`;throw Qt.error(e),new Error(e)},he=function(...i){let e="FIREBASE WARNING: "+Vi(...i);Qt.warn(e)},ah=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&he("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},is=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},lh=function(i){if(je()||document.readyState==="complete")i();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},mt="[MIN_NAME]",st="[MAX_NAME]",Nt=function(i,e){if(i===e)return 0;if(i===mt||e===st)return-1;if(e===mt||i===st)return 1;{let t=Bl(i),n=Bl(e);return t!==null?n!==null?t-n===0?i.length-e.length:t-n:-1:n!==null?1:i<e?-1:1}},ch=function(i,e){return i===e?0:i<e?-1:1},Ei=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+se(e))},co=function(i){if(typeof i!="object"||i===null)return se(i);let e=[];for(let n in i)e.push(n);e.sort();let t="{";for(let n=0;n<e.length;n++)n!==0&&(t+=","),t+=se(e[n]),t+=":",t+=co(i[e[n]]);return t+="}",t},yc=function(i,e){let t=i.length;if(t<=e)return[i];let n=[];for(let s=0;s<t;s+=e)s+e>t?n.push(i.substring(s,t)):n.push(i.substring(s,s+e));return n};function le(i,e){for(let t in i)i.hasOwnProperty(t)&&e(t,i[t])}var bc=function(i){M(!is(i),"Invalid JSON number");let e=11,t=52,n=(1<<e-1)-1,s,r,o,a,l;i===0?(r=0,o=0,s=1/i===-1/0?1:0):(s=i<0,i=Math.abs(i),i>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(i)/Math.LN2),n),r=a+n,o=Math.round(i*Math.pow(2,t-a)-Math.pow(2,t))):(r=0,o=Math.round(i/Math.pow(2,1-n-t))));let c=[];for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();let d=c.join(""),u="";for(l=0;l<64;l+=8){let h=parseInt(d.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),u=u+h}return u.toLowerCase()},dh=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},uh=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function hh(i,e){let t="Unknown Error";i==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?t="Client doesn't have permission to access the desired data.":i==="unavailable"&&(t="The service is unavailable");let n=new Error(i+" at "+e._path.toString()+": "+t);return n.code=i.toUpperCase(),n}var ph=new RegExp("^-?(0*)\\d{1,10}$"),fh=-2147483648,mh=2147483647,Bl=function(i){if(ph.test(i)){let e=Number(i);if(e>=fh&&e<=mh)return e}return null},oi=function(i){try{i()}catch(e){setTimeout(()=>{let t=e.stack||"";throw he("Exception was thrown by user callback.",t),e},Math.floor(0))}},gh=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xi=function(i,e){let t=setTimeout(i,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var ar=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){he(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var lr=class{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(ae("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',he(e)}},Ii=(()=>{class i{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}i.OWNER="owner";return i})(),kn="5",Ec="v",Cc="s",Sc="r",Tc="f",xc=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ic="ls",Pc="p",cr="ac",Mc="websocket",kc="long_polling";var An=class{constructor(e,t,n,s,r=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=kt.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&kt.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function vh(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function Ac(i,e,t){M(typeof e=="string","typeof type must == string"),M(typeof t=="object","typeof params must == object");let n;if(e===Mc)n=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===kc)n=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);vh(i)&&(t.ns=i.namespace);let s=[];return le(t,(r,o)=>{s.push(r+"="+o)}),n+s.join("&")}var dr=class{constructor(){this.counters_={}}incrementCounter(e,t=1){ke(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Va(this.counters_)}};var Ks={},Qs={};function uo(i){let e=i.toString();return Ks[e]||(Ks[e]=new dr),Ks[e]}function _h(i,e){let t=i.toString();return Qs[t]||(Qs[t]=e()),Qs[t]}var ur=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<n.length;++s)n[s]&&oi(()=>{this.onMessage_(n[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Hl="start",wh="close",yh="pLPCommand",bh="pRTLPCB",Rc="id",Nc="pw",Dc="ser",Eh="cb",Ch="seg",Sh="ts",Th="d",xh="dframe",Oc=1870,Lc=30,Ih=Oc-Lc,Ph=25e3,Mh=3e4,Ai=class i{constructor(e,t,n,s,r,o,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yi(e),this.stats_=uo(t),this.urlFn=l=>(this.appCheckToken&&(l[cr]=this.appCheckToken),Ac(t,kc,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ur(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Mh)),lh(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hr((...r)=>{let[o,a,l,c,d]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Hl)this.id=a,this.password=l;else if(o===wh)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{let[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let n={};n[Hl]="t",n[Dc]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Eh]=this.scriptTagHolder.uniqueCallbackIdentifier),n[Ec]=kn,this.transportSessionId&&(n[Cc]=this.transportSessionId),this.lastSessionId&&(n[Ic]=this.lastSessionId),this.applicationId&&(n[Pc]=this.applicationId),this.appCheckToken&&(n[cr]=this.appCheckToken),typeof location<"u"&&location.hostname&&xc.test(location.hostname)&&(n[Sc]=Tc);let s=this.urlFn(n);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){i.forceAllow_=!0}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){return je()?!1:i.forceAllow_?!0:!i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!dh()&&!uh()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=se(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=Ua(t),s=yc(n,Ih);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(je())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[xh]="t",n[Rc]=e,n[Nc]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=se(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},hr=class i{constructor(e,t,n,s){if(this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,je())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=vc(),window[yh+this.uniqueCallbackIdentifier]=e,window[bh+this.uniqueCallbackIdentifier]=t,this.myIFrame=i.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ae("frame writing exception"),a.stack&&ae(a.stack),ae(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ae("No IE domain setting required")}catch{let n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Rc]=this.myID,e[Nc]=this.myPW,e[Dc]=this.currentSerial;let t=this.urlFn(e),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Lc+n.length<=Oc;){let o=this.pendingSegs.shift();n=n+"&"+Ch+s+"="+o.seg+"&"+Sh+s+"="+o.ts+"&"+Th+s+"="+o.d,s++}return t=t+n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(n,Math.floor(Ph)),r=()=>{clearTimeout(s),n()};this.addTag(e,r)}addTag(e,t){je()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let s=n.readyState;(!s||s==="loaded"||s==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{ae("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var kh=16384,Ah=45e3,Rn=null;typeof MozWebSocket<"u"?Rn=MozWebSocket:typeof WebSocket<"u"&&(Rn=WebSocket);var Xt=(()=>{class i{constructor(t,n,s,r,o,a,l){this.connId=t,this.applicationId=s,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yi(this.connId),this.stats_=uo(n),this.connURL=i.connectionURL_(n,a,l,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,s,r,o){let a={};return a[Ec]=kn,!je()&&typeof location<"u"&&location.hostname&&xc.test(location.hostname)&&(a[Sc]=Tc),n&&(a[Cc]=n),s&&(a[Ic]=s),r&&(a[cr]=r),o&&(a[Pc]=o),Ac(t,Mc,a)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,kt.set("previous_websocket_failure",!0);try{let s;if(je()){let r=this.nodeAdmin?"AdminNode":"Node";s={headers:{"User-Agent":`Firebase/${kn}/${ao}/${process.platform}/${r}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(s.proxy={origin:a})}this.mySock=new Rn(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&Rn!==null&&!i.forceDisallow_}static previouslyFailed(){return kt.isInMemoryStorage||kt.get("previous_websocket_failure")===!0}markConnectionHealthy(){kt.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let s=fn(n);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(M(this.frames===null,"We already have a frame buffer"),t.length<=6){let n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();let n=se(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let s=yc(n,kh);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ah))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4;return i})(),Fc=(()=>{class i{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ai,Xt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let n=Xt&&Xt.isAvailable(),s=n&&!Xt.previouslyFailed();if(t.webSocketOnly&&(n||he("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Xt];else{let r=this.transports_=[];for(let o of i.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}i.globalTransportInitialized_=!1;return i})(),Rh=6e4,Nh=5e3,Dh=10*1024,Oh=100*1024,Zs="t",jl="d",Lh="s",Ul="r",Fh="e",Vl="o",Yl="a",ql="n",Gl="p",zh="h",pr=class{constructor(e,t,n,s,r,o,a,l,c,d){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yi("c:"+this.id+":"),this.transportManager_=new Fc(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));let s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=xi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Oh?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Dh?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Zs in e){let t=e[Zs];t===Yl?this.upgradeIfSecondaryHealthy_():t===Ul?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Vl&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Ei("t",e),n=Ei("d",e);if(t==="c")this.onSecondaryControl_(n);else if(t==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Gl,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Yl,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ql,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Ei("t",e),n=Ei("d",e);t==="c"?this.onControl_(n):t==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Ei(Zs,e);if(jl in e){let n=e[jl];if(t===zh){let s=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===ql){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Lh?this.onConnectionShutdown_(n):t===Ul?this.onReset_(n):t===Fh?or("Server Error: "+n):t===Vl?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):or("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,n=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),kn!==n&&he("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),xi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Rh))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Nh))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Gl,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(kt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Nn=class{put(e,t,n,s){}merge(e,t,n,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}};var Dn=class{constructor(e){this.allowedEvents_=e,this.listeners_={},M(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let s=0;s<n.length;s++)n[s].callback.apply(n[s].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let s=this.getInitialEvent(e);s&&t.apply(n,s)}off(e,t,n){this.validateEventType_(e);let s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===t&&(!n||n===s[r].context)){s.splice(r,1);return}}validateEventType_(e){M(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var On=class i extends Dn{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Os()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new i}getInitialEvent(e){return M(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Xl=32,Kl=768,K=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function X(){return new K("")}function Y(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function gt(i){return i.pieces_.length-i.pieceNum_}function Z(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new K(i.pieces_,e)}function ho(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function $h(i){let e="";for(let t=i.pieceNum_;t<i.pieces_.length;t++)i.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[t])));return e||"/"}function Ri(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function zc(i){if(i.pieceNum_>=i.pieces_.length)return null;let e=[];for(let t=i.pieceNum_;t<i.pieces_.length-1;t++)e.push(i.pieces_[t]);return new K(e,0)}function te(i,e){let t=[];for(let n=i.pieceNum_;n<i.pieces_.length;n++)t.push(i.pieces_[n]);if(e instanceof K)for(let n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{let n=e.split("/");for(let s=0;s<n.length;s++)n[s].length>0&&t.push(n[s])}return new K(t,0)}function q(i){return i.pieceNum_>=i.pieces_.length}function ge(i,e){let t=Y(i),n=Y(e);if(t===null)return e;if(t===n)return ge(Z(i),Z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function Wh(i,e){let t=Ri(i,0),n=Ri(e,0);for(let s=0;s<t.length&&s<n.length;s++){let r=Nt(t[s],n[s]);if(r!==0)return r}return t.length===n.length?0:t.length<n.length?-1:1}function po(i,e){if(gt(i)!==gt(e))return!1;for(let t=i.pieceNum_,n=e.pieceNum_;t<=i.pieces_.length;t++,n++)if(i.pieces_[t]!==e.pieces_[n])return!1;return!0}function Re(i,e){let t=i.pieceNum_,n=e.pieceNum_;if(gt(i)>gt(e))return!1;for(;t<i.pieces_.length;){if(i.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0}var fr=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Ri(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=wi(this.parts_[n]);$c(this)}};function Bh(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=wi(e),$c(i)}function Hh(i){let e=i.parts_.pop();i.byteLength_-=wi(e),i.parts_.length>0&&(i.byteLength_-=1)}function $c(i){if(i.byteLength_>Kl)throw new Error(i.errorPrefix_+"has a key path longer than "+Kl+" bytes ("+i.byteLength_+").");if(i.parts_.length>Xl)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Xl+") or object contains a cycle "+Mt(i))}function Mt(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}var mr=class i extends Dn{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new i}getInitialEvent(e){return M(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ci=1e3,jh=60*5*1e3,Ql=30*1e3,Uh=1.3,Vh=3e4,Yh="server_kill",Zl=3,fo=(()=>{class i extends Nn{constructor(t,n,s,r,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=i.nextPersistentConnectionId_++,this.log_=Yi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ci,this.maxReconnectDelay_=jh,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!je())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mr.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&On.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,s){let r=++this.requestNumber_,o={r,a:t,b:n};this.log_(se(o)),M(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),s&&(this.requestCBHash_[r]=s)}get(t){this.initConnection_();let n=new me,r={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(t,n,s,r){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),M(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),M(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:r,hashFn:n,query:t,tag:s};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let n=this.outstandingGets_[t];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(t){let n=t.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);let o={p:s},a="q";t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,d=l.s;i.warnOnListenWarnings_(c,n),(this.listens.get(s)&&this.listens.get(s).get(r))===t&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(s,r),t.onComplete&&t.onComplete(d,c))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&ke(t,"w")){let s=lt(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){let r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();he(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Xa(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ql)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,n=Ga(t)?"auth":"gauth",s={cred:t};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{let o=r.s,a=r.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let n=t.s,s=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(t,n){let s=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),M(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,t._queryObject,n)}sendUnlisten_(t,n,s,r){this.log_("Unlisten on "+t+" for "+n);let o={p:t},a="n";r&&(o.q=s,o.t=r),this.sendRequest(a,o)}onDisconnectPut(t,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:s})}onDisconnectMerge(t,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:s})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,s,r){let o={p:n,d:s};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(t,n,s,r){this.putInternal("p",t,n,s,r)}merge(t,n,s,r){this.putInternal("m",t,n,s,r)}putInternal(t,n,s,r,o){this.initConnection_();let a={p:n,d:s};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:r}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(t){let n=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,s,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(t){if(this.connected_){let n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){let o=s.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+se(t));let n=t.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):or("Unrecognized action received from server: "+se(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){M(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ci,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ci,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Vh&&(this.reconnectDelay_=Ci),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Uh)}this.onConnectStatus_(!1)}establishConnection_(){return ln(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+i.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,s())},d=function(h){M(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:d};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?ae("getToken() completed but was canceled"):(ae("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new pr(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,s,m=>{he(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(Yh)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&he(h),c())}}})}interrupt(t){ae("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ae("Resuming connection for reason: "+t),delete this.interruptReasons_[t],mn(this.interruptReasons_)&&(this.reconnectDelay_=Ci,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let s;n?s=n.map(o=>co(o)).join("$"):s="default";let r=this.removeListen_(t,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,n){let s=new K(t).toString(),r;if(this.listens.has(s)){let o=this.listens.get(s);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(t,n){ae("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Zl&&(this.reconnectDelay_=Ql,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){ae("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Zl&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},n="js";je()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),t["sdk."+n+"."+ao.replace(/\./g,"-")]=1,Os()?t["framework.cordova"]=1:qa()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=On.getInstance().currentlyOnline();return mn(this.interruptReasons_)&&t}}i.nextPersistentConnectionId_=0,i.nextConnectionId_=0;return i})(),G=class i{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new i(e,t)}};var Zt=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new G(mt,e),s=new G(mt,t);return this.compare(n,s)!==0}minPost(){return G.MIN}};var Mn,Ln=class extends Zt{static get __EMPTY_NODE(){return Mn}static set __EMPTY_NODE(e){Mn=e}compare(e,t){return Nt(e.name,t.name)}isDefinedOn(e){throw Ut("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return G.MIN}maxPost(){return new G(st,Mn)}makePost(e,t){return M(typeof e=="string","KeyIndex indexValue must always be a string."),new G(e,Mn)}toString(){return".key"}},Ye=new Ln;var Kt=class{constructor(e,t,n,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Fe=(()=>{class i{constructor(t,n,s,r,o){this.key=t,this.value=n,this.color=s??i.RED,this.left=r??Ne.EMPTY_NODE,this.right=o??Ne.EMPTY_NODE}copy(t,n,s,r,o){return new i(t??this.key,n??this.value,s??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let r=this,o=s(t,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(t,n,s),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(t,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ne.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let s,r;if(s=this,n(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(t,s.key)===0){if(s.right.isEmpty())return Ne.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})(),gr=class{copy(e,t,n,s,r){return this}insert(e,t,n){return new Fe(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ne=class i{constructor(e,t=i.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new i(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fe.BLACK,null,null))}remove(e){return new i(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fe.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,s=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(s=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Kt(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Kt(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Kt(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Kt(this.root_,null,this.comparator_,!0,e)}};Ne.EMPTY_NODE=new gr;function qh(i,e){return Nt(i.name,e.name)}function mo(i,e){return Nt(i,e)}var vr;function Gh(i){vr=i}var Wc=function(i){return typeof i=="number"?"number:"+bc(i):"string:"+i},Bc=function(i){if(i.isLeafNode()){let e=i.val();M(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ke(e,".sv"),"Priority must be a string or number.")}else M(i===vr||i.isEmpty(),"priority of unexpected type.");M(i===vr||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Jl,Jt=(()=>{class i{constructor(t,n=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,M(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Bc(this.priorityNode_)}static set __childrenNodeConstructor(t){Jl=t}static get __childrenNodeConstructor(){return Jl}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new i(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return q(t)?this:Y(t)===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){let s=Y(t);return s===null?n:n.isEmpty()&&s!==".priority"?this:(M(s!==".priority"||gt(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(Z(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Wc(this.priorityNode_.val())+":");let n=typeof this.value_;t+=n+":",n==="number"?t+=bc(this.value_):t+=this.value_,this.lazyHash_=_c(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===i.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof i.__childrenNodeConstructor?-1:(M(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let n=typeof t.value_,s=typeof this.value_,r=i.VALUE_TYPE_ORDER.indexOf(n),o=i.VALUE_TYPE_ORDER.indexOf(s);return M(r>=0,"Unknown leaf type: "+n),M(o>=0,"Unknown leaf type: "+s),r===o?s==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}i.VALUE_TYPE_ORDER=["object","boolean","number","string"];return i})(),Hc,jc;function Xh(i){Hc=i}function Kh(i){jc=i}var _r=class extends Zt{compare(e,t){let n=e.node.getPriority(),s=t.node.getPriority(),r=n.compareTo(s);return r===0?Nt(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return G.MIN}maxPost(){return new G(st,new Jt("[PRIORITY-POST]",jc))}makePost(e,t){let n=Hc(e);return new G(t,new Jt("[PRIORITY-POST]",n))}toString(){return".priority"}},J=new _r;var Qh=Math.log(2),wr=class{constructor(e){let t=r=>parseInt(Math.log(r)/Qh,10),n=r=>parseInt(Array(r+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let s=n(this.count);this.bits_=e+1&s}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Fn=function(i,e,t,n){i.sort(e);let s=function(l,c){let d=c-l,u,h;if(d===0)return null;if(d===1)return u=i[l],h=t?t(u):u,new Fe(h,u.node,Fe.BLACK,null,null);{let f=parseInt(d/2,10)+l,m=s(l,f),g=s(f+1,c);return u=i[f],h=t?t(u):u,new Fe(h,u.node,Fe.BLACK,m,g)}},r=function(l){let c=null,d=null,u=i.length,h=function(m,g){let v=u-m,p=u;u-=m;let _=s(v+1,p),w=i[v],b=t?t(w):w;f(new Fe(b,w.node,g,null,_))},f=function(m){c?(c.left=m,c=m):(d=m,c=m)};for(let m=0;m<l.count;++m){let g=l.nextBitIsOne(),v=Math.pow(2,l.count-(m+1));g?h(v,Fe.BLACK):(h(v,Fe.BLACK),h(v,Fe.RED))}return d},o=new wr(i.length),a=r(o);return new Ne(n||e,a)};var Js,Gt={},ei=class i{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return M(Gt&&J,"ChildrenNode.ts has not been loaded"),Js=Js||new i({".priority":Gt},{".priority":J}),Js}get(e){let t=lt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ne?t:null}hasIndex(e){return ke(this.indexSet_,e.toString())}addIndex(e,t){M(e!==Ye,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],s=!1,r=t.getIterator(G.Wrap),o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),n.push(o),o=r.getNext();let a;s?a=Fn(n,e.getCompare()):a=Gt;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let d=Object.assign({},this.indexes_);return d[l]=a,new i(d,c)}addToIndexes(e,t){let n=_i(this.indexes_,(s,r)=>{let o=lt(this.indexSet_,r);if(M(o,"Missing index implementation for "+r),s===Gt)if(o.isDefinedOn(e.node)){let a=[],l=t.getIterator(G.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Fn(a,o.getCompare())}else return Gt;else{let a=t.get(e.name),l=s;return a&&(l=l.remove(new G(e.name,a))),l.insert(e,e.node)}});return new i(n,this.indexSet_)}removeFromIndexes(e,t){let n=_i(this.indexes_,s=>{if(s===Gt)return s;{let r=t.get(e.name);return r?s.remove(new G(e.name,r)):s}});return new i(n,this.indexSet_)}};var Si,j=(()=>{class i{constructor(t,n,s){this.children_=t,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Bc(this.priorityNode_),this.children_.isEmpty()&&M(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Si||(Si=new i(new Ne(mo),null,ei.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Si}updatePriority(t){return this.children_.isEmpty()?this:new i(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let n=this.children_.get(t);return n===null?Si:n}}getChild(t){let n=Y(t);return n===null?this:this.getImmediateChild(n).getChild(Z(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(M(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{let s=new G(t,n),r,o;n.isEmpty()?(r=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(s,this.children_));let a=r.isEmpty()?Si:this.priorityNode_;return new i(r,a,o)}}updateChild(t,n){let s=Y(t);if(s===null)return n;{M(Y(t)!==".priority"||gt(t)===1,".priority must be the last token in a path");let r=this.getImmediateChild(s).updateChild(Z(t),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let n={},s=0,r=0,o=!0;if(this.forEachChild(J,(a,l)=>{n[a]=l.val(t),s++,o&&i.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!t&&o&&r<2*s){let a=[];for(let l in n)a[l]=n[l];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Wc(this.getPriority().val())+":"),this.forEachChild(J,(n,s)=>{let r=s.hash();r!==""&&(t+=":"+n+":"+r)}),this.lazyHash_=t===""?"":_c(t)}return this.lazyHash_}getPredecessorChildName(t,n,s){let r=this.resolveIndex_(s);if(r){let o=r.getPredecessorKey(new G(t,n));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let n=this.resolveIndex_(t);if(n){let s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(t){let n=this.getFirstChildName(t);return n?new G(n,this.children_.get(n)):null}getLastChildName(t){let n=this.resolveIndex_(t);if(n){let s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(t){let n=this.getLastChildName(t);return n?new G(n,this.children_.get(n)):null}forEachChild(t,n){let s=this.resolveIndex_(t);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){let s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(t,r=>r);{let r=this.children_.getIteratorFrom(t.name,G.Wrap),o=r.peek();for(;o!=null&&n.compare(o,t)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){let s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(t,r=>r);{let r=this.children_.getReverseIteratorFrom(t.name,G.Wrap),o=r.peek();for(;o!=null&&n.compare(o,t)>0;)r.getNext(),o=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===qi?-1:0}withIndex(t){if(t===Ye||this.indexMap_.hasIndex(t))return this;{let n=this.indexMap_.addIndex(t,this.children_);return new i(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===Ye||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let s=this.getIterator(J),r=n.getIterator(J),o=s.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=s.getNext(),a=r.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Ye?null:this.indexMap_.get(t.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})(),yr=class extends j{constructor(){super(new Ne(mo),j.EMPTY_NODE,ei.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return j.EMPTY_NODE}isEmpty(){return!1}},qi=new yr;Object.defineProperties(G,{MIN:{value:new G(mt,j.EMPTY_NODE)},MAX:{value:new G(st,qi)}});Ln.__EMPTY_NODE=j.EMPTY_NODE;Jt.__childrenNodeConstructor=j;Gh(qi);Kh(qi);var Zh=!0;function ie(i,e=null){if(i===null)return j.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),M(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){let t=i;return new Jt(t,ie(e))}if(!(i instanceof Array)&&Zh){let t=[],n=!1;if(le(i,(o,a)=>{if(o.substring(0,1)!=="."){let l=ie(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),t.push(new G(o,l)))}}),t.length===0)return j.EMPTY_NODE;let r=Fn(t,qh,o=>o.name,mo);if(n){let o=Fn(t,J.getCompare());return new j(r,ie(e),new ei({".priority":o},{".priority":J}))}else return new j(r,ie(e),ei.Default)}else{let t=j.EMPTY_NODE;return le(i,(n,s)=>{if(ke(i,n)&&n.substring(0,1)!=="."){let r=ie(s);(r.isLeafNode()||!r.isEmpty())&&(t=t.updateImmediateChild(n,r))}}),t.updatePriority(ie(e))}}Xh(ie);var Ni=class extends Zt{constructor(e){super(),this.indexPath_=e,M(!q(e)&&Y(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),s=this.extractChild(t.node),r=n.compareTo(s);return r===0?Nt(e.name,t.name):r}makePost(e,t){let n=ie(e),s=j.EMPTY_NODE.updateChild(this.indexPath_,n);return new G(t,s)}maxPost(){let e=j.EMPTY_NODE.updateChild(this.indexPath_,qi);return new G(st,e)}toString(){return Ri(this.indexPath_,0).join("/")}};var br=class extends Zt{compare(e,t){let n=e.node.compareTo(t.node);return n===0?Nt(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return G.MIN}maxPost(){return G.MAX}makePost(e,t){let n=ie(e);return new G(t,n)}toString(){return".value"}},go=new br;function Uc(i){return{type:"value",snapshotNode:i}}function ti(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function Di(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function Oi(i,e,t){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:t}}function Jh(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}var Li=class{constructor(e){this.index_=e}updateChild(e,t,n,s,r,o){M(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(s).equals(n.getChild(s))&&a.isEmpty()===n.isEmpty()||(o!=null&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Di(t,a)):M(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ti(t,n)):o.trackChildChange(Oi(t,n,a))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return n!=null&&(e.isLeafNode()||e.forEachChild(J,(s,r)=>{t.hasChild(s)||n.trackChildChange(Di(s,r))}),t.isLeafNode()||t.forEachChild(J,(s,r)=>{if(e.hasChild(s)){let o=e.getImmediateChild(s);o.equals(r)||n.trackChildChange(Oi(s,r,o))}else n.trackChildChange(ti(s,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?j.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var zn=class i{constructor(e){this.indexedFilter_=new Li(e.getIndex()),this.index_=e.getIndex(),this.startPost_=i.getStartPost_(e),this.endPost_=i.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,s,r,o){return this.matches(new G(t,n))||(n=j.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,s,r,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=j.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(j.EMPTY_NODE);let r=this;return t.forEachChild(J,(o,a)=>{r.matches(new G(o,a))||(s=s.updateImmediateChild(o,j.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var Er=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let n=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=t=>{let n=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new zn(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,s,r,o){return this.rangedFilter_.matches(new G(t,n))||(n=j.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,s,r,o):this.fullLimitUpdateChild_(e,t,n,r,o)}updateFullNode(e,t,n){let s;if(t.isLeafNode()||t.isEmpty())s=j.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=j.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){let a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(j.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){let a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,j.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,s,r){let o;if(this.reverse_){let u=this.index_.getCompare();o=(h,f)=>u(f,h)}else o=this.index_.getCompare();let a=e;M(a.numChildren()===this.limit_,"");let l=new G(t,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(t)){let u=a.getImmediateChild(t),h=s.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===t||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,l);if(d&&!n.isEmpty()&&f>=0)return r?.trackChildChange(Oi(t,n,u)),a.updateImmediateChild(t,n);{r?.trackChildChange(Di(t,u));let g=a.updateImmediateChild(t,j.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(r?.trackChildChange(ti(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return n.isEmpty()?e:d&&o(c,l)>=0?(r!=null&&(r.trackChildChange(Di(c.name,c.node)),r.trackChildChange(ti(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(c.name,j.EMPTY_NODE)):e}};var Fi=class i{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=J}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return M(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return M(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mt}hasEnd(){return this.endSet_}getIndexEndValue(){return M(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return M(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:st}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return M(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===J}copy(){let e=new i;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function ep(i){return i.loadsAllData()?new Li(i.getIndex()):i.hasLimit()?new Er(i):new zn(i)}function tp(i,e){let t=i.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function ip(i,e){let t=i.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function Cr(i,e,t){let n=i.copy();return n.startSet_=!0,e===void 0&&(e=null),n.indexStartValue_=e,t!=null?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n}function np(i,e,t){let n;return i.index_===Ye||t?n=Cr(i,e,t):n=Cr(i,e,st),n.startAfterSet_=!0,n}function Sr(i,e,t){let n=i.copy();return n.endSet_=!0,e===void 0&&(e=null),n.indexEndValue_=e,t!==void 0?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n}function sp(i,e,t){let n;return i.index_===Ye||t?n=Sr(i,e,t):n=Sr(i,e,mt),n.endBeforeSet_=!0,n}function ns(i,e){let t=i.copy();return t.index_=e,t}function ec(i){let e={};if(i.isDefault())return e;let t;if(i.index_===J?t="$priority":i.index_===go?t="$value":i.index_===Ye?t="$key":(M(i.index_ instanceof Ni,"Unrecognized index type!"),t=i.index_.toString()),e.orderBy=se(t),i.startSet_){let n=i.startAfterSet_?"startAfter":"startAt";e[n]=se(i.indexStartValue_),i.startNameSet_&&(e[n]+=","+se(i.indexStartName_))}if(i.endSet_){let n=i.endBeforeSet_?"endBefore":"endAt";e[n]=se(i.indexEndValue_),i.endNameSet_&&(e[n]+=","+se(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function tc(i){let e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let t=i.viewFrom_;t===""&&(i.isViewFromLeft()?t="l":t="r"),e.vf=t}return i.index_!==J&&(e.i=i.index_.toString()),e}var Tr=class i extends Nn{constructor(e,t,n,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=Yi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(M(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,s){let r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);let o=i.getListenId_(e,n),a={};this.listens_[o]=a;let l=ec(e._queryParams);this.restRequest_(r+".json",l,(c,d)=>{let u=d;if(c===404&&(u=null,c=null),c===null&&this.onDataUpdate_(r,u,!1,n),lt(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",s(h,null)}})}unlisten(e,t){let n=i.getListenId_(e,t);delete this.listens_[n]}get(e){let t=ec(e._queryParams),n=e._path.toString(),s=new me;return this.restRequest_(n+".json",t,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(n,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(t.auth=s.accessToken),r&&r.token&&(t.ac=r.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ka(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=fn(a.responseText)}catch{he("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&he("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}};var xr=class{constructor(){this.rootNode_=j.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function $n(){return{value:null,children:new Map}}function ai(i,e,t){if(q(e))i.value=t,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,t);else{let n=Y(e);i.children.has(n)||i.children.set(n,$n());let s=i.children.get(n);e=Z(e),ai(s,e,t)}}function Ir(i,e){if(q(e))return i.value=null,i.children.clear(),!0;if(i.value!==null){if(i.value.isLeafNode())return!1;{let t=i.value;return i.value=null,t.forEachChild(J,(n,s)=>{ai(i,new K(n),s)}),Ir(i,e)}}else if(i.children.size>0){let t=Y(e);return e=Z(e),i.children.has(t)&&Ir(i.children.get(t),e)&&i.children.delete(t),i.children.size===0}else return!0}function Pr(i,e,t){i.value!==null?t(e,i.value):rp(i,(n,s)=>{let r=new K(e.toString()+"/"+n);Pr(s,r,t)})}function rp(i,e){i.children.forEach((t,n)=>{e(n,t)})}var Mr=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&le(this.last_,(n,s)=>{t[n]=t[n]-s}),this.last_=e,t}};var ic=10*1e3,op=30*1e3,ap=5*60*1e3,kr=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Mr(e);let n=ic+(op-ic)*Math.random();xi(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;le(e,(s,r)=>{r>0&&ke(this.statsToReport_,s)&&(t[s]=r,n=!0)}),n&&this.server_.reportStats(t),xi(this.reportStats_.bind(this),Math.floor(Math.random()*2*ap))}};var Ve=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}(Ve||{});function vo(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _o(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function wo(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}var Ar=class i{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Ve.ACK_USER_WRITE,this.source=vo()}operationForChild(e){if(q(this.path)){if(this.affectedTree.value!=null)return M(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new K(e));return new i(X(),t,this.revert)}}else return M(Y(this.path)===e,"operationForChild called for unrelated child."),new i(Z(this.path),this.affectedTree,this.revert)}};var Wn=class i{constructor(e,t){this.source=e,this.path=t,this.type=Ve.LISTEN_COMPLETE}operationForChild(e){return q(this.path)?new i(this.source,X()):new i(this.source,Z(this.path))}};var ii=class i{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Ve.OVERWRITE}operationForChild(e){return q(this.path)?new i(this.source,X(),this.snap.getImmediateChild(e)):new i(this.source,Z(this.path),this.snap)}};var zi=class i{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Ve.MERGE}operationForChild(e){if(q(this.path)){let t=this.children.subtree(new K(e));return t.isEmpty()?null:t.value?new ii(this.source,X(),t.value):new i(this.source,X(),t)}else return M(Y(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new i(this.source,Z(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ge=class{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(q(e))return this.isFullyInitialized()&&!this.filtered_;let t=Y(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Rr=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function lp(i,e,t,n){let s=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(Jh(o.childName,o.snapshotNode))}),Ti(i,s,"child_removed",e,n,t),Ti(i,s,"child_added",e,n,t),Ti(i,s,"child_moved",r,n,t),Ti(i,s,"child_changed",e,n,t),Ti(i,s,"value",e,n,t),s}function Ti(i,e,t,n,s,r){let o=n.filter(a=>a.type===t);o.sort((a,l)=>dp(i,a,l)),o.forEach(a=>{let l=cp(i,a,r);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,i.query_))})})}function cp(i,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function dp(i,e,t){if(e.childName==null||t.childName==null)throw Ut("Should only compare child_ events.");let n=new G(e.childName,e.snapshotNode),s=new G(t.childName,t.snapshotNode);return i.index_.compare(n,s)}function ss(i,e){return{eventCache:i,serverCache:e}}function Pi(i,e,t,n){return ss(new Ge(e,t,n),i.serverCache)}function Vc(i,e,t,n){return ss(i.eventCache,new Ge(e,t,n))}function Bn(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Rt(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}var er,up=()=>(er||(er=new Ne(ch)),er),ve=class i{constructor(e,t=up()){this.value=e,this.children=t}static fromObject(e){let t=new i(null);return le(e,(n,s)=>{t=t.set(new K(n),s)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:X(),value:this.value};if(q(e))return null;{let n=Y(e),s=this.children.get(n);if(s!==null){let r=s.findRootMostMatchingPathAndValue(Z(e),t);return r!=null?{path:te(new K(n),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(q(e))return this;{let t=Y(e),n=this.children.get(t);return n!==null?n.subtree(Z(e)):new i(null)}}set(e,t){if(q(e))return new i(t,this.children);{let n=Y(e),r=(this.children.get(n)||new i(null)).set(Z(e),t),o=this.children.insert(n,r);return new i(this.value,o)}}remove(e){if(q(e))return this.children.isEmpty()?new i(null):new i(null,this.children);{let t=Y(e),n=this.children.get(t);if(n){let s=n.remove(Z(e)),r;return s.isEmpty()?r=this.children.remove(t):r=this.children.insert(t,s),this.value===null&&r.isEmpty()?new i(null):new i(this.value,r)}else return this}}get(e){if(q(e))return this.value;{let t=Y(e),n=this.children.get(t);return n?n.get(Z(e)):null}}setTree(e,t){if(q(e))return t;{let n=Y(e),r=(this.children.get(n)||new i(null)).setTree(Z(e),t),o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),new i(this.value,o)}}fold(e){return this.fold_(X(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((s,r)=>{n[s]=r.fold_(te(e,s),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,X(),t)}findOnPath_(e,t,n){let s=this.value?n(t,this.value):!1;if(s)return s;if(q(e))return null;{let r=Y(e),o=this.children.get(r);return o?o.findOnPath_(Z(e),te(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,X(),t)}foreachOnPath_(e,t,n){if(q(e))return this;{this.value&&n(t,this.value);let s=Y(e),r=this.children.get(s);return r?r.foreachOnPath_(Z(e),te(t,s),n):new i(null)}}foreach(e){this.foreach_(X(),e)}foreach_(e,t){this.children.inorderTraversal((n,s)=>{s.foreach_(te(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}};var ze=class i{constructor(e){this.writeTree_=e}static empty(){return new i(new ve(null))}};function Mi(i,e,t){if(q(e))return new ze(new ve(t));{let n=i.writeTree_.findRootMostValueAndPath(e);if(n!=null){let s=n.path,r=n.value,o=ge(s,e);return r=r.updateChild(o,t),new ze(i.writeTree_.set(s,r))}else{let s=new ve(t),r=i.writeTree_.setTree(e,s);return new ze(r)}}}function Nr(i,e,t){let n=i;return le(t,(s,r)=>{n=Mi(n,te(e,s),r)}),n}function nc(i,e){if(q(e))return ze.empty();{let t=i.writeTree_.setTree(e,new ve(null));return new ze(t)}}function Dr(i,e){return Dt(i,e)!=null}function Dt(i,e){let t=i.writeTree_.findRootMostValueAndPath(e);return t!=null?i.writeTree_.get(t.path).getChild(ge(t.path,e)):null}function sc(i){let e=[],t=i.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(J,(n,s)=>{e.push(new G(n,s))}):i.writeTree_.children.inorderTraversal((n,s)=>{s.value!=null&&e.push(new G(n,s.value))}),e}function pt(i,e){if(q(e))return i;{let t=Dt(i,e);return t!=null?new ze(new ve(t)):new ze(i.writeTree_.subtree(e))}}function Or(i){return i.writeTree_.isEmpty()}function ni(i,e){return Yc(X(),i.writeTree_,e)}function Yc(i,e,t){if(e.value!=null)return t.updateChild(i,e.value);{let n=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(M(r.value!==null,"Priority writes must always be leaf nodes"),n=r.value):t=Yc(te(i,s),r,t)}),!t.getChild(i).isEmpty()&&n!==null&&(t=t.updateChild(te(i,".priority"),n)),t}}function rs(i,e){return Kc(e,i)}function hp(i,e,t,n,s){M(n>i.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),i.allWrites.push({path:e,snap:t,writeId:n,visible:s}),s&&(i.visibleWrites=Mi(i.visibleWrites,e,t)),i.lastWriteId=n}function pp(i,e,t,n){M(n>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:e,children:t,writeId:n,visible:!0}),i.visibleWrites=Nr(i.visibleWrites,e,t),i.lastWriteId=n}function fp(i,e){for(let t=0;t<i.allWrites.length;t++){let n=i.allWrites[t];if(n.writeId===e)return n}return null}function mp(i,e){let t=i.allWrites.findIndex(a=>a.writeId===e);M(t>=0,"removeWrite called with nonexistent writeId.");let n=i.allWrites[t];i.allWrites.splice(t,1);let s=n.visible,r=!1,o=i.allWrites.length-1;for(;s&&o>=0;){let a=i.allWrites[o];a.visible&&(o>=t&&gp(a,n.path)?s=!1:Re(n.path,a.path)&&(r=!0)),o--}if(s){if(r)return vp(i),!0;if(n.snap)i.visibleWrites=nc(i.visibleWrites,n.path);else{let a=n.children;le(a,l=>{i.visibleWrites=nc(i.visibleWrites,te(n.path,l))})}return!0}else return!1}function gp(i,e){if(i.snap)return Re(i.path,e);for(let t in i.children)if(i.children.hasOwnProperty(t)&&Re(te(i.path,t),e))return!0;return!1}function vp(i){i.visibleWrites=qc(i.allWrites,_p,X()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function _p(i){return i.visible}function qc(i,e,t){let n=ze.empty();for(let s=0;s<i.length;++s){let r=i[s];if(e(r)){let o=r.path,a;if(r.snap)Re(t,o)?(a=ge(t,o),n=Mi(n,a,r.snap)):Re(o,t)&&(a=ge(o,t),n=Mi(n,X(),r.snap.getChild(a)));else if(r.children){if(Re(t,o))a=ge(t,o),n=Nr(n,a,r.children);else if(Re(o,t))if(a=ge(o,t),q(a))n=Nr(n,X(),r.children);else{let l=lt(r.children,Y(a));if(l){let c=l.getChild(Z(a));n=Mi(n,X(),c)}}}else throw Ut("WriteRecord should have .snap or .children")}}return n}function Gc(i,e,t,n,s){if(!n&&!s){let r=Dt(i.visibleWrites,e);if(r!=null)return r;{let o=pt(i.visibleWrites,e);if(Or(o))return t;if(t==null&&!Dr(o,X()))return null;{let a=t||j.EMPTY_NODE;return ni(o,a)}}}else{let r=pt(i.visibleWrites,e);if(!s&&Or(r))return t;if(!s&&t==null&&!Dr(r,X()))return null;{let o=function(c){return(c.visible||s)&&(!n||!~n.indexOf(c.writeId))&&(Re(c.path,e)||Re(e,c.path))},a=qc(i.allWrites,o,e),l=t||j.EMPTY_NODE;return ni(a,l)}}}function wp(i,e,t){let n=j.EMPTY_NODE,s=Dt(i.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(J,(r,o)=>{n=n.updateImmediateChild(r,o)}),n;if(t){let r=pt(i.visibleWrites,e);return t.forEachChild(J,(o,a)=>{let l=ni(pt(r,new K(o)),a);n=n.updateImmediateChild(o,l)}),sc(r).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}else{let r=pt(i.visibleWrites,e);return sc(r).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}}function yp(i,e,t,n,s){M(n||s,"Either existingEventSnap or existingServerSnap must exist");let r=te(e,t);if(Dr(i.visibleWrites,r))return null;{let o=pt(i.visibleWrites,r);return Or(o)?s.getChild(t):ni(o,s.getChild(t))}}function bp(i,e,t,n){let s=te(e,t),r=Dt(i.visibleWrites,s);if(r!=null)return r;if(n.isCompleteForChild(t)){let o=pt(i.visibleWrites,s);return ni(o,n.getNode().getImmediateChild(t))}else return null}function Ep(i,e){return Dt(i.visibleWrites,e)}function Cp(i,e,t,n,s,r,o){let a,l=pt(i.visibleWrites,e),c=Dt(l,X());if(c!=null)a=c;else if(t!=null)a=ni(l,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],u=o.getCompare(),h=r?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();for(;f&&d.length<s;)u(f,n)!==0&&d.push(f),f=h.getNext();return d}else return[]}function Sp(){return{visibleWrites:ze.empty(),allWrites:[],lastWriteId:-1}}function Hn(i,e,t,n){return Gc(i.writeTree,i.treePath,e,t,n)}function yo(i,e){return wp(i.writeTree,i.treePath,e)}function rc(i,e,t,n){return yp(i.writeTree,i.treePath,e,t,n)}function jn(i,e){return Ep(i.writeTree,te(i.treePath,e))}function Tp(i,e,t,n,s,r){return Cp(i.writeTree,i.treePath,e,t,n,s,r)}function bo(i,e,t){return bp(i.writeTree,i.treePath,e,t)}function Xc(i,e){return Kc(te(i.treePath,e),i.writeTree)}function Kc(i,e){return{treePath:i,writeTree:e}}var Lr=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;M(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),M(n!==".priority","Only non-priority child changes can be tracked.");let s=this.changeMap.get(n);if(s){let r=s.type;if(t==="child_added"&&r==="child_removed")this.changeMap.set(n,Oi(n,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&r==="child_added")this.changeMap.delete(n);else if(t==="child_removed"&&r==="child_changed")this.changeMap.set(n,Di(n,s.oldSnap));else if(t==="child_changed"&&r==="child_added")this.changeMap.set(n,ti(n,e.snapshotNode));else if(t==="child_changed"&&r==="child_changed")this.changeMap.set(n,Oi(n,e.snapshotNode,s.oldSnap));else throw Ut("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}};var Fr=class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}},Qc=new Fr,$i=class{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let n=this.optCompleteServerCache_!=null?new Ge(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bo(this.writes_,e,n)}}getChildAfterChild(e,t,n){let s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Rt(this.viewCache_),r=Tp(this.writes_,s,t,1,n,e);return r.length===0?null:r[0]}};function xp(i){return{filter:i}}function Ip(i,e){M(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),M(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function Pp(i,e,t,n,s){let r=new Lr,o,a;if(t.type===Ve.OVERWRITE){let c=t;c.source.fromUser?o=zr(i,e,c.path,c.snap,n,s,r):(M(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!q(c.path),o=Un(i,e,c.path,c.snap,n,s,a,r))}else if(t.type===Ve.MERGE){let c=t;c.source.fromUser?o=kp(i,e,c.path,c.children,n,s,r):(M(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=$r(i,e,c.path,c.children,n,s,a,r))}else if(t.type===Ve.ACK_USER_WRITE){let c=t;c.revert?o=Np(i,e,c.path,n,s,r):o=Ap(i,e,c.path,c.affectedTree,n,s,r)}else if(t.type===Ve.LISTEN_COMPLETE)o=Rp(i,e,t.path,n,r);else throw Ut("Unknown operation type: "+t.type);let l=r.getChanges();return Mp(e,o,l),{viewCache:o,changes:l}}function Mp(i,e,t){let n=e.eventCache;if(n.isFullyInitialized()){let s=n.getNode().isLeafNode()||n.getNode().isEmpty(),r=Bn(i);(t.length>0||!i.eventCache.isFullyInitialized()||s&&!n.getNode().equals(r)||!n.getNode().getPriority().equals(r.getPriority()))&&t.push(Uc(Bn(e)))}}function Zc(i,e,t,n,s,r){let o=e.eventCache;if(jn(n,t)!=null)return e;{let a,l;if(q(t))if(M(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=Rt(e),d=c instanceof j?c:j.EMPTY_NODE,u=yo(n,d);a=i.filter.updateFullNode(e.eventCache.getNode(),u,r)}else{let c=Hn(n,Rt(e));a=i.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{let c=Y(t);if(c===".priority"){M(gt(t)===1,"Can't have a priority with additional path components");let d=o.getNode();l=e.serverCache.getNode();let u=rc(n,t,d,l);u!=null?a=i.filter.updatePriority(d,u):a=o.getNode()}else{let d=Z(t),u;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let h=rc(n,t,o.getNode(),l);h!=null?u=o.getNode().getImmediateChild(c).updateChild(d,h):u=o.getNode().getImmediateChild(c)}else u=bo(n,c,e.serverCache);u!=null?a=i.filter.updateChild(o.getNode(),c,u,d,s,r):a=o.getNode()}}return Pi(e,a,o.isFullyInitialized()||q(t),i.filter.filtersNodes())}}function Un(i,e,t,n,s,r,o,a){let l=e.serverCache,c,d=o?i.filter:i.filter.getIndexedFilter();if(q(t))c=d.updateFullNode(l.getNode(),n,null);else if(d.filtersNodes()&&!l.isFiltered()){let f=l.getNode().updateChild(t,n);c=d.updateFullNode(l.getNode(),f,null)}else{let f=Y(t);if(!l.isCompleteForPath(t)&&gt(t)>1)return e;let m=Z(t),v=l.getNode().getImmediateChild(f).updateChild(m,n);f===".priority"?c=d.updatePriority(l.getNode(),v):c=d.updateChild(l.getNode(),f,v,m,Qc,null)}let u=Vc(e,c,l.isFullyInitialized()||q(t),d.filtersNodes()),h=new $i(s,u,r);return Zc(i,u,t,s,h,a)}function zr(i,e,t,n,s,r,o){let a=e.eventCache,l,c,d=new $i(s,e,r);if(q(t))c=i.filter.updateFullNode(e.eventCache.getNode(),n,o),l=Pi(e,c,!0,i.filter.filtersNodes());else{let u=Y(t);if(u===".priority")c=i.filter.updatePriority(e.eventCache.getNode(),n),l=Pi(e,c,a.isFullyInitialized(),a.isFiltered());else{let h=Z(t),f=a.getNode().getImmediateChild(u),m;if(q(h))m=n;else{let g=d.getCompleteChild(u);g!=null?ho(h)===".priority"&&g.getChild(zc(h)).isEmpty()?m=g:m=g.updateChild(h,n):m=j.EMPTY_NODE}if(f.equals(m))l=e;else{let g=i.filter.updateChild(a.getNode(),u,m,h,d,o);l=Pi(e,g,a.isFullyInitialized(),i.filter.filtersNodes())}}}return l}function oc(i,e){return i.eventCache.isCompleteForChild(e)}function kp(i,e,t,n,s,r,o){let a=e;return n.foreach((l,c)=>{let d=te(t,l);oc(e,Y(d))&&(a=zr(i,a,d,c,s,r,o))}),n.foreach((l,c)=>{let d=te(t,l);oc(e,Y(d))||(a=zr(i,a,d,c,s,r,o))}),a}function ac(i,e,t){return t.foreach((n,s)=>{e=e.updateChild(n,s)}),e}function $r(i,e,t,n,s,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;q(t)?c=n:c=new ve(null).setTree(t,n);let d=e.serverCache.getNode();return c.children.inorderTraversal((u,h)=>{if(d.hasChild(u)){let f=e.serverCache.getNode().getImmediateChild(u),m=ac(i,f,h);l=Un(i,l,new K(u),m,s,r,o,a)}}),c.children.inorderTraversal((u,h)=>{let f=!e.serverCache.isCompleteForChild(u)&&h.value===null;if(!d.hasChild(u)&&!f){let m=e.serverCache.getNode().getImmediateChild(u),g=ac(i,m,h);l=Un(i,l,new K(u),g,s,r,o,a)}}),l}function Ap(i,e,t,n,s,r,o){if(jn(s,t)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(n.value!=null){if(q(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Un(i,e,t,l.getNode().getChild(t),s,r,a,o);if(q(t)){let c=new ve(null);return l.getNode().forEachChild(Ye,(d,u)=>{c=c.set(new K(d),u)}),$r(i,e,t,c,s,r,a,o)}else return e}else{let c=new ve(null);return n.foreach((d,u)=>{let h=te(t,d);l.isCompleteForPath(h)&&(c=c.set(d,l.getNode().getChild(h)))}),$r(i,e,t,c,s,r,a,o)}}function Rp(i,e,t,n,s){let r=e.serverCache,o=Vc(e,r.getNode(),r.isFullyInitialized()||q(t),r.isFiltered());return Zc(i,o,t,n,Qc,s)}function Np(i,e,t,n,s,r){let o;if(jn(n,t)!=null)return e;{let a=new $i(n,e,s),l=e.eventCache.getNode(),c;if(q(t)||Y(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Hn(n,Rt(e));else{let u=e.serverCache.getNode();M(u instanceof j,"serverChildren would be complete if leaf node"),d=yo(n,u)}d=d,c=i.filter.updateFullNode(l,d,r)}else{let d=Y(t),u=bo(n,d,e.serverCache);u==null&&e.serverCache.isCompleteForChild(d)&&(u=l.getImmediateChild(d)),u!=null?c=i.filter.updateChild(l,d,u,Z(t),a,r):e.eventCache.getNode().hasChild(d)?c=i.filter.updateChild(l,d,j.EMPTY_NODE,Z(t),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Hn(n,Rt(e)),o.isLeafNode()&&(c=i.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||jn(n,X())!=null,Pi(e,c,o,i.filter.filtersNodes())}}var Wr=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,s=new Li(n.getIndex()),r=ep(n);this.processor_=xp(r);let o=t.serverCache,a=t.eventCache,l=s.updateFullNode(j.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(j.EMPTY_NODE,a.getNode(),null),d=new Ge(l,o.isFullyInitialized(),s.filtersNodes()),u=new Ge(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=ss(u,d),this.eventGenerator_=new Rr(this.query_)}get query(){return this.query_}};function Dp(i){return i.viewCache_.serverCache.getNode()}function Op(i){return Bn(i.viewCache_)}function Lp(i,e){let t=Rt(i.viewCache_);return t&&(i.query._queryParams.loadsAllData()||!q(e)&&!t.getImmediateChild(Y(e)).isEmpty())?t.getChild(e):null}function lc(i){return i.eventRegistrations_.length===0}function Fp(i,e){i.eventRegistrations_.push(e)}function cc(i,e,t){let n=[];if(t){M(e==null,"A cancel should cancel all event registrations.");let s=i.query._path;i.eventRegistrations_.forEach(r=>{let o=r.createCancelEvent(t,s);o&&n.push(o)})}if(e){let s=[];for(let r=0;r<i.eventRegistrations_.length;++r){let o=i.eventRegistrations_[r];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(i.eventRegistrations_.slice(r+1));break}}i.eventRegistrations_=s}else i.eventRegistrations_=[];return n}function dc(i,e,t,n){e.type===Ve.MERGE&&e.source.queryId!==null&&(M(Rt(i.viewCache_),"We should always have a full cache before handling merges"),M(Bn(i.viewCache_),"Missing event cache, even though we have a server cache"));let s=i.viewCache_,r=Pp(i.processor_,s,e,t,n);return Ip(i.processor_,r.viewCache),M(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=r.viewCache,Jc(i,r.changes,r.viewCache.eventCache.getNode(),null)}function zp(i,e){let t=i.viewCache_.eventCache,n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(J,(r,o)=>{n.push(ti(r,o))}),t.isFullyInitialized()&&n.push(Uc(t.getNode())),Jc(i,n,t.getNode(),e)}function Jc(i,e,t,n){let s=n?[n]:i.eventRegistrations_;return lp(i.eventGenerator_,e,t,s)}var Vn,Yn=class{constructor(){this.views=new Map}};function $p(i){M(!Vn,"__referenceConstructor has already been defined"),Vn=i}function Wp(){return M(Vn,"Reference.ts has not been loaded"),Vn}function Bp(i){return i.views.size===0}function Eo(i,e,t,n){let s=e.source.queryId;if(s!==null){let r=i.views.get(s);return M(r!=null,"SyncTree gave us an op for an invalid query."),dc(r,e,t,n)}else{let r=[];for(let o of i.views.values())r=r.concat(dc(o,e,t,n));return r}}function ed(i,e,t,n,s){let r=e._queryIdentifier,o=i.views.get(r);if(!o){let a=Hn(t,s?n:null),l=!1;a?l=!0:n instanceof j?(a=yo(t,n),l=!1):(a=j.EMPTY_NODE,l=!1);let c=ss(new Ge(a,l,!1),new Ge(n,s,!1));return new Wr(e,c)}return o}function Hp(i,e,t,n,s,r){let o=ed(i,e,n,s,r);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,o),Fp(o,t),zp(o,t)}function jp(i,e,t,n){let s=e._queryIdentifier,r=[],o=[],a=vt(i);if(s==="default")for(let[l,c]of i.views.entries())o=o.concat(cc(c,t,n)),lc(c)&&(i.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{let l=i.views.get(s);l&&(o=o.concat(cc(l,t,n)),lc(l)&&(i.views.delete(s),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!vt(i)&&r.push(new(Wp())(e._repo,e._path)),{removed:r,events:o}}function td(i){let e=[];for(let t of i.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ft(i,e){let t=null;for(let n of i.views.values())t=t||Lp(n,e);return t}function id(i,e){if(e._queryParams.loadsAllData())return os(i);{let n=e._queryIdentifier;return i.views.get(n)}}function nd(i,e){return id(i,e)!=null}function vt(i){return os(i)!=null}function os(i){for(let e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var qn;function Up(i){M(!qn,"__referenceConstructor has already been defined"),qn=i}function Vp(){return M(qn,"Reference.ts has not been loaded"),qn}var Yp=1,Gn=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ve(null),this.pendingWriteTree_=Sp(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Co(i,e,t,n,s){return hp(i.pendingWriteTree_,e,t,n,s),s?li(i,new ii(vo(),e,t)):[]}function qp(i,e,t,n){pp(i.pendingWriteTree_,e,t,n);let s=ve.fromObject(t);return li(i,new zi(vo(),e,s))}function ht(i,e,t=!1){let n=fp(i.pendingWriteTree_,e);if(mp(i.pendingWriteTree_,e)){let r=new ve(null);return n.snap!=null?r=r.set(X(),!0):le(n.children,o=>{r=r.set(new K(o),!0)}),li(i,new Ar(n.path,r,t))}else return[]}function Gi(i,e,t){return li(i,new ii(_o(),e,t))}function Gp(i,e,t){let n=ve.fromObject(t);return li(i,new zi(_o(),e,n))}function Xp(i,e){return li(i,new Wn(_o(),e))}function Kp(i,e,t){let n=So(i,t);if(n){let s=To(n),r=s.path,o=s.queryId,a=ge(r,e),l=new Wn(wo(o),a);return xo(i,r,l)}else return[]}function Xn(i,e,t,n,s=!1){let r=e._path,o=i.syncPointTree_.get(r),a=[];if(o&&(e._queryIdentifier==="default"||nd(o,e))){let l=jp(o,e,t,n);Bp(o)&&(i.syncPointTree_=i.syncPointTree_.remove(r));let c=l.removed;if(a=l.events,!s){let d=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=i.syncPointTree_.findOnPath(r,(h,f)=>vt(f));if(d&&!u){let h=i.syncPointTree_.subtree(r);if(!h.isEmpty()){let f=Jp(h);for(let m=0;m<f.length;++m){let g=f[m],v=g.query,p=ad(i,g);i.listenProvider_.startListening(ki(v),Wi(i,v),p.hashFn,p.onComplete)}}}!u&&c.length>0&&!n&&(d?i.listenProvider_.stopListening(ki(e),null):c.forEach(h=>{let f=i.queryToTagMap.get(ls(h));i.listenProvider_.stopListening(ki(h),f)}))}ef(i,c)}return a}function sd(i,e,t,n){let s=So(i,n);if(s!=null){let r=To(s),o=r.path,a=r.queryId,l=ge(o,e),c=new ii(wo(a),l,t);return xo(i,o,c)}else return[]}function Qp(i,e,t,n){let s=So(i,n);if(s){let r=To(s),o=r.path,a=r.queryId,l=ge(o,e),c=ve.fromObject(t),d=new zi(wo(a),l,c);return xo(i,o,d)}else return[]}function Br(i,e,t,n=!1){let s=e._path,r=null,o=!1;i.syncPointTree_.foreachOnPath(s,(h,f)=>{let m=ge(h,s);r=r||ft(f,m),o=o||vt(f)});let a=i.syncPointTree_.get(s);a?(o=o||vt(a),r=r||ft(a,X())):(a=new Yn,i.syncPointTree_=i.syncPointTree_.set(s,a));let l;r!=null?l=!0:(l=!1,r=j.EMPTY_NODE,i.syncPointTree_.subtree(s).foreachChild((f,m)=>{let g=ft(m,X());g&&(r=r.updateImmediateChild(f,g))}));let c=nd(a,e);if(!c&&!e._queryParams.loadsAllData()){let h=ls(e);M(!i.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=tf();i.queryToTagMap.set(h,f),i.tagToQueryMap.set(f,h)}let d=rs(i.pendingWriteTree_,s),u=Hp(a,e,t,d,r,l);if(!c&&!o&&!n){let h=id(a,e);u=u.concat(nf(i,e,h))}return u}function as(i,e,t){let s=i.pendingWriteTree_,r=i.syncPointTree_.findOnPath(e,(o,a)=>{let l=ge(o,e),c=ft(a,l);if(c)return c});return Gc(s,e,r,t,!0)}function Zp(i,e){let t=e._path,n=null;i.syncPointTree_.foreachOnPath(t,(c,d)=>{let u=ge(c,t);n=n||ft(d,u)});let s=i.syncPointTree_.get(t);s?n=n||ft(s,X()):(s=new Yn,i.syncPointTree_=i.syncPointTree_.set(t,s));let r=n!=null,o=r?new Ge(n,!0,!1):null,a=rs(i.pendingWriteTree_,e._path),l=ed(s,e,a,r?o.getNode():j.EMPTY_NODE,r);return Op(l)}function li(i,e){return rd(e,i.syncPointTree_,null,rs(i.pendingWriteTree_,X()))}function rd(i,e,t,n){if(q(i.path))return od(i,e,t,n);{let s=e.get(X());t==null&&s!=null&&(t=ft(s,X()));let r=[],o=Y(i.path),a=i.operationForChild(o),l=e.children.get(o);if(l&&a){let c=t?t.getImmediateChild(o):null,d=Xc(n,o);r=r.concat(rd(a,l,c,d))}return s&&(r=r.concat(Eo(s,i,n,t))),r}}function od(i,e,t,n){let s=e.get(X());t==null&&s!=null&&(t=ft(s,X()));let r=[];return e.children.inorderTraversal((o,a)=>{let l=t?t.getImmediateChild(o):null,c=Xc(n,o),d=i.operationForChild(o);d&&(r=r.concat(od(d,a,l,c)))}),s&&(r=r.concat(Eo(s,i,n,t))),r}function ad(i,e){let t=e.query,n=Wi(i,t);return{hashFn:()=>(Dp(e)||j.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return n?Kp(i,t._path,n):Xp(i,t._path);{let r=hh(s,t);return Xn(i,t,null,r)}}}}function Wi(i,e){let t=ls(e);return i.queryToTagMap.get(t)}function ls(i){return i._path.toString()+"$"+i._queryIdentifier}function So(i,e){return i.tagToQueryMap.get(e)}function To(i){let e=i.indexOf("$");return M(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new K(i.substr(0,e))}}function xo(i,e,t){let n=i.syncPointTree_.get(e);M(n,"Missing sync point for query tag that we're tracking");let s=rs(i.pendingWriteTree_,e);return Eo(n,t,s,null)}function Jp(i){return i.fold((e,t,n)=>{if(t&&vt(t))return[os(t)];{let s=[];return t&&(s=td(t)),le(n,(r,o)=>{s=s.concat(o)}),s}})}function ki(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(Vp())(i._repo,i._path):i}function ef(i,e){for(let t=0;t<e.length;++t){let n=e[t];if(!n._queryParams.loadsAllData()){let s=ls(n),r=i.queryToTagMap.get(s);i.queryToTagMap.delete(s),i.tagToQueryMap.delete(r)}}}function tf(){return Yp++}function nf(i,e,t){let n=e._path,s=Wi(i,e),r=ad(i,t),o=i.listenProvider_.startListening(ki(e),s,r.hashFn,r.onComplete),a=i.syncPointTree_.subtree(n);if(s)M(!vt(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,d,u)=>{if(!q(c)&&d&&vt(d))return[os(d).query];{let h=[];return d&&(h=h.concat(td(d).map(f=>f.query))),le(u,(f,m)=>{h=h.concat(m)}),h}});for(let c=0;c<l.length;++c){let d=l[c];i.listenProvider_.stopListening(ki(d),Wi(i,d))}}return o}var Hr=class i{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new i(t)}node(){return this.node_}},jr=class i{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=te(this.path_,e);return new i(this.syncTree_,t)}node(){return as(this.syncTree_,this.path_)}},sf=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},uc=function(i,e,t){if(!i||typeof i!="object")return i;if(M(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return rf(i[".sv"],e,t);if(typeof i[".sv"]=="object")return of(i[".sv"],e);M(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},rf=function(i,e,t){switch(i){case"timestamp":return t.timestamp;default:M(!1,"Unexpected server value: "+i)}},of=function(i,e,t){i.hasOwnProperty("increment")||M(!1,"Unexpected server value: "+JSON.stringify(i,null,2));let n=i.increment;typeof n!="number"&&M(!1,"Unexpected increment value: "+n);let s=e.node();if(M(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return n;let o=s.getValue();return typeof o!="number"?n:o+n},ld=function(i,e,t,n){return Po(e,new jr(t,i),n)},Io=function(i,e,t){return Po(i,new Hr(e),t)};function Po(i,e,t){let n=i.getPriority().val(),s=uc(n,e.getImmediateChild(".priority"),t),r;if(i.isLeafNode()){let o=i,a=uc(o.getValue(),e,t);return a!==o.getValue()||s!==o.getPriority().val()?new Jt(a,ie(s)):i}else{let o=i;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Jt(s))),o.forEachChild(J,(a,l)=>{let c=Po(l,e.getImmediateChild(a),t);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}var Bi=class{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}};function cs(i,e){let t=e instanceof K?e:new K(e),n=i,s=Y(t);for(;s!==null;){let r=lt(n.node.children,s)||{children:{},childCount:0};n=new Bi(s,n,r),t=Z(t),s=Y(t)}return n}function Ot(i){return i.node.value}function Mo(i,e){i.node.value=e,Ur(i)}function cd(i){return i.node.childCount>0}function af(i){return Ot(i)===void 0&&!cd(i)}function ds(i,e){le(i.node.children,(t,n)=>{e(new Bi(t,i,n))})}function dd(i,e,t,n){t&&!n&&e(i),ds(i,s=>{dd(s,e,!0,n)}),t&&n&&e(i)}function lf(i,e,t){let n=t?i:i.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function Xi(i){return new K(i.parent===null?i.name:Xi(i.parent)+"/"+i.name)}function Ur(i){i.parent!==null&&cf(i.parent,i.name,i)}function cf(i,e,t){let n=af(t),s=ke(i.node.children,e);n&&s?(delete i.node.children[e],i.node.childCount--,Ur(i)):!n&&!s&&(i.node.children[e]=t.node,i.node.childCount++,Ur(i))}var df=/[\[\].#$\/\u0000-\u001F\u007F]/,uf=/[\[\].#$\u0000-\u001F\u007F]/,tr=10*1024*1024,us=function(i){return typeof i=="string"&&i.length!==0&&!df.test(i)},ud=function(i){return typeof i=="string"&&i.length!==0&&!uf.test(i)},hf=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ud(i)},Hi=function(i){return i===null||typeof i=="string"||typeof i=="number"&&!is(i)||i&&typeof i=="object"&&ke(i,".sv")},Xe=function(i,e,t,n){n&&e===void 0||Ki(be(i,"value"),e,t)},Ki=function(i,e,t){let n=t instanceof K?new fr(t,i):t;if(e===void 0)throw new Error(i+"contains undefined "+Mt(n));if(typeof e=="function")throw new Error(i+"contains a function "+Mt(n)+" with contents = "+e.toString());if(is(e))throw new Error(i+"contains "+e.toString()+" "+Mt(n));if(typeof e=="string"&&e.length>tr/3&&wi(e)>tr)throw new Error(i+"contains a string greater than "+tr+" utf8 bytes "+Mt(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(le(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!us(o)))throw new Error(i+" contains an invalid key ("+o+") "+Mt(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Bh(n,o),Ki(i,a,n),Hh(n)}),s&&r)throw new Error(i+' contains ".value" child '+Mt(n)+" in addition to actual children.")}},pf=function(i,e){let t,n;for(t=0;t<e.length;t++){n=e[t];let r=Ri(n);for(let o=0;o<r.length;o++)if(!(r[o]===".priority"&&o===r.length-1)){if(!us(r[o]))throw new Error(i+"contains an invalid key ("+r[o]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Wh);let s=null;for(t=0;t<e.length;t++){if(n=e[t],s!==null&&Re(s,n))throw new Error(i+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}},hd=function(i,e,t,n){if(n&&e===void 0)return;let s=be(i,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");let r=[];le(e,(o,a)=>{let l=new K(o);if(Ki(s,a,te(t,l)),ho(l)===".priority"&&!Hi(a))throw new Error(s+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(l)}),pf(s,r)},ko=function(i,e,t){if(!(t&&e===void 0)){if(is(e))throw new Error(be(i,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Hi(e))throw new Error(be(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Qi=function(i,e,t,n){if(!(n&&t===void 0)&&!us(t))throw new Error(be(i,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},ci=function(i,e,t,n){if(!(n&&t===void 0)&&!ud(t))throw new Error(be(i,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},ff=function(i,e,t,n){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ci(i,e,t,n)},xe=function(i,e){if(Y(e)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},pd=function(i,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!us(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!hf(t))throw new Error(be(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Vr=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function hs(i,e){let t=null;for(let n=0;n<e.length;n++){let s=e[n],r=s.getPath();t!==null&&!po(r,t.path)&&(i.eventLists_.push(t),t=null),t===null&&(t={events:[],path:r}),t.events.push(s)}t&&i.eventLists_.push(t)}function fd(i,e,t){hs(i,t),md(i,n=>po(n,e))}function Ie(i,e,t){hs(i,t),md(i,n=>Re(n,e)||Re(e,n))}function md(i,e){i.recursionDepth_++;let t=!0;for(let n=0;n<i.eventLists_.length;n++){let s=i.eventLists_[n];if(s){let r=s.path;e(r)?(mf(i.eventLists_[n]),i.eventLists_[n]=null):t=!1}}t&&(i.eventLists_=[]),i.recursionDepth_--}function mf(i){for(let e=0;e<i.events.length;e++){let t=i.events[e];if(t!==null){i.events[e]=null;let n=t.getEventRunner();At&&ae("event: "+t.toString()),oi(n)}}}var gd="repo_interrupt",gf=25,Yr=class{constructor(e,t,n,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$n(),this.transactionQueueTree_=new Bi,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function vf(i,e,t){if(i.stats_=uo(i.repoInfo_),i.forceRestClient_||gh())i.server_=new Tr(i.repoInfo_,(n,s,r,o)=>{hc(i,n,s,r,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>pc(i,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{se(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}i.persistentConnection_=new fo(i.repoInfo_,e,(n,s,r,o)=>{hc(i,n,s,r,o)},n=>{pc(i,n)},n=>{_f(i,n)},i.authTokenProvider_,i.appCheckProvider_,t),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(n=>{i.server_.refreshAuthToken(n)}),i.appCheckProvider_.addTokenChangeListener(n=>{i.server_.refreshAppCheckToken(n.token)}),i.statsReporter_=_h(i.repoInfo_,()=>new kr(i.stats_,i.server_)),i.infoData_=new xr,i.infoSyncTree_=new Gn({startListening:(n,s,r,o)=>{let a=[],l=i.infoData_.getNode(n._path);return l.isEmpty()||(a=Gi(i.infoSyncTree_,n._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Ao(i,"connected",!1),i.serverSyncTree_=new Gn({startListening:(n,s,r,o)=>(i.server_.listen(n,r,s,(a,l)=>{let c=o(a,l);Ie(i.eventQueue_,n._path,c)}),[]),stopListening:(n,s)=>{i.server_.unlisten(n,s)}})}function vd(i){let t=i.infoData_.getNode(new K(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Zi(i){return sf({timestamp:vd(i)})}function hc(i,e,t,n,s){i.dataUpdateCount++;let r=new K(e);t=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,t):t;let o=[];if(s)if(n){let l=_i(t,c=>ie(c));o=Qp(i.serverSyncTree_,r,l,s)}else{let l=ie(t);o=sd(i.serverSyncTree_,r,l,s)}else if(n){let l=_i(t,c=>ie(c));o=Gp(i.serverSyncTree_,r,l)}else{let l=ie(t);o=Gi(i.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=si(i,r)),Ie(i.eventQueue_,a,o)}function pc(i,e){Ao(i,"connected",e),e===!1&&bf(i)}function _f(i,e){le(e,(t,n)=>{Ao(i,t,n)})}function Ao(i,e,t){let n=new K("/.info/"+e),s=ie(t);i.infoData_.updateSnapshot(n,s);let r=Gi(i.infoSyncTree_,n,s);Ie(i.eventQueue_,n,r)}function ps(i){return i.nextWriteId_++}function wf(i,e,t){let n=Zp(i.serverSyncTree_,e);return n!=null?Promise.resolve(n):i.server_.get(e).then(s=>{let r=ie(s).withIndex(e._queryParams.getIndex());Br(i.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=Gi(i.serverSyncTree_,e._path,r);else{let a=Wi(i.serverSyncTree_,e);o=sd(i.serverSyncTree_,e._path,r,a)}return Ie(i.eventQueue_,e._path,o),Xn(i.serverSyncTree_,e,t,null,!0),r},s=>(di(i,"get for query "+se(e)+" failed: "+s),Promise.reject(new Error(s))))}function Ro(i,e,t,n,s){di(i,"set",{path:e.toString(),value:t,priority:n});let r=Zi(i),o=ie(t,n),a=as(i.serverSyncTree_,e),l=Io(o,a,r),c=ps(i),d=Co(i.serverSyncTree_,e,l,c,!0);hs(i.eventQueue_,d),i.server_.put(e.toString(),o.val(!0),(h,f)=>{let m=h==="ok";m||he("set at "+e+" failed: "+h);let g=ht(i.serverSyncTree_,c,!m);Ie(i.eventQueue_,e,g),_t(i,s,h,f)});let u=Do(i,e);si(i,u),Ie(i.eventQueue_,u,[])}function yf(i,e,t,n){di(i,"update",{path:e.toString(),value:t});let s=!0,r=Zi(i),o={};if(le(t,(a,l)=>{s=!1,o[a]=ld(te(e,a),ie(l),i.serverSyncTree_,r)}),s)ae("update() called with empty data.  Don't do anything."),_t(i,n,"ok",void 0);else{let a=ps(i),l=qp(i.serverSyncTree_,e,o,a);hs(i.eventQueue_,l),i.server_.merge(e.toString(),t,(c,d)=>{let u=c==="ok";u||he("update at "+e+" failed: "+c);let h=ht(i.serverSyncTree_,a,!u),f=h.length>0?si(i,e):e;Ie(i.eventQueue_,f,h),_t(i,n,c,d)}),le(t,c=>{let d=Do(i,te(e,c));si(i,d)}),Ie(i.eventQueue_,e,[])}}function bf(i){di(i,"onDisconnectEvents");let e=Zi(i),t=$n();Pr(i.onDisconnect_,X(),(s,r)=>{let o=ld(s,r,i.serverSyncTree_,e);ai(t,s,o)});let n=[];Pr(t,X(),(s,r)=>{n=n.concat(Gi(i.serverSyncTree_,s,r));let o=Do(i,s);si(i,o)}),i.onDisconnect_=$n(),Ie(i.eventQueue_,X(),n)}function Ef(i,e,t){i.server_.onDisconnectCancel(e.toString(),(n,s)=>{n==="ok"&&Ir(i.onDisconnect_,e),_t(i,t,n,s)})}function fc(i,e,t,n){let s=ie(t);i.server_.onDisconnectPut(e.toString(),s.val(!0),(r,o)=>{r==="ok"&&ai(i.onDisconnect_,e,s),_t(i,n,r,o)})}function Cf(i,e,t,n,s){let r=ie(t,n);i.server_.onDisconnectPut(e.toString(),r.val(!0),(o,a)=>{o==="ok"&&ai(i.onDisconnect_,e,r),_t(i,s,o,a)})}function Sf(i,e,t,n){if(mn(t)){ae("onDisconnect().update() called with empty data.  Don't do anything."),_t(i,n,"ok",void 0);return}i.server_.onDisconnectMerge(e.toString(),t,(s,r)=>{s==="ok"&&le(t,(o,a)=>{let l=ie(a);ai(i.onDisconnect_,te(e,o),l)}),_t(i,n,s,r)})}function Tf(i,e,t){let n;Y(e._path)===".info"?n=Br(i.infoSyncTree_,e,t):n=Br(i.serverSyncTree_,e,t),fd(i.eventQueue_,e._path,n)}function qr(i,e,t){let n;Y(e._path)===".info"?n=Xn(i.infoSyncTree_,e,t):n=Xn(i.serverSyncTree_,e,t),fd(i.eventQueue_,e._path,n)}function _d(i){i.persistentConnection_&&i.persistentConnection_.interrupt(gd)}function xf(i){i.persistentConnection_&&i.persistentConnection_.resume(gd)}function di(i,...e){let t="";i.persistentConnection_&&(t=i.persistentConnection_.id+":"),ae(t,...e)}function _t(i,e,t,n){e&&oi(()=>{if(t==="ok")e(null);else{let s=(t||"error").toUpperCase(),r=s;n&&(r+=": "+n);let o=new Error(r);o.code=s,e(o)}})}function If(i,e,t,n,s,r){di(i,"transaction on "+e);let o={path:e,update:t,onComplete:n,status:null,order:vc(),applyLocally:r,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=No(i,e,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Ki("transaction failed: Data returned ",l,o.path),o.status=0;let c=cs(i.transactionQueueTree_,e),d=Ot(c)||[];d.push(o),Mo(c,d);let u;typeof l=="object"&&l!==null&&ke(l,".priority")?(u=lt(l,".priority"),M(Hi(u),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):u=(as(i.serverSyncTree_,e)||j.EMPTY_NODE).getPriority().val();let h=Zi(i),f=ie(l,u),m=Io(f,a,h);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=m,o.currentWriteId=ps(i);let g=Co(i.serverSyncTree_,e,m,o.currentWriteId,o.applyLocally);Ie(i.eventQueue_,e,g),fs(i,i.transactionQueueTree_)}}function No(i,e,t){return as(i.serverSyncTree_,e,t)||j.EMPTY_NODE}function fs(i,e=i.transactionQueueTree_){if(e||ms(i,e),Ot(e)){let t=yd(i,e);M(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&Pf(i,Xi(e),t)}else cd(e)&&ds(e,t=>{fs(i,t)})}function Pf(i,e,t){let n=t.map(c=>c.currentWriteId),s=No(i,e,n),r=s,o=s.hash();for(let c=0;c<t.length;c++){let d=t[c];M(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let u=ge(e,d.path);r=r.updateChild(u,d.currentOutputSnapshotRaw)}let a=r.val(!0),l=e;i.server_.put(l.toString(),a,c=>{di(i,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){let u=[];for(let h=0;h<t.length;h++)t[h].status=2,d=d.concat(ht(i.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&u.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();ms(i,cs(i.transactionQueueTree_,e)),fs(i,i.transactionQueueTree_),Ie(i.eventQueue_,e,d);for(let h=0;h<u.length;h++)oi(u[h])}else{if(c==="datastale")for(let u=0;u<t.length;u++)t[u].status===3?t[u].status=4:t[u].status=0;else{he("transaction at "+l.toString()+" failed: "+c);for(let u=0;u<t.length;u++)t[u].status=4,t[u].abortReason=c}si(i,e)}},o)}function si(i,e){let t=wd(i,e),n=Xi(t),s=yd(i,t);return Mf(i,s,n),n}function Mf(i,e,t){if(e.length===0)return;let n=[],s=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=ge(t,l.path),d=!1,u;if(M(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,u=l.abortReason,s=s.concat(ht(i.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=gf)d=!0,u="maxretry",s=s.concat(ht(i.serverSyncTree_,l.currentWriteId,!0));else{let h=No(i,l.path,o);l.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){Ki("transaction failed: Data returned ",f,l.path);let m=ie(f);typeof f=="object"&&f!=null&&ke(f,".priority")||(m=m.updatePriority(h.getPriority()));let v=l.currentWriteId,p=Zi(i),_=Io(m,h,p);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=_,l.currentWriteId=ps(i),o.splice(o.indexOf(v),1),s=s.concat(Co(i.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),s=s.concat(ht(i.serverSyncTree_,v,!0))}else d=!0,u="nodata",s=s.concat(ht(i.serverSyncTree_,l.currentWriteId,!0))}Ie(i.eventQueue_,t,s),s=[],d&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(u==="nodata"?n.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):n.push(()=>e[a].onComplete(new Error(u),!1,null))))}ms(i,i.transactionQueueTree_);for(let a=0;a<n.length;a++)oi(n[a]);fs(i,i.transactionQueueTree_)}function wd(i,e){let t,n=i.transactionQueueTree_;for(t=Y(e);t!==null&&Ot(n)===void 0;)n=cs(n,t),e=Z(e),t=Y(e);return n}function yd(i,e){let t=[];return bd(i,e,t),t.sort((n,s)=>n.order-s.order),t}function bd(i,e,t){let n=Ot(e);if(n)for(let s=0;s<n.length;s++)t.push(n[s]);ds(e,s=>{bd(i,s,t)})}function ms(i,e){let t=Ot(e);if(t){let n=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[n]=t[s],n++);t.length=n,Mo(e,t.length>0?t:void 0)}ds(e,n=>{ms(i,n)})}function Do(i,e){let t=Xi(wd(i,e)),n=cs(i.transactionQueueTree_,e);return lf(n,s=>{ir(i,s)}),ir(i,n),dd(n,s=>{ir(i,s)}),t}function ir(i,e){let t=Ot(e);if(t){let n=[],s=[],r=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(M(r===o-1,"All SENT items should be at beginning of queue."),r=o,t[o].status=3,t[o].abortReason="set"):(M(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),s=s.concat(ht(i.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?Mo(e,void 0):t.length=r+1,Ie(i.eventQueue_,Xi(e),s);for(let o=0;o<n.length;o++)oi(n[o])}}function kf(i){let e="",t=i.split("/");for(let n=0;n<t.length;n++)if(t[n].length>0){let s=t[n];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Af(i){let e={};i.charAt(0)==="?"&&(i=i.substring(1));for(let t of i.split("&")){if(t.length===0)continue;let n=t.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):he(`Invalid query segment '${t}' in query '${i}'`)}return e}var Gr=function(i,e){let t=Rf(i),n=t.namespace;t.domain==="firebase.com"&&qe(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&t.domain!=="localhost"&&qe("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||ah();let s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new An(t.host,t.secure,n,s,e,"",n!==t.subdomain),path:new K(t.pathString)}},Rf=function(i){let e="",t="",n="",s="",r="",o=!0,a="https",l=443;if(typeof i=="string"){let c=i.indexOf("//");c>=0&&(a=i.substring(0,c-1),i=i.substring(c+2));let d=i.indexOf("/");d===-1&&(d=i.length);let u=i.indexOf("?");u===-1&&(u=i.length),e=i.substring(0,Math.min(d,u)),d<u&&(s=kf(i.substring(d,u)));let h=Af(i.substring(Math.min(i.length,u)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let f=e.slice(0,c);if(f.toLowerCase()==="localhost")t="localhost";else if(f.split(".").length<=2)t=f;else{let m=e.indexOf(".");n=e.substring(0,m).toLowerCase(),t=e.substring(m+1),r=n}"ns"in h&&(r=h.ns)}return{host:e,port:l,domain:t,subdomain:n,secure:o,scheme:a,pathString:s,namespace:r}};var mc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Nf=function(){let i=0,e=[];return function(t){let n=t===i;i=t;let s,r=new Array(8);for(s=7;s>=0;s--)r[s]=mc.charAt(t%64),t=Math.floor(t/64);M(t===0,"Cannot push at time == 0");let o=r.join("");if(n){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=mc.charAt(e[s]);return M(o.length===20,"nextPushId: Length should be 20."),o}}();var Kn=class{constructor(e,t,n,s){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=s}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+se(this.snapshot.exportVal())}},Qn=class{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var ji=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return M(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Zn=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new me;return Ef(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){xe("OnDisconnect.remove",this._path);let e=new me;return fc(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){xe("OnDisconnect.set",this._path),Xe("OnDisconnect.set",e,this._path,!1);let t=new me;return fc(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){xe("OnDisconnect.setWithPriority",this._path),Xe("OnDisconnect.setWithPriority",e,this._path,!1),ko("OnDisconnect.setWithPriority",t,!1);let n=new me;return Cf(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){xe("OnDisconnect.update",this._path),hd("OnDisconnect.update",e,this._path,!1);let t=new me;return Sf(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}};var _e=class i{constructor(e,t,n,s){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=s}get key(){return q(this._path)?null:ho(this._path)}get ref(){return new Pe(this._repo,this._path)}get _queryIdentifier(){let e=tc(this._queryParams),t=co(e);return t==="{}"?"default":t}get _queryObject(){return tc(this._queryParams)}isEqual(e){if(e=Ee(e),!(e instanceof i))return!1;let t=this._repo===e._repo,n=po(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&n&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+$h(this._path)}};function gs(i,e){if(i._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function yt(i){let e=null,t=null;if(i.hasStart()&&(e=i.getIndexStartValue()),i.hasEnd()&&(t=i.getIndexEndValue()),i.getIndex()===Ye){let n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==mt)throw new Error(n);if(typeof e!="string")throw new Error(s)}if(i.hasEnd()){if(i.getIndexEndName()!==st)throw new Error(n);if(typeof t!="string")throw new Error(s)}}else if(i.getIndex()===J){if(e!=null&&!Hi(e)||t!=null&&!Hi(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(M(i.getIndex()instanceof Ni||i.getIndex()===go,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function vs(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Pe=class i extends _e{constructor(e,t){super(e,t,new Fi,!1)}get parent(){let e=zc(this._path);return e===null?null:new i(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},ri=class i{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new K(e),n=wt(this.ref,e);return new i(this._node.getChild(t),n,J)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new i(s,wt(this.ref,n),J)))}hasChild(e){let t=new K(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Oo(i,e){return i=Ee(i),i._checkNotDeleted("ref"),e!==void 0?wt(i._root,e):i._root}function Lo(i,e){i=Ee(i),i._checkNotDeleted("refFromURL");let t=Gr(e,i._repo.repoInfo_.nodeAdmin);pd("refFromURL",t);let n=t.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&n.host!==i._repo.repoInfo_.host&&qe("refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+i._repo.repoInfo_.host+")"),Oo(i,t.path.toString())}function wt(i,e){return i=Ee(i),Y(i._path)===null?ff("child","path",e,!1):ci("child","path",e,!1),new Pe(i._repo,te(i._path,e))}function Ed(i,e){i=Ee(i),xe("push",i._path),Xe("push",e,i._path,!0);let t=vd(i._repo),n=Nf(t),s=wt(i,n),r=wt(i,n),o;return e!=null?o=_s(r,e).then(()=>r):o=Promise.resolve(r),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function Cd(i){return xe("remove",i._path),_s(i,null)}function _s(i,e){i=Ee(i),xe("set",i._path),Xe("set",e,i._path,!1);let t=new me;return Ro(i._repo,i._path,e,null,t.wrapCallback(()=>{})),t.promise}function Sd(i,e){i=Ee(i),xe("setPriority",i._path),ko("setPriority",e,!1);let t=new me;return Ro(i._repo,te(i._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function Td(i,e,t){if(xe("setWithPriority",i._path),Xe("setWithPriority",e,i._path,!1),ko("setWithPriority",t,!1),i.key===".length"||i.key===".keys")throw"setWithPriority failed: "+i.key+" is a read-only object.";let n=new me;return Ro(i._repo,i._path,e,t,n.wrapCallback(()=>{})),n.promise}function xd(i,e){hd("update",e,i._path,!1);let t=new me;return yf(i._repo,i._path,e,t.wrapCallback(()=>{})),t.promise}function Id(i){i=Ee(i);let e=new ji(()=>{}),t=new Ui(e);return wf(i._repo,i,t).then(n=>new ri(n,new Pe(i._repo,i._path),i._queryParams.getIndex()))}var Ui=class i{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let n=t._queryParams.getIndex();return new Kn("value",this,new ri(e.snapshotNode,new Pe(t._repo,t._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Qn(this,e,t):null}matches(e){return e instanceof i?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Jn=class i{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Qn(this,e,t):null}createEvent(e,t){M(e.childName!=null,"Child events should have a childName.");let n=wt(new Pe(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new Kn(e.type,this,new ri(e.snapshotNode,n,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof i?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Ji(i,e,t,n,s){let r;if(typeof n=="object"&&(r=void 0,s=n),typeof n=="function"&&(r=n),s&&s.onlyOnce){let l=t,c=(d,u)=>{qr(i._repo,i,a),l(d,u)};c.userCallback=t.userCallback,c.context=t.context,t=c}let o=new ji(t,r||void 0),a=e==="value"?new Ui(o):new Jn(e,o);return Tf(i._repo,i,a),()=>qr(i._repo,i,a)}function ws(i,e,t,n){return Ji(i,"value",e,t,n)}function Fo(i,e,t,n){return Ji(i,"child_added",e,t,n)}function zo(i,e,t,n){return Ji(i,"child_changed",e,t,n)}function $o(i,e,t,n){return Ji(i,"child_moved",e,t,n)}function Wo(i,e,t,n){return Ji(i,"child_removed",e,t,n)}function Bo(i,e,t){let n=null,s=t?new ji(t):null;e==="value"?n=new Ui(s):e&&(n=new Jn(e,s)),qr(i._repo,i,n)}var Me=class{},es=class extends Me{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Xe("endAt",this._value,e._path,!0);let t=Sr(e._queryParams,this._value,this._key);if(vs(t),yt(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _e(e._repo,e._path,t,e._orderByCalled)}};function Pd(i,e){return Qi("endAt","key",e,!0),new es(i,e)}var Xr=class extends Me{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Xe("endBefore",this._value,e._path,!1);let t=sp(e._queryParams,this._value,this._key);if(vs(t),yt(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _e(e._repo,e._path,t,e._orderByCalled)}};function Md(i,e){return Qi("endBefore","key",e,!0),new Xr(i,e)}var ts=class extends Me{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Xe("startAt",this._value,e._path,!0);let t=Cr(e._queryParams,this._value,this._key);if(vs(t),yt(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new _e(e._repo,e._path,t,e._orderByCalled)}};function kd(i=null,e){return Qi("startAt","key",e,!0),new ts(i,e)}var Kr=class extends Me{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Xe("startAfter",this._value,e._path,!1);let t=np(e._queryParams,this._value,this._key);if(vs(t),yt(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new _e(e._repo,e._path,t,e._orderByCalled)}};function Ad(i,e){return Qi("startAfter","key",e,!0),new Kr(i,e)}var Qr=class extends Me{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new _e(e._repo,e._path,tp(e._queryParams,this._limit),e._orderByCalled)}};function Rd(i){if(typeof i!="number"||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Qr(i)}var Zr=class extends Me{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new _e(e._repo,e._path,ip(e._queryParams,this._limit),e._orderByCalled)}};function Nd(i){if(typeof i!="number"||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Zr(i)}var Jr=class extends Me{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){gs(e,"orderByChild");let t=new K(this._path);if(q(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let n=new Ni(t),s=ns(e._queryParams,n);return yt(s),new _e(e._repo,e._path,s,!0)}};function Dd(i){if(i==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(i==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(i==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ci("orderByChild","path",i,!1),new Jr(i)}var eo=class extends Me{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){gs(e,"orderByKey");let t=ns(e._queryParams,Ye);return yt(t),new _e(e._repo,e._path,t,!0)}};function Od(){return new eo}var to=class extends Me{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){gs(e,"orderByPriority");let t=ns(e._queryParams,J);return yt(t),new _e(e._repo,e._path,t,!0)}};function Ld(){return new to}var io=class extends Me{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){gs(e,"orderByValue");let t=ns(e._queryParams,go);return yt(t),new _e(e._repo,e._path,t,!0)}};function Fd(){return new io}var no=class extends Me{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Xe("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new es(this._value,this._key)._apply(new ts(this._value,this._key)._apply(e))}};function zd(i,e){return Qi("equalTo","key",e,!0),new no(i,e)}function De(i,...e){let t=Ee(i);for(let n of e)t=n._apply(t);return t}$p(Pe);Up(Pe);var Df="FIREBASE_DATABASE_EMULATOR_HOST",so={},Of=!1;function Lf(i,e,t,n){i.repoInfo_=new An(`${e}:${t}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),n&&(i.authTokenProvider_=n)}function Ho(i,e,t,n,s){let r=n||i.options.databaseURL;r===void 0&&(i.options.projectId||qe("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ae("Using default host for project ",i.options.projectId),r=`${i.options.projectId}-default-rtdb.firebaseio.com`);let o=Gr(r,s),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[Df]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=Gr(r,s),a=o.repoInfo):l=!o.repoInfo.secure;let d=s&&l?new Ii(Ii.OWNER):new lr(i.name,i.options,e);pd("Invalid Firebase Database URL",o),q(o.path)||qe("Database URL must point to the root of a Firebase Database (not including a child path).");let u=zf(a,i,d,new ar(i.name,t));return new ro(u,i)}function Ff(i,e){let t=so[e];(!t||t[i.key]!==i)&&qe(`Database ${e}(${i.repoInfo_}) has already been deleted.`),_d(i),delete t[i.key]}function zf(i,e,t,n){let s=so[e.name];s||(s={},so[e.name]=s);let r=s[i.toURLString()];return r&&qe("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Yr(i,Of,t,n),s[i.toURLString()]=r,r}var ro=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(vf(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pe(this._repo,X())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ff(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qe("Cannot call "+e+" on a deleted database.")}};function $d(){Fc.IS_TRANSPORT_INITIALIZED&&he("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Wd(){$d(),Ai.forceDisallow()}function Bd(){$d(),Xt.forceDisallow(),Ai.forceAllow()}function Hd(i,e,t,n={}){i=Ee(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&qe("Cannot call useEmulator() after instance has already been initialized.");let s=i._repoInternal,r;if(s.repoInfo_.nodeAdmin)n.mockUserToken&&qe('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new Ii(Ii.OWNER);else if(n.mockUserToken){let o=typeof n.mockUserToken=="string"?n.mockUserToken:Ya(n.mockUserToken,i.app.options.projectId);r=new Ii(o)}Lf(s,e,t,r)}function jd(i){i=Ee(i),i._checkNotDeleted("goOffline"),_d(i._repo)}function Ud(i){i=Ee(i),i._checkNotDeleted("goOnline"),xf(i._repo)}function Vd(i,e){wc(i,e)}function $f(i){lo(tl),el(new Vt("database",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return Ho(n,s,r,t)},"PUBLIC").setMultipleInstances(!0)),zs(zl,$l,i),zs(zl,$l,"esm2017")}var Wf={".sv":"timestamp"};function Yd(){return Wf}function qd(i){return{".sv":{increment:i}}}var oo=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function Gd(i,e,t){var n;if(i=Ee(i),xe("Reference.transaction",i._path),i.key===".length"||i.key===".keys")throw"Reference.transaction failed: "+i.key+" is a read-only object.";let s=(n=t?.applyLocally)!==null&&n!==void 0?n:!0,r=new me,o=(l,c,d)=>{let u=null;l?r.reject(l):(u=new ri(d,new Pe(i._repo,i._path),J),r.resolve(new oo(c,u)))},a=ws(i,()=>{});return If(i._repo,i._path,e,o,a,s),r.promise}fo.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};fo.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};$f();var Bf="@firebase/database-compat",Hf="1.0.7";var jf=new vn("@firebase/database-compat"),Xd=function(i){let e="FIREBASE WARNING: "+i;jf.warn(e)};var Uf=function(i,e,t,n){if(!(n&&t===void 0)&&typeof t!="boolean")throw new Error(be(i,e)+"must be a boolean.")},Vf=function(i,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(be(i,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var jo=class{constructor(e){this._delegate=e}cancel(e){B("OnDisconnect.cancel",0,1,arguments.length),oe("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),n=>e(n)),t}remove(e){B("OnDisconnect.remove",0,1,arguments.length),oe("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),n=>e(n)),t}set(e,t){B("OnDisconnect.set",1,2,arguments.length),oe("OnDisconnect.set","onComplete",t,!0);let n=this._delegate.set(e);return t&&n.then(()=>t(null),s=>t(s)),n}setWithPriority(e,t,n){B("OnDisconnect.setWithPriority",2,3,arguments.length),oe("OnDisconnect.setWithPriority","onComplete",n,!0);let s=this._delegate.setWithPriority(e,t);return n&&s.then(()=>n(null),r=>n(r)),s}update(e,t){if(B("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let s={};for(let r=0;r<e.length;++r)s[""+r]=e[r];e=s,Xd("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oe("OnDisconnect.update","onComplete",t,!0);let n=this._delegate.update(e);return t&&n.then(()=>t(null),s=>t(s)),n}};var Uo=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return B("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Lt=class i{constructor(e,t){this._database=e,this._delegate=t}val(){return B("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return B("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return B("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return B("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return B("DataSnapshot.child",0,1,arguments.length),e=String(e),ci("DataSnapshot.child","path",e,!1),new i(this._database,this._delegate.child(e))}hasChild(e){return B("DataSnapshot.hasChild",1,1,arguments.length),ci("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return B("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return B("DataSnapshot.forEach",1,1,arguments.length),oe("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new i(this._database,t)))}hasChildren(){return B("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return B("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return B("DataSnapshot.ref",0,0,arguments.length),new rt(this._database,this._delegate.ref)}get ref(){return this.getRef()}},ys=class i{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,s){var r;B("Query.on",2,4,arguments.length),oe("Query.on","callback",t,!1);let o=i.getCancelAndContextArgs_("Query.on",n,s),a=(c,d)=>{t.call(o.context,new Lt(this.database,c),d)};a.userCallback=t,a.context=o.context;let l=(r=o.cancel)===null||r===void 0?void 0:r.bind(o.context);switch(e){case"value":return ws(this._delegate,a,l),t;case"child_added":return Fo(this._delegate,a,l),t;case"child_removed":return Wo(this._delegate,a,l),t;case"child_changed":return zo(this._delegate,a,l),t;case"child_moved":return $o(this._delegate,a,l),t;default:throw new Error(be("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(B("Query.off",0,3,arguments.length),Vf("Query.off",e,!0),oe("Query.off","callback",t,!0),Ls("Query.off","context",n,!0),t){let s=()=>{};s.userCallback=t,s.context=n,Bo(this._delegate,e,s)}else Bo(this._delegate,e)}get(){return Id(this._delegate).then(e=>new Lt(this.database,e))}once(e,t,n,s){B("Query.once",1,4,arguments.length),oe("Query.once","callback",t,!0);let r=i.getCancelAndContextArgs_("Query.once",n,s),o=new me,a=(c,d)=>{let u=new Lt(this.database,c);t&&t.call(r.context,u,d),o.resolve(u)};a.userCallback=t,a.context=r.context;let l=c=>{r.cancel&&r.cancel.call(r.context,c),o.reject(c)};switch(e){case"value":ws(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Fo(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Wo(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":zo(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":$o(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(be("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return B("Query.limitToFirst",1,1,arguments.length),new i(this.database,De(this._delegate,Rd(e)))}limitToLast(e){return B("Query.limitToLast",1,1,arguments.length),new i(this.database,De(this._delegate,Nd(e)))}orderByChild(e){return B("Query.orderByChild",1,1,arguments.length),new i(this.database,De(this._delegate,Dd(e)))}orderByKey(){return B("Query.orderByKey",0,0,arguments.length),new i(this.database,De(this._delegate,Od()))}orderByPriority(){return B("Query.orderByPriority",0,0,arguments.length),new i(this.database,De(this._delegate,Ld()))}orderByValue(){return B("Query.orderByValue",0,0,arguments.length),new i(this.database,De(this._delegate,Fd()))}startAt(e=null,t){return B("Query.startAt",0,2,arguments.length),new i(this.database,De(this._delegate,kd(e,t)))}startAfter(e=null,t){return B("Query.startAfter",0,2,arguments.length),new i(this.database,De(this._delegate,Ad(e,t)))}endAt(e=null,t){return B("Query.endAt",0,2,arguments.length),new i(this.database,De(this._delegate,Pd(e,t)))}endBefore(e=null,t){return B("Query.endBefore",0,2,arguments.length),new i(this.database,De(this._delegate,Md(e,t)))}equalTo(e,t){return B("Query.equalTo",1,2,arguments.length),new i(this.database,De(this._delegate,zd(e,t)))}toString(){return B("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return B("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(B("Query.isEqual",1,1,arguments.length),!(e instanceof i)){let t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){let s={cancel:void 0,context:void 0};if(t&&n)s.cancel=t,oe(e,"cancel",s.cancel,!0),s.context=n,Ls(e,"context",s.context,!0);else if(t)if(typeof t=="object"&&t!==null)s.context=t;else if(typeof t=="function")s.cancel=t;else throw new Error(be(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return s}get ref(){return new rt(this.database,new Pe(this._delegate._repo,this._delegate._path))}},rt=class i extends ys{constructor(e,t){super(e,new _e(t._repo,t._path,new Fi,!1)),this.database=e,this._delegate=t}getKey(){return B("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return B("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new i(this.database,wt(this._delegate,e))}getParent(){B("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new i(this.database,e):null}getRoot(){return B("Reference.root",0,0,arguments.length),new i(this.database,this._delegate.root)}set(e,t){B("Reference.set",1,2,arguments.length),oe("Reference.set","onComplete",t,!0);let n=_s(this._delegate,e);return t&&n.then(()=>t(null),s=>t(s)),n}update(e,t){if(B("Reference.update",1,2,arguments.length),Array.isArray(e)){let s={};for(let r=0;r<e.length;++r)s[""+r]=e[r];e=s,Xd("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xe("Reference.update",this._delegate._path),oe("Reference.update","onComplete",t,!0);let n=xd(this._delegate,e);return t&&n.then(()=>t(null),s=>t(s)),n}setWithPriority(e,t,n){B("Reference.setWithPriority",2,3,arguments.length),oe("Reference.setWithPriority","onComplete",n,!0);let s=Td(this._delegate,e,t);return n&&s.then(()=>n(null),r=>n(r)),s}remove(e){B("Reference.remove",0,1,arguments.length),oe("Reference.remove","onComplete",e,!0);let t=Cd(this._delegate);return e&&t.then(()=>e(null),n=>e(n)),t}transaction(e,t,n){B("Reference.transaction",1,3,arguments.length),oe("Reference.transaction","transactionUpdate",e,!1),oe("Reference.transaction","onComplete",t,!0),Uf("Reference.transaction","applyLocally",n,!0);let s=Gd(this._delegate,e,{applyLocally:n}).then(r=>new Uo(r.committed,new Lt(this.database,r.snapshot)));return t&&s.then(r=>t(null,r.committed,r.snapshot),r=>t(r,!1,null)),s}setPriority(e,t){B("Reference.setPriority",1,2,arguments.length),oe("Reference.setPriority","onComplete",t,!0);let n=Sd(this._delegate,e);return t&&n.then(()=>t(null),s=>t(s)),n}push(e,t){B("Reference.push",0,2,arguments.length),oe("Reference.push","onComplete",t,!0);let n=Ed(this._delegate,e),s=n.then(o=>new i(this.database,o));t&&s.then(()=>t(null),o=>t(o));let r=new i(this.database,n);return r.then=s.then.bind(s),r.catch=s.catch.bind(s,void 0),r}onDisconnect(){return xe("Reference.onDisconnect",this._delegate._path),new jo(new Zn(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Ft=class{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Wd,forceLongPolling:Bd}}useEmulator(e,t,n={}){Hd(this._delegate,e,t,n)}ref(e){if(B("database.ref",0,1,arguments.length),e instanceof rt){let t=Lo(this._delegate,e.toString());return new rt(this,t)}else{let t=Oo(this._delegate,e);return new rt(this,t)}}refFromURL(e){B("database.refFromURL",1,1,arguments.length);let n=Lo(this._delegate,e);return new rt(this,n)}goOffline(){return B("database.goOffline",0,0,arguments.length),jd(this._delegate)}goOnline(){return B("database.goOnline",0,0,arguments.length),Ud(this._delegate)}};Ft.ServerValue={TIMESTAMP:Yd(),increment:i=>qd(i)};function Yf({app:i,url:e,version:t,customAuthImpl:n,customAppCheckImpl:s,namespace:r,nodeAdmin:o=!1}){lo(t);let a=new Fs("database-standalone"),l=new gn("auth-internal",a);l.setComponent(new Vt("auth-internal",()=>n,"PRIVATE"));let c;return s&&(c=new gn("app-check-internal",a),c.setComponent(new Vt("app-check-internal",()=>s,"PRIVATE"))),{instance:new Ft(Ho(i,l,c,e,o),i),namespace:r}}var qf=Object.freeze({__proto__:null,initStandalone:Yf});var Gf=Ft.ServerValue;function Xf(i){i.INTERNAL.registerComponent(new Vt("database-compat",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new Ft(s,n)},"PUBLIC").setServiceProps({Reference:rt,Query:ys,Database:Ft,DataSnapshot:Lt,enableLogging:Vd,INTERNAL:qf,ServerValue:Gf}).setMultipleInstances(!0)),i.registerVersion(Bf,Hf)}Xf(Yt);function en(i,e,t="on",n=ia){return new Je(s=>{let r=null;return r=i[t](e,(o,a)=>{n.schedule(()=>{s.next({snapshot:o,prevKey:a})}),t==="once"&&n.schedule(()=>s.complete())},o=>{n.schedule(()=>s.error(o))}),t==="on"?{unsubscribe(){r!=null&&i.off(e,r)}}:{unsubscribe(){}}}).pipe(de(s=>{let{snapshot:r,prevKey:o}=s,a=null;return r.exists()&&(a=r.key),{type:e,payload:r,prevKey:o,key:a}}),da())}function Kf(i){return typeof i=="string"}function Qf(i){return typeof i.exportVal=="function"}function eu(i){return i==null}function tu(i){return typeof i.set=="function"}function Kd(i,e){return tu(e)?e:i.ref(e)}function iu(i,e){if(Kf(i))return e.stringCase();if(tu(i))return e.firebaseCase();if(Qf(i))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof i}`)}function nu(i){return(eu(i)||i.length===0)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function su(i,e,t){e=nu(e);let n=e.map(s=>en(i,s,"on",t));return ot(...n)}function Zf(i,e,t){let n=su(i,e).pipe(Ps((s,r)=>[...s,r],[]));return em(i,n,t)}function Jf(i,e){return en(i,"value","on",e).pipe(de(t=>{let n;return t.payload.forEach(s=>(n=s.key,!1)),{data:t,lastKeyToLoad:n}}))}function em(i,e,t){return Jf(i,t).pipe(fa(e),de(([s,r])=>{let o=s.lastKeyToLoad,a=r.map(l=>l.key);return{actions:r,lastKeyToLoad:o,loadedKeys:a}}),ha(s=>s.loadedKeys.indexOf(s.lastKeyToLoad)===-1),de(s=>s.actions))}function Qd(i,e){return function(n,s){return iu(n,{stringCase:()=>i.child(n)[e](s),firebaseCase:()=>n[e](s),snapshotCase:()=>n.ref[e](s)})}}function tm(i){return function(t){return t?iu(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}}function im(i,e,t){return en(i,"value","once",t).pipe(re(n=>{let s=[$e(n)];return e.forEach(r=>s.push(en(i,r,"on",t))),ot(...s).pipe(Ps(sm,[]))}),la())}function ru(i,e){let t=i.length;for(let n=0;n<t;n++)if(i[n].payload.key===e)return n;return-1}function nm(i,e){if(eu(e))return 0;{let t=ru(i,e);return t===-1?i.length:t+1}}function sm(i,e){let{payload:t,prevKey:n,key:s}=e,r=ru(i,s),o=nm(i,n);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,i=[...i,c],!1})}return i;case"child_added":if(r>-1)(i[r-1]?.key||null)!==n&&(i=i.filter(l=>l.payload.key!==t.key),i.splice(o,0,e));else{if(n==null)return[e,...i];i=i.slice(),i.splice(o,0,e)}return i;case"child_removed":return i.filter(a=>a.payload.key!==t.key);case"child_changed":return i.map(a=>a.payload.key===s?e:a);case"child_moved":if(r>-1){let a=i.splice(r,1)[0];return i=i.slice(),i.splice(o,0,a),i}return i;default:return i}}function Zd(i,e,t){return e=nu(e),im(i,e,t)}function rm(i,e){let t=e.schedulers.outsideAngular,n=e.schedulers.ngZone.run(()=>i.ref);return{query:i,update:Qd(n,"update"),set:Qd(n,"set"),push:s=>n.push(s),remove:tm(n),snapshotChanges(s){return Zd(i,s,t).pipe(xt)},stateChanges(s){return su(i,s,t).pipe(xt)},auditTrail(s){return Zf(i,s,t).pipe(xt)},valueChanges(s,r){return Zd(i,s,t).pipe(de(a=>a.map(l=>r&&r.idField?an(fe({},l.payload.val()),{[r.idField]:l.key}):l.payload.val())),xt)}}}function Jd(i,e){return function(){return en(i,"value","on",e)}}function om(i,e){return{query:i,snapshotChanges(){return Jd(i,e.schedulers.outsideAngular)().pipe(xt)},update(t){return i.ref.update(t)},set(t){return i.ref.set(t)},remove(){return i.ref.remove()},valueChanges(){return Jd(i,e.schedulers.outsideAngular)().pipe(xt,de(n=>n.payload.exists()?n.payload.val():null))}}}var am=new at("angularfire2.realtimeDatabaseURL"),lm=new at("angularfire2.database.use-emulator"),cm=(()=>{class i{schedulers;database;constructor(t,n,s,r,o,a,l,c,d,u,h,f,m,g,v){this.schedulers=a;let p=l,_=En(t,o,n);c&&ul(_,o,d,h,f,m,u,g),this.database=Cn(`${_.name}.database.${s}`,"AngularFireDatabase",_.name,()=>{let w=o.runOutsideAngular(()=>_.database(s||void 0));return p&&w.useEmulator(...p),w},[p])}list(t,n){let s=this.schedulers.ngZone.runOutsideAngular(()=>Kd(this.database,t)),r=s;return n&&(r=n(s)),rm(r,this)}object(t){let n=this.schedulers.ngZone.runOutsideAngular(()=>Kd(this.database,t));return om(n,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(n){return new(n||i)(H(yn),H(bn,8),H(am,8),H(it),H(He),H(wn),H(lm,8),H(hl,8),H(rl,8),H(ol,8),H(al,8),H(ll,8),H(cl,8),H(dl,8),H(il,8))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),ou=(()=>{class i{constructor(){Yt.registerVersion("angularfire",_n.full,"rtdb-compat")}static \u0275fac=function(n){return new(n||i)};static \u0275mod=ye({type:i});static \u0275inj=we({providers:[cm]})}return i})();var au=3e4,Vo=new Ca(()=>au),lu=(()=>{let e=class e{constructor(n){this.commonFunction=n,this.options={timeOutVal:3e4,timedOut:!0}}intercept(n,s){let r=n.context;if(!r.has(Vo)){let o=this.options.timedOut;if(o===!1)return s.handle(n);o&&this.options.timeOutVal!==au&&r.set(Vo,this.options.timeOutVal)}return s.handle(n).pipe(sa(r.get(Vo)),Ct(o=>this.handleResponseError(o,n,s)))}handleResponseError(n,s,r){return n.message=="Timeout has occurred"&&this.commonFunction.displaySnackBarMessage("We'll be right back! Looks like something went wrong but we have our best minds working on it.","failure"),Wt(n)}};e.\u0275fac=function(s){return new(s||e)(H(pn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})();var nn="Service workers are disabled or not supported by this browser";function dm(i){return Is(()=>Wt(new Error(i)))}var ui=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=dm(nn);else{let n=vi(e,"controllerchange").pipe(de(()=>e.controller)),s=Is(()=>$e(e.controller)),r=dn(s,n);this.worker=r.pipe(We(d=>!!d)),this.registration=this.worker.pipe(re(()=>e.getRegistration()));let c=vi(e,"message").pipe(de(d=>d.data)).pipe(We(d=>d&&d.type)).pipe(ca());c.connect(),this.events=c}}postMessage(e,t){return this.worker.pipe(St(1),un(n=>{n.postMessage(fe({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,n){let s=this.waitForOperationCompleted(n),r=this.postMessage(e,t);return Promise.all([r,s]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=n=>n.type===e:t=n=>e.includes(n.type),this.events.pipe(We(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(St(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(We(t=>t.nonce===e),St(1),de(t=>{if(t.result!==void 0)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},hu=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.pushManager=null,this.subscriptionChanges=new cn,!n.isEnabled){this.messages=Bt,this.notificationClicks=Bt,this.subscription=Bt;return}this.messages=this.sw.eventsOfType("PUSH").pipe(de(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(de(r=>r.data)),this.pushManager=this.sw.registration.pipe(de(r=>r.pushManager));let s=this.pushManager.pipe(re(r=>r.getSubscription()));this.subscription=ot(s,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(nn));let s={userVisibleOnly:!0},r=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(r.length));for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return s.applicationServerKey=o,this.pushManager.pipe(re(a=>a.subscribe(s)),St(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(nn));let n=s=>{if(s===null)throw new Error("Not subscribed to push notifications.");return s.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(St(1),re(n)).toPromise()}decodeBase64(n){return atob(n)}};e.\u0275fac=function(s){return new(s||e)(H(ui))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})(),pu=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=Bt,this.unrecoverable=Bt;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(nn));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(nn));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}};e.\u0275fac=function(s){return new(s||e)(H(ui))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})();var cu=new at("");function um(i,e,t,n){return()=>{if(!(As(n)&&"serviceWorker"in navigator&&t.enabled!==!1))return;let s=i.get(He),r=i.get(ks);s.runOutsideAngular(()=>{let a=navigator.serviceWorker,l=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",l),r.onDestroy(()=>{a.removeEventListener("controllerchange",l)})});let o;if(typeof t.registrationStrategy=="function")o=t.registrationStrategy();else{let[a,...l]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=$e(null);break;case"registerWithDelay":o=du(+l[0]||0);break;case"registerWhenStable":o=l[0]?ot(uu(i),du(+l[0])):uu(i);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}s.runOutsideAngular(()=>o.pipe(St(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function du(i){return $e(null).pipe(aa(i))}function uu(i){return i.get(ks).isStable.pipe(We(t=>t))}function hm(i,e){return new ui(As(e)&&i.enabled!==!1?navigator.serviceWorker:void 0)}var tn=class{};function pm(i,e={}){return ma([hu,pu,{provide:cu,useValue:i},{provide:tn,useValue:e},{provide:ui,useFactory:hm,deps:[tn,it]},{provide:ya,useFactory:um,deps:[ga,cu,tn,it],multi:!0}])}var fu=(()=>{let e=class e{static register(n,s={}){return{ngModule:e,providers:[pm(n,s)]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({providers:[hu,pu]});let i=e;return i})();var mu=(()=>{let e=class e extends qt{constructor(n,s){super(),this.http=n,this.zone=s,this.pingInterval=10*60,this.onPing=new Be,this.onPingResponse=new Be}request(n){return typeof n=="string"?this.pingRequest=new Rs("GET",n):n instanceof Rs?this.pingRequest=n:n===null&&(this.pingRequest=null),this.pingRequest}interval(n){if(!isNaN(n)&&n>0)this.pingInterval=n;else if(!isNaN(n)&&n<=0)throw new Error("Interval value must be greater than zero.");return this.pingInterval}ping(){this.onPing.emit(null),this.pingRequest&&this.http.request(this.pingRequest).subscribe(n=>{this.onPingResponse.emit(n)},n=>{this.onPingResponse.emit(n)})}start(){this.stop(),this.zone.runOutsideAngular(()=>{this.pingHandle=setInterval(()=>{this.zone.run(()=>{this.ping()})},this.pingInterval*1e3)})}stop(){this.hasPingHandle()&&(clearInterval(this.pingHandle),this.pingHandle=null)}ngOnDestroy(){this.stop()}isRunning(){return this.hasPingHandle()}hasPingHandle(){return this.pingHandle!==null&&typeof this.pingHandle<"u"}};e.\u0275fac=function(s){return new(s||e)(H(Sa),H(He))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let i=e;return i})(),gu=(()=>{let e=class e{static forRoot(){return{ngModule:e,providers:[mu,{provide:qt,useExisting:mu}]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=ye({type:e}),e.\u0275inj=we({imports:[Nl.forRoot()]});let i=e;return i})();var vu=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=ye({type:e,bootstrap:[Ll]}),e.\u0275inj=we({providers:[Pn,In,ba,{provide:Ra,useValue:"en-GB"},{provide:Ns,useClass:Fl,multi:!0},{provide:Ns,useClass:lu,multi:!0},Ta(xa())],imports:[Pa,kl,Aa,vl,Na,La,za,Fa,xl,Cl,Sl,$a,Tl,gu.forRoot(),ou,pl,Ol,sl.initializeApp(Tt.firebase),fu.register("ngsw-worker.js",{enabled:Tt.production,registrationStrategy:"registerWhenStable:30000"})]});let i=e;return i})();function _u(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;t({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let r,o=ce();e.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};let a=o.createElement("div");function l(m,g){let v=e.params.virtual;if(v.cache&&e.virtual.cache[g])return e.virtual.cache[g];let p;return v.renderSlide?(p=v.renderSlide.call(e,m,g),typeof p=="string"&&(a.innerHTML=p,p=a.children[0])):e.isElement?p=ue("swiper-slide"):p=ue("div",e.params.slideClass),p.setAttribute("data-swiper-slide-index",g),v.renderSlide||(p.innerHTML=m),v.cache&&(e.virtual.cache[g]=p),p}function c(m,g){let{slidesPerView:v,slidesPerGroup:p,centeredSlides:_,loop:w,initialSlide:b}=e.params;if(g&&!w&&b>0)return;let{addSlidesBefore:k,addSlidesAfter:O}=e.params.virtual,{from:A,to:I,slides:y,slidesGrid:N,offset:z}=e.virtual;e.params.cssMode||e.updateActiveIndex();let x=e.activeIndex||0,T;e.rtlTranslate?T="right":T=e.isHorizontal()?"left":"top";let S,R;_?(S=Math.floor(v/2)+p+O,R=Math.floor(v/2)+p+k):(S=v+(p-1)+O,R=(w?v:p)+k);let W=x-R,E=x+S;w||(W=Math.max(W,0),E=Math.min(E,y.length-1));let C=(e.slidesGrid[W]||0)-(e.slidesGrid[0]||0);w&&x>=R?(W-=R,_||(C+=e.slidesGrid[0])):w&&x<R&&(W=-R,_&&(C+=e.slidesGrid[0])),Object.assign(e.virtual,{from:W,to:E,offset:C,slidesGrid:e.slidesGrid,slidesBefore:R,slidesAfter:S});function L(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),s("virtualUpdate")}if(A===W&&I===E&&!m){e.slidesGrid!==N&&C!==z&&e.slides.forEach($=>{$.style[T]=`${C-Math.abs(e.cssOverflowAdjustment())}px`}),e.updateProgress(),s("virtualUpdate");return}if(e.params.virtual.renderExternal){e.params.virtual.renderExternal.call(e,{offset:C,from:W,to:E,slides:function(){let Q=[];for(let pe=W;pe<=E;pe+=1)Q.push(y[pe]);return Q}()}),e.params.virtual.renderExternalUpdate?L():s("virtualUpdate");return}let V=[],P=[],D=$=>{let Q=$;return $<0?Q=y.length+$:Q>=y.length&&(Q=Q-y.length),Q};if(m)e.slides.filter($=>$.matches(`.${e.params.slideClass}, swiper-slide`)).forEach($=>{$.remove()});else for(let $=A;$<=I;$+=1)if($<W||$>E){let Q=D($);e.slides.filter(pe=>pe.matches(`.${e.params.slideClass}[data-swiper-slide-index="${Q}"], swiper-slide[data-swiper-slide-index="${Q}"]`)).forEach(pe=>{pe.remove()})}let F=w?-y.length:0,ee=w?y.length*2:y.length;for(let $=F;$<ee;$+=1)if($>=W&&$<=E){let Q=D($);typeof I>"u"||m?P.push(Q):($>I&&P.push(Q),$<A&&V.push(Q))}if(P.forEach($=>{e.slidesEl.append(l(y[$],$))}),w)for(let $=V.length-1;$>=0;$-=1){let Q=V[$];e.slidesEl.prepend(l(y[Q],Q))}else V.sort(($,Q)=>Q-$),V.forEach($=>{e.slidesEl.prepend(l(y[$],$))});Se(e.slidesEl,".swiper-slide, swiper-slide").forEach($=>{$.style[T]=`${C-Math.abs(e.cssOverflowAdjustment())}px`}),L()}function d(m){if(typeof m=="object"&&"length"in m)for(let g=0;g<m.length;g+=1)m[g]&&e.virtual.slides.push(m[g]);else e.virtual.slides.push(m);c(!0)}function u(m){let g=e.activeIndex,v=g+1,p=1;if(Array.isArray(m)){for(let _=0;_<m.length;_+=1)m[_]&&e.virtual.slides.unshift(m[_]);v=g+m.length,p=m.length}else e.virtual.slides.unshift(m);if(e.params.virtual.cache){let _=e.virtual.cache,w={};Object.keys(_).forEach(b=>{let k=_[b],O=k.getAttribute("data-swiper-slide-index");O&&k.setAttribute("data-swiper-slide-index",parseInt(O,10)+p),w[parseInt(b,10)+p]=k}),e.virtual.cache=w}c(!0),e.slideTo(v,0)}function h(m){if(typeof m>"u"||m===null)return;let g=e.activeIndex;if(Array.isArray(m))for(let v=m.length-1;v>=0;v-=1)e.params.virtual.cache&&(delete e.virtual.cache[m[v]],Object.keys(e.virtual.cache).forEach(p=>{p>m&&(e.virtual.cache[p-1]=e.virtual.cache[p],e.virtual.cache[p-1].setAttribute("data-swiper-slide-index",p-1),delete e.virtual.cache[p])})),e.virtual.slides.splice(m[v],1),m[v]<g&&(g-=1),g=Math.max(g,0);else e.params.virtual.cache&&(delete e.virtual.cache[m],Object.keys(e.virtual.cache).forEach(v=>{v>m&&(e.virtual.cache[v-1]=e.virtual.cache[v],e.virtual.cache[v-1].setAttribute("data-swiper-slide-index",v-1),delete e.virtual.cache[v])})),e.virtual.slides.splice(m,1),m<g&&(g-=1),g=Math.max(g,0);c(!0),e.slideTo(g,0)}function f(){e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),c(!0),e.slideTo(0,0)}n("beforeInit",()=>{if(!e.params.virtual.enabled)return;let m;if(typeof e.passedParams.virtual.slides>"u"){let g=[...e.slidesEl.children].filter(v=>v.matches(`.${e.params.slideClass}, swiper-slide`));g&&g.length&&(e.virtual.slides=[...g],m=!0,g.forEach((v,p)=>{v.setAttribute("data-swiper-slide-index",p),e.virtual.cache[p]=v,v.remove()}))}m||(e.virtual.slides=e.params.virtual.slides),e.classNames.push(`${e.params.containerModifierClass}virtual`),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0,c(!1,!0)}),n("setTranslate",()=>{e.params.virtual.enabled&&(e.params.cssMode&&!e._immediateVirtual?(clearTimeout(r),r=setTimeout(()=>{c()},100)):c())}),n("init update resize",()=>{e.params.virtual.enabled&&e.params.cssMode&&yl(e.wrapperEl,"--swiper-virtual-size",`${e.virtualSize}px`)}),Object.assign(e.virtual,{appendSlide:d,prependSlide:u,removeSlide:h,removeAllSlides:f,update:c})}function wu(i){let{swiper:e,extendParams:t,on:n,emit:s}=i,r=ce(),o=Te();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function a(d){if(!e.enabled)return;let{rtlTranslate:u}=e,h=d;h.originalEvent&&(h=h.originalEvent);let f=h.keyCode||h.charCode,m=e.params.keyboard.pageUpDown,g=m&&f===33,v=m&&f===34,p=f===37,_=f===39,w=f===38,b=f===40;if(!e.allowSlideNext&&(e.isHorizontal()&&_||e.isVertical()&&b||v)||!e.allowSlidePrev&&(e.isHorizontal()&&p||e.isVertical()&&w||g))return!1;if(!(h.shiftKey||h.altKey||h.ctrlKey||h.metaKey)&&!(r.activeElement&&r.activeElement.nodeName&&(r.activeElement.nodeName.toLowerCase()==="input"||r.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(g||v||p||_||w||b)){let k=!1;if(nt(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&nt(e.el,`.${e.params.slideActiveClass}`).length===0)return;let O=e.el,A=O.clientWidth,I=O.clientHeight,y=o.innerWidth,N=o.innerHeight,z=Pt(O);u&&(z.left-=O.scrollLeft);let x=[[z.left,z.top],[z.left+A,z.top],[z.left,z.top+I],[z.left+A,z.top+I]];for(let T=0;T<x.length;T+=1){let S=x[T];if(S[0]>=0&&S[0]<=y&&S[1]>=0&&S[1]<=N){if(S[0]===0&&S[1]===0)continue;k=!0}}if(!k)return}e.isHorizontal()?((g||v||p||_)&&(h.preventDefault?h.preventDefault():h.returnValue=!1),((v||_)&&!u||(g||p)&&u)&&e.slideNext(),((g||p)&&!u||(v||_)&&u)&&e.slidePrev()):((g||v||w||b)&&(h.preventDefault?h.preventDefault():h.returnValue=!1),(v||b)&&e.slideNext(),(g||w)&&e.slidePrev()),s("keyPress",f)}}function l(){e.keyboard.enabled||(r.addEventListener("keydown",a),e.keyboard.enabled=!0)}function c(){e.keyboard.enabled&&(r.removeEventListener("keydown",a),e.keyboard.enabled=!1)}n("init",()=>{e.params.keyboard.enabled&&l()}),n("destroy",()=>{e.keyboard.enabled&&c()}),Object.assign(e.keyboard,{enable:l,disable:c})}function yu(i){let{swiper:e,extendParams:t,on:n,emit:s}=i,r=Te();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let o,a=Ue(),l,c=[];function d(w){let A=0,I=0,y=0,N=0;return"detail"in w&&(I=w.detail),"wheelDelta"in w&&(I=-w.wheelDelta/120),"wheelDeltaY"in w&&(I=-w.wheelDeltaY/120),"wheelDeltaX"in w&&(A=-w.wheelDeltaX/120),"axis"in w&&w.axis===w.HORIZONTAL_AXIS&&(A=I,I=0),y=A*10,N=I*10,"deltaY"in w&&(N=w.deltaY),"deltaX"in w&&(y=w.deltaX),w.shiftKey&&!y&&(y=N,N=0),(y||N)&&w.deltaMode&&(w.deltaMode===1?(y*=40,N*=40):(y*=800,N*=800)),y&&!A&&(A=y<1?-1:1),N&&!I&&(I=N<1?-1:1),{spinX:A,spinY:I,pixelX:y,pixelY:N}}function u(){e.enabled&&(e.mouseEntered=!0)}function h(){e.enabled&&(e.mouseEntered=!1)}function f(w){return e.params.mousewheel.thresholdDelta&&w.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&Ue()-a<e.params.mousewheel.thresholdTime?!1:w.delta>=6&&Ue()-a<60?!0:(w.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),s("scroll",w.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),s("scroll",w.raw)),a=new r.Date().getTime(),!1)}function m(w){let b=e.params.mousewheel;if(w.direction<0){if(e.isEnd&&!e.params.loop&&b.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&b.releaseOnEdges)return!0;return!1}function g(w){let b=w,k=!0;if(!e.enabled||w.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;let O=e.params.mousewheel;e.params.cssMode&&b.preventDefault();let A=e.el;e.params.mousewheel.eventsTarget!=="container"&&(A=document.querySelector(e.params.mousewheel.eventsTarget));let I=A&&A.contains(b.target);if(!e.mouseEntered&&!I&&!O.releaseOnEdges)return!0;b.originalEvent&&(b=b.originalEvent);let y=0,N=e.rtlTranslate?-1:1,z=d(b);if(O.forceToAxis)if(e.isHorizontal())if(Math.abs(z.pixelX)>Math.abs(z.pixelY))y=-z.pixelX*N;else return!0;else if(Math.abs(z.pixelY)>Math.abs(z.pixelX))y=-z.pixelY;else return!0;else y=Math.abs(z.pixelX)>Math.abs(z.pixelY)?-z.pixelX*N:-z.pixelY;if(y===0)return!0;O.invert&&(y=-y);let x=e.getTranslate()+y*O.sensitivity;if(x>=e.minTranslate()&&(x=e.minTranslate()),x<=e.maxTranslate()&&(x=e.maxTranslate()),k=e.params.loop?!0:!(x===e.minTranslate()||x===e.maxTranslate()),k&&e.params.nested&&b.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){let T={time:Ue(),delta:Math.abs(y),direction:Math.sign(y),raw:w};c.length>=2&&c.shift();let S=c.length?c[c.length-1]:void 0;if(c.push(T),S?(T.direction!==S.direction||T.delta>S.delta||T.time>S.time+150)&&f(T):f(T),m(T))return!0}else{let T={time:Ue(),delta:Math.abs(y),direction:Math.sign(y)},S=l&&T.time<l.time+500&&T.delta<=l.delta&&T.direction===l.direction;if(!S){l=void 0;let R=e.getTranslate()+y*O.sensitivity,W=e.isBeginning,E=e.isEnd;if(R>=e.minTranslate()&&(R=e.minTranslate()),R<=e.maxTranslate()&&(R=e.maxTranslate()),e.setTransition(0),e.setTranslate(R),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!W&&e.isBeginning||!E&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:T.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(o),o=void 0,c.length>=15&&c.shift();let C=c.length?c[c.length-1]:void 0,L=c[0];if(c.push(T),C&&(T.delta>C.delta||T.direction!==C.direction))c.splice(0);else if(c.length>=15&&T.time-L.time<500&&L.delta-T.delta>=1&&T.delta<=6){let V=y>0?.8:.2;l=T,c.splice(0),o=It(()=>{e.destroyed||!e.params||e.slideToClosest(e.params.speed,!0,void 0,V)},0)}o||(o=It(()=>{if(e.destroyed||!e.params)return;let V=.5;l=T,c.splice(0),e.slideToClosest(e.params.speed,!0,void 0,V)},500))}if(S||s("scroll",b),e.params.autoplay&&e.params.autoplayDisableOnInteraction&&e.autoplay.stop(),O.releaseOnEdges&&(R===e.minTranslate()||R===e.maxTranslate()))return!0}}return b.preventDefault?b.preventDefault():b.returnValue=!1,!1}function v(w){let b=e.el;e.params.mousewheel.eventsTarget!=="container"&&(b=document.querySelector(e.params.mousewheel.eventsTarget)),b[w]("mouseenter",u),b[w]("mouseleave",h),b[w]("wheel",g)}function p(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",g),!0):e.mousewheel.enabled?!1:(v("addEventListener"),e.mousewheel.enabled=!0,!0)}function _(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,g),!0):e.mousewheel.enabled?(v("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}n("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&_(),e.params.mousewheel.enabled&&p()}),n("destroy",()=>{e.params.cssMode&&p(),e.mousewheel.enabled&&_()}),Object.assign(e.mousewheel,{enable:p,disable:_})}function hi(i,e,t,n){return i.params.createElements&&Object.keys(n).forEach(s=>{if(!t[s]&&t.auto===!0){let r=Se(i.el,`.${n[s]}`)[0];r||(r=ue("div",n[s]),r.className=n[s],i.el.append(r)),t[s]=r,e[s]=r}}),t}function bu(i){let{swiper:e,extendParams:t,on:n,emit:s}=i;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function r(m){let g;return m&&typeof m=="string"&&e.isElement&&(g=e.el.querySelector(m),g)?g:(m&&(typeof m=="string"&&(g=[...document.querySelectorAll(m)]),e.params.uniqueNavElements&&typeof m=="string"&&g&&g.length>1&&e.el.querySelectorAll(m).length===1?g=e.el.querySelector(m):g&&g.length===1&&(g=g[0])),m&&!g?m:g)}function o(m,g){let v=e.params.navigation;m=U(m),m.forEach(p=>{p&&(p.classList[g?"add":"remove"](...v.disabledClass.split(" ")),p.tagName==="BUTTON"&&(p.disabled=g),e.params.watchOverflow&&e.enabled&&p.classList[e.isLocked?"add":"remove"](v.lockClass))})}function a(){let{nextEl:m,prevEl:g}=e.navigation;if(e.params.loop){o(g,!1),o(m,!1);return}o(g,e.isBeginning&&!e.params.rewind),o(m,e.isEnd&&!e.params.rewind)}function l(m){m.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function c(m){m.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function d(){let m=e.params.navigation;if(e.params.navigation=hi(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(m.nextEl||m.prevEl))return;let g=r(m.nextEl),v=r(m.prevEl);Object.assign(e.navigation,{nextEl:g,prevEl:v}),g=U(g),v=U(v);let p=(_,w)=>{_&&_.addEventListener("click",w==="next"?c:l),!e.enabled&&_&&_.classList.add(...m.lockClass.split(" "))};g.forEach(_=>p(_,"next")),v.forEach(_=>p(_,"prev"))}function u(){let{nextEl:m,prevEl:g}=e.navigation;m=U(m),g=U(g);let v=(p,_)=>{p.removeEventListener("click",_==="next"?c:l),p.classList.remove(...e.params.navigation.disabledClass.split(" "))};m.forEach(p=>v(p,"next")),g.forEach(p=>v(p,"prev"))}n("init",()=>{e.params.navigation.enabled===!1?f():(d(),a())}),n("toEdge fromEdge lock unlock",()=>{a()}),n("destroy",()=>{u()}),n("enable disable",()=>{let{nextEl:m,prevEl:g}=e.navigation;if(m=U(m),g=U(g),e.enabled){a();return}[...m,...g].filter(v=>!!v).forEach(v=>v.classList.add(e.params.navigation.lockClass))}),n("click",(m,g)=>{let{nextEl:v,prevEl:p}=e.navigation;v=U(v),p=U(p);let _=g.target,w=p.includes(_)||v.includes(_);if(e.isElement&&!w){let b=g.path||g.composedPath&&g.composedPath();b&&(w=b.find(k=>v.includes(k)||p.includes(k)))}if(e.params.navigation.hideOnClick&&!w){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===_||e.pagination.el.contains(_)))return;let b;v.length?b=v[0].classList.contains(e.params.navigation.hiddenClass):p.length&&(b=p[0].classList.contains(e.params.navigation.hiddenClass)),s(b===!0?"navigationShow":"navigationHide"),[...v,...p].filter(k=>!!k).forEach(k=>k.classList.toggle(e.params.navigation.hiddenClass))}});let h=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),a()},f=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(e.navigation,{enable:h,disable:f,update:a,init:d,destroy:u})}function Oe(i){return i===void 0&&(i=""),`.${i.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Eu(i){let{swiper:e,extendParams:t,on:n,emit:s}=i,r="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:p=>p,formatFractionTotal:p=>p,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let o,a=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(p,_){let{bulletActiveClass:w}=e.params.pagination;p&&(p=p[`${_==="prev"?"previous":"next"}ElementSibling`],p&&(p.classList.add(`${w}-${_}`),p=p[`${_==="prev"?"previous":"next"}ElementSibling`],p&&p.classList.add(`${w}-${_}-${_}`)))}function d(p){let _=p.target.closest(Oe(e.params.pagination.bulletClass));if(!_)return;p.preventDefault();let w=yi(_)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===w)return;e.slideToLoop(w)}else e.slideTo(w)}function u(){let p=e.rtl,_=e.params.pagination;if(l())return;let w=e.pagination.el;w=U(w);let b,k,O=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,A=e.params.loop?Math.ceil(O/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(k=e.previousRealIndex||0,b=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(b=e.snapIndex,k=e.previousSnapIndex):(k=e.previousIndex||0,b=e.activeIndex||0),_.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){let I=e.pagination.bullets,y,N,z;if(_.dynamicBullets&&(o=bl(I[0],e.isHorizontal()?"width":"height",!0),w.forEach(x=>{x.style[e.isHorizontal()?"width":"height"]=`${o*(_.dynamicMainBullets+4)}px`}),_.dynamicMainBullets>1&&k!==void 0&&(a+=b-(k||0),a>_.dynamicMainBullets-1?a=_.dynamicMainBullets-1:a<0&&(a=0)),y=Math.max(b-a,0),N=y+(Math.min(I.length,_.dynamicMainBullets)-1),z=(N+y)/2),I.forEach(x=>{let T=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(S=>`${_.bulletActiveClass}${S}`)].map(S=>typeof S=="string"&&S.includes(" ")?S.split(" "):S).flat();x.classList.remove(...T)}),w.length>1)I.forEach(x=>{let T=yi(x);T===b?x.classList.add(..._.bulletActiveClass.split(" ")):e.isElement&&x.setAttribute("part","bullet"),_.dynamicBullets&&(T>=y&&T<=N&&x.classList.add(...`${_.bulletActiveClass}-main`.split(" ")),T===y&&c(x,"prev"),T===N&&c(x,"next"))});else{let x=I[b];if(x&&x.classList.add(..._.bulletActiveClass.split(" ")),e.isElement&&I.forEach((T,S)=>{T.setAttribute("part",S===b?"bullet-active":"bullet")}),_.dynamicBullets){let T=I[y],S=I[N];for(let R=y;R<=N;R+=1)I[R]&&I[R].classList.add(...`${_.bulletActiveClass}-main`.split(" "));c(T,"prev"),c(S,"next")}}if(_.dynamicBullets){let x=Math.min(I.length,_.dynamicMainBullets+4),T=(o*x-o)/2-z*o,S=p?"right":"left";I.forEach(R=>{R.style[e.isHorizontal()?S:"top"]=`${T}px`})}}w.forEach((I,y)=>{if(_.type==="fraction"&&(I.querySelectorAll(Oe(_.currentClass)).forEach(N=>{N.textContent=_.formatFractionCurrent(b+1)}),I.querySelectorAll(Oe(_.totalClass)).forEach(N=>{N.textContent=_.formatFractionTotal(A)})),_.type==="progressbar"){let N;_.progressbarOpposite?N=e.isHorizontal()?"vertical":"horizontal":N=e.isHorizontal()?"horizontal":"vertical";let z=(b+1)/A,x=1,T=1;N==="horizontal"?x=z:T=z,I.querySelectorAll(Oe(_.progressbarFillClass)).forEach(S=>{S.style.transform=`translate3d(0,0,0) scaleX(${x}) scaleY(${T})`,S.style.transitionDuration=`${e.params.speed}ms`})}_.type==="custom"&&_.renderCustom?(I.innerHTML=_.renderCustom(e,b+1,A),y===0&&s("paginationRender",I)):(y===0&&s("paginationRender",I),s("paginationUpdate",I)),e.params.watchOverflow&&e.enabled&&I.classList[e.isLocked?"add":"remove"](_.lockClass)})}function h(){let p=e.params.pagination;if(l())return;let _=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length,w=e.pagination.el;w=U(w);let b="";if(p.type==="bullets"){let k=e.params.loop?Math.ceil(_/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&k>_&&(k=_);for(let O=0;O<k;O+=1)p.renderBullet?b+=p.renderBullet.call(e,O,p.bulletClass):b+=`<${p.bulletElement} ${e.isElement?'part="bullet"':""} class="${p.bulletClass}"></${p.bulletElement}>`}p.type==="fraction"&&(p.renderFraction?b=p.renderFraction.call(e,p.currentClass,p.totalClass):b=`<span class="${p.currentClass}"></span> / <span class="${p.totalClass}"></span>`),p.type==="progressbar"&&(p.renderProgressbar?b=p.renderProgressbar.call(e,p.progressbarFillClass):b=`<span class="${p.progressbarFillClass}"></span>`),e.pagination.bullets=[],w.forEach(k=>{p.type!=="custom"&&(k.innerHTML=b||""),p.type==="bullets"&&e.pagination.bullets.push(...k.querySelectorAll(Oe(p.bulletClass)))}),p.type!=="custom"&&s("paginationRender",w[0])}function f(){e.params.pagination=hi(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});let p=e.params.pagination;if(!p.el)return;let _;typeof p.el=="string"&&e.isElement&&(_=e.el.querySelector(p.el)),!_&&typeof p.el=="string"&&(_=[...document.querySelectorAll(p.el)]),_||(_=p.el),!(!_||_.length===0)&&(e.params.uniqueNavElements&&typeof p.el=="string"&&Array.isArray(_)&&_.length>1&&(_=[...e.el.querySelectorAll(p.el)],_.length>1&&(_=_.filter(w=>nt(w,".swiper")[0]===e.el)[0])),Array.isArray(_)&&_.length===1&&(_=_[0]),Object.assign(e.pagination,{el:_}),_=U(_),_.forEach(w=>{p.type==="bullets"&&p.clickable&&w.classList.add(...(p.clickableClass||"").split(" ")),w.classList.add(p.modifierClass+p.type),w.classList.add(e.isHorizontal()?p.horizontalClass:p.verticalClass),p.type==="bullets"&&p.dynamicBullets&&(w.classList.add(`${p.modifierClass}${p.type}-dynamic`),a=0,p.dynamicMainBullets<1&&(p.dynamicMainBullets=1)),p.type==="progressbar"&&p.progressbarOpposite&&w.classList.add(p.progressbarOppositeClass),p.clickable&&w.addEventListener("click",d),e.enabled||w.classList.add(p.lockClass)}))}function m(){let p=e.params.pagination;if(l())return;let _=e.pagination.el;_&&(_=U(_),_.forEach(w=>{w.classList.remove(p.hiddenClass),w.classList.remove(p.modifierClass+p.type),w.classList.remove(e.isHorizontal()?p.horizontalClass:p.verticalClass),p.clickable&&(w.classList.remove(...(p.clickableClass||"").split(" ")),w.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(w=>w.classList.remove(...p.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;let p=e.params.pagination,{el:_}=e.pagination;_=U(_),_.forEach(w=>{w.classList.remove(p.horizontalClass,p.verticalClass),w.classList.add(e.isHorizontal()?p.horizontalClass:p.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?v():(f(),h(),u())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&u()}),n("snapIndexChange",()=>{u()}),n("snapGridLengthChange",()=>{h(),u()}),n("destroy",()=>{m()}),n("enable disable",()=>{let{el:p}=e.pagination;p&&(p=U(p),p.forEach(_=>_.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{u()}),n("click",(p,_)=>{let w=_.target,b=U(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&b&&b.length>0&&!w.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&w===e.navigation.nextEl||e.navigation.prevEl&&w===e.navigation.prevEl))return;let k=b[0].classList.contains(e.params.pagination.hiddenClass);s(k===!0?"paginationShow":"paginationHide"),b.forEach(O=>O.classList.toggle(e.params.pagination.hiddenClass))}});let g=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:p}=e.pagination;p&&(p=U(p),p.forEach(_=>_.classList.remove(e.params.pagination.paginationDisabledClass))),f(),h(),u()},v=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:p}=e.pagination;p&&(p=U(p),p.forEach(_=>_.classList.add(e.params.pagination.paginationDisabledClass))),m()};Object.assign(e.pagination,{enable:g,disable:v,render:h,update:u,init:f,destroy:m})}function Cu(i){let{swiper:e,extendParams:t,on:n,emit:s}=i,r=ce(),o=!1,a=null,l=null,c,d,u,h;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function f(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;let{scrollbar:x,rtlTranslate:T}=e,{dragEl:S,el:R}=x,W=e.params.scrollbar,E=e.params.loop?e.progressLoop:e.progress,C=d,L=(u-d)*E;T?(L=-L,L>0?(C=d-L,L=0):-L+d>u&&(C=u+L)):L<0?(C=d+L,L=0):L+d>u&&(C=u-L),e.isHorizontal()?(S.style.transform=`translate3d(${L}px, 0, 0)`,S.style.width=`${C}px`):(S.style.transform=`translate3d(0px, ${L}px, 0)`,S.style.height=`${C}px`),W.hide&&(clearTimeout(a),R.style.opacity=1,a=setTimeout(()=>{R.style.opacity=0,R.style.transitionDuration="400ms"},1e3))}function m(x){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${x}ms`)}function g(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;let{scrollbar:x}=e,{dragEl:T,el:S}=x;T.style.width="",T.style.height="",u=e.isHorizontal()?S.offsetWidth:S.offsetHeight,h=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?d=u*h:d=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?T.style.width=`${d}px`:T.style.height=`${d}px`,h>=1?S.style.display="none":S.style.display="",e.params.scrollbar.hide&&(S.style.opacity=0),e.params.watchOverflow&&e.enabled&&x.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function v(x){return e.isHorizontal()?x.clientX:x.clientY}function p(x){let{scrollbar:T,rtlTranslate:S}=e,{el:R}=T,W;W=(v(x)-Pt(R)[e.isHorizontal()?"left":"top"]-(c!==null?c:d/2))/(u-d),W=Math.max(Math.min(W,1),0),S&&(W=1-W);let E=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*W;e.updateProgress(E),e.setTranslate(E),e.updateActiveIndex(),e.updateSlidesClasses()}function _(x){let T=e.params.scrollbar,{scrollbar:S,wrapperEl:R}=e,{el:W,dragEl:E}=S;o=!0,c=x.target===E?v(x)-x.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,x.preventDefault(),x.stopPropagation(),R.style.transitionDuration="100ms",E.style.transitionDuration="100ms",p(x),clearTimeout(l),W.style.transitionDuration="0ms",T.hide&&(W.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),s("scrollbarDragStart",x)}function w(x){let{scrollbar:T,wrapperEl:S}=e,{el:R,dragEl:W}=T;o&&(x.preventDefault&&x.cancelable?x.preventDefault():x.returnValue=!1,p(x),S.style.transitionDuration="0ms",R.style.transitionDuration="0ms",W.style.transitionDuration="0ms",s("scrollbarDragMove",x))}function b(x){let T=e.params.scrollbar,{scrollbar:S,wrapperEl:R}=e,{el:W}=S;o&&(o=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",R.style.transitionDuration=""),T.hide&&(clearTimeout(l),l=It(()=>{W.style.opacity=0,W.style.transitionDuration="400ms"},1e3)),s("scrollbarDragEnd",x),T.snapOnRelease&&e.slideToClosest())}function k(x){let{scrollbar:T,params:S}=e,R=T.el;if(!R)return;let W=R,E=S.passiveListeners?{passive:!1,capture:!1}:!1,C=S.passiveListeners?{passive:!0,capture:!1}:!1;if(!W)return;let L=x==="on"?"addEventListener":"removeEventListener";W[L]("pointerdown",_,E),r[L]("pointermove",w,E),r[L]("pointerup",b,C)}function O(){!e.params.scrollbar.el||!e.scrollbar.el||k("on")}function A(){!e.params.scrollbar.el||!e.scrollbar.el||k("off")}function I(){let{scrollbar:x,el:T}=e;e.params.scrollbar=hi(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});let S=e.params.scrollbar;if(!S.el)return;let R;if(typeof S.el=="string"&&e.isElement&&(R=e.el.querySelector(S.el)),!R&&typeof S.el=="string"){if(R=r.querySelectorAll(S.el),!R.length)return}else R||(R=S.el);e.params.uniqueNavElements&&typeof S.el=="string"&&R.length>1&&T.querySelectorAll(S.el).length===1&&(R=T.querySelector(S.el)),R.length>0&&(R=R[0]),R.classList.add(e.isHorizontal()?S.horizontalClass:S.verticalClass);let W;R&&(W=R.querySelector(Oe(e.params.scrollbar.dragClass)),W||(W=ue("div",e.params.scrollbar.dragClass),R.append(W))),Object.assign(x,{el:R,dragEl:W}),S.draggable&&O(),R&&R.classList[e.enabled?"remove":"add"](...ct(e.params.scrollbar.lockClass))}function y(){let x=e.params.scrollbar,T=e.scrollbar.el;T&&T.classList.remove(...ct(e.isHorizontal()?x.horizontalClass:x.verticalClass)),A()}n("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;let x=e.params.scrollbar,{el:T}=e.scrollbar;T=U(T),T.forEach(S=>{S.classList.remove(x.horizontalClass,x.verticalClass),S.classList.add(e.isHorizontal()?x.horizontalClass:x.verticalClass)})}),n("init",()=>{e.params.scrollbar.enabled===!1?z():(I(),g(),f())}),n("update resize observerUpdate lock unlock changeDirection",()=>{g()}),n("setTranslate",()=>{f()}),n("setTransition",(x,T)=>{m(T)}),n("enable disable",()=>{let{el:x}=e.scrollbar;x&&x.classList[e.enabled?"remove":"add"](...ct(e.params.scrollbar.lockClass))}),n("destroy",()=>{y()});let N=()=>{e.el.classList.remove(...ct(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...ct(e.params.scrollbar.scrollbarDisabledClass)),I(),g(),f()},z=()=>{e.el.classList.add(...ct(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...ct(e.params.scrollbar.scrollbarDisabledClass)),y()};Object.assign(e.scrollbar,{enable:N,disable:z,updateSize:g,setTranslate:f,init:I,destroy:y})}function Su(i){let{swiper:e,extendParams:t,on:n}=i;t({parallax:{enabled:!1}});let s="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",r=(l,c)=>{let{rtl:d}=e,u=d?-1:1,h=l.getAttribute("data-swiper-parallax")||"0",f=l.getAttribute("data-swiper-parallax-x"),m=l.getAttribute("data-swiper-parallax-y"),g=l.getAttribute("data-swiper-parallax-scale"),v=l.getAttribute("data-swiper-parallax-opacity"),p=l.getAttribute("data-swiper-parallax-rotate");if(f||m?(f=f||"0",m=m||"0"):e.isHorizontal()?(f=h,m="0"):(m=h,f="0"),f.indexOf("%")>=0?f=`${parseInt(f,10)*c*u}%`:f=`${f*c*u}px`,m.indexOf("%")>=0?m=`${parseInt(m,10)*c}%`:m=`${m*c}px`,typeof v<"u"&&v!==null){let w=v-(v-1)*(1-Math.abs(c));l.style.opacity=w}let _=`translate3d(${f}, ${m}, 0px)`;if(typeof g<"u"&&g!==null){let w=g-(g-1)*(1-Math.abs(c));_+=` scale(${w})`}if(p&&typeof p<"u"&&p!==null){let w=p*c*-1;_+=` rotate(${w}deg)`}l.style.transform=_},o=()=>{let{el:l,slides:c,progress:d,snapGrid:u,isElement:h}=e,f=Se(l,s);e.isElement&&f.push(...Se(e.hostEl,s)),f.forEach(m=>{r(m,d)}),c.forEach((m,g)=>{let v=m.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(v+=Math.ceil(g/2)-d*(u.length-1)),v=Math.min(Math.max(v,-1),1),m.querySelectorAll(`${s}, [data-swiper-parallax-rotate]`).forEach(p=>{r(p,v)})})},a=function(l){l===void 0&&(l=e.params.speed);let{el:c,hostEl:d}=e,u=[...c.querySelectorAll(s)];e.isElement&&u.push(...d.querySelectorAll(s)),u.forEach(h=>{let f=parseInt(h.getAttribute("data-swiper-parallax-duration"),10)||l;l===0&&(f=0),h.style.transitionDuration=`${f}ms`})};n("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),n("init",()=>{e.params.parallax.enabled&&o()}),n("setTranslate",()=>{e.params.parallax.enabled&&o()}),n("setTransition",(l,c)=>{e.params.parallax.enabled&&a(c)})}function Tu(i){let{swiper:e,extendParams:t,on:n,emit:s}=i,r=Te();t({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),e.zoom={enabled:!1};let o=1,a=!1,l,c,d=[],u={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},h={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},f={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0},m=1;Object.defineProperty(e.zoom,"scale",{get(){return m},set(P){if(m!==P){let D=u.imageEl,F=u.slideEl;s("zoomChange",P,D,F)}m=P}});function g(){if(d.length<2)return 1;let P=d[0].pageX,D=d[0].pageY,F=d[1].pageX,ee=d[1].pageY;return Math.sqrt((F-P)**2+(ee-D)**2)}function v(){let P=e.params.zoom,D=u.imageWrapEl.getAttribute("data-swiper-zoom")||P.maxRatio;if(P.limitToOriginalSize&&u.imageEl&&u.imageEl.naturalWidth){let F=u.imageEl.naturalWidth/u.imageEl.offsetWidth;return Math.min(F,D)}return D}function p(){if(d.length<2)return{x:null,y:null};let P=u.imageEl.getBoundingClientRect();return[(d[0].pageX+(d[1].pageX-d[0].pageX)/2-P.x-r.scrollX)/o,(d[0].pageY+(d[1].pageY-d[0].pageY)/2-P.y-r.scrollY)/o]}function _(){return e.isElement?"swiper-slide":`.${e.params.slideClass}`}function w(P){let D=_();return!!(P.target.matches(D)||e.slides.filter(F=>F.contains(P.target)).length>0)}function b(P){let D=`.${e.params.zoom.containerClass}`;return!!(P.target.matches(D)||[...e.hostEl.querySelectorAll(D)].filter(F=>F.contains(P.target)).length>0)}function k(P){if(P.pointerType==="mouse"&&d.splice(0,d.length),!w(P))return;let D=e.params.zoom;if(l=!1,c=!1,d.push(P),!(d.length<2)){if(l=!0,u.scaleStart=g(),!u.slideEl){u.slideEl=P.target.closest(`.${e.params.slideClass}, swiper-slide`),u.slideEl||(u.slideEl=e.slides[e.activeIndex]);let F=u.slideEl.querySelector(`.${D.containerClass}`);if(F&&(F=F.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),u.imageEl=F,F?u.imageWrapEl=nt(u.imageEl,`.${D.containerClass}`)[0]:u.imageWrapEl=void 0,!u.imageWrapEl){u.imageEl=void 0;return}u.maxRatio=v()}if(u.imageEl){let[F,ee]=p();u.originX=F,u.originY=ee,u.imageEl.style.transitionDuration="0ms"}a=!0}}function O(P){if(!w(P))return;let D=e.params.zoom,F=e.zoom,ee=d.findIndex($=>$.pointerId===P.pointerId);ee>=0&&(d[ee]=P),!(d.length<2)&&(c=!0,u.scaleMove=g(),u.imageEl&&(F.scale=u.scaleMove/u.scaleStart*o,F.scale>u.maxRatio&&(F.scale=u.maxRatio-1+(F.scale-u.maxRatio+1)**.5),F.scale<D.minRatio&&(F.scale=D.minRatio+1-(D.minRatio-F.scale+1)**.5),u.imageEl.style.transform=`translate3d(0,0,0) scale(${F.scale})`))}function A(P){if(!w(P)||P.pointerType==="mouse"&&P.type==="pointerout")return;let D=e.params.zoom,F=e.zoom,ee=d.findIndex($=>$.pointerId===P.pointerId);ee>=0&&d.splice(ee,1),!(!l||!c)&&(l=!1,c=!1,u.imageEl&&(F.scale=Math.max(Math.min(F.scale,u.maxRatio),D.minRatio),u.imageEl.style.transitionDuration=`${e.params.speed}ms`,u.imageEl.style.transform=`translate3d(0,0,0) scale(${F.scale})`,o=F.scale,a=!1,F.scale>1&&u.slideEl?u.slideEl.classList.add(`${D.zoomedSlideClass}`):F.scale<=1&&u.slideEl&&u.slideEl.classList.remove(`${D.zoomedSlideClass}`),F.scale===1&&(u.originX=0,u.originY=0,u.slideEl=void 0)))}let I;function y(){e.touchEventsData.preventTouchMoveFromPointerMove=!1}function N(){clearTimeout(I),e.touchEventsData.preventTouchMoveFromPointerMove=!0,I=setTimeout(()=>{y()})}function z(P){let D=e.device;if(!u.imageEl||h.isTouched)return;D.android&&P.cancelable&&P.preventDefault(),h.isTouched=!0;let F=d.length>0?d[0]:P;h.touchesStart.x=F.pageX,h.touchesStart.y=F.pageY}function x(P){if(!w(P)||!b(P))return;let D=e.zoom;if(!u.imageEl||!h.isTouched||!u.slideEl)return;h.isMoved||(h.width=u.imageEl.offsetWidth||u.imageEl.clientWidth,h.height=u.imageEl.offsetHeight||u.imageEl.clientHeight,h.startX=$s(u.imageWrapEl,"x")||0,h.startY=$s(u.imageWrapEl,"y")||0,u.slideWidth=u.slideEl.offsetWidth,u.slideHeight=u.slideEl.offsetHeight,u.imageWrapEl.style.transitionDuration="0ms");let F=h.width*D.scale,ee=h.height*D.scale;if(h.minX=Math.min(u.slideWidth/2-F/2,0),h.maxX=-h.minX,h.minY=Math.min(u.slideHeight/2-ee/2,0),h.maxY=-h.minY,h.touchesCurrent.x=d.length>0?d[0].pageX:P.pageX,h.touchesCurrent.y=d.length>0?d[0].pageY:P.pageY,Math.max(Math.abs(h.touchesCurrent.x-h.touchesStart.x),Math.abs(h.touchesCurrent.y-h.touchesStart.y))>5&&(e.allowClick=!1),!h.isMoved&&!a){if(e.isHorizontal()&&(Math.floor(h.minX)===Math.floor(h.startX)&&h.touchesCurrent.x<h.touchesStart.x||Math.floor(h.maxX)===Math.floor(h.startX)&&h.touchesCurrent.x>h.touchesStart.x)){h.isTouched=!1,y();return}if(!e.isHorizontal()&&(Math.floor(h.minY)===Math.floor(h.startY)&&h.touchesCurrent.y<h.touchesStart.y||Math.floor(h.maxY)===Math.floor(h.startY)&&h.touchesCurrent.y>h.touchesStart.y)){h.isTouched=!1,y();return}}P.cancelable&&P.preventDefault(),P.stopPropagation(),N(),h.isMoved=!0;let Q=(D.scale-o)/(u.maxRatio-e.params.zoom.minRatio),{originX:pe,originY:$t}=u;h.currentX=h.touchesCurrent.x-h.touchesStart.x+h.startX+Q*(h.width-pe*2),h.currentY=h.touchesCurrent.y-h.touchesStart.y+h.startY+Q*(h.height-$t*2),h.currentX<h.minX&&(h.currentX=h.minX+1-(h.minX-h.currentX+1)**.8),h.currentX>h.maxX&&(h.currentX=h.maxX-1+(h.currentX-h.maxX+1)**.8),h.currentY<h.minY&&(h.currentY=h.minY+1-(h.minY-h.currentY+1)**.8),h.currentY>h.maxY&&(h.currentY=h.maxY-1+(h.currentY-h.maxY+1)**.8),f.prevPositionX||(f.prevPositionX=h.touchesCurrent.x),f.prevPositionY||(f.prevPositionY=h.touchesCurrent.y),f.prevTime||(f.prevTime=Date.now()),f.x=(h.touchesCurrent.x-f.prevPositionX)/(Date.now()-f.prevTime)/2,f.y=(h.touchesCurrent.y-f.prevPositionY)/(Date.now()-f.prevTime)/2,Math.abs(h.touchesCurrent.x-f.prevPositionX)<2&&(f.x=0),Math.abs(h.touchesCurrent.y-f.prevPositionY)<2&&(f.y=0),f.prevPositionX=h.touchesCurrent.x,f.prevPositionY=h.touchesCurrent.y,f.prevTime=Date.now(),u.imageWrapEl.style.transform=`translate3d(${h.currentX}px, ${h.currentY}px,0)`}function T(){let P=e.zoom;if(!u.imageEl)return;if(!h.isTouched||!h.isMoved){h.isTouched=!1,h.isMoved=!1;return}h.isTouched=!1,h.isMoved=!1;let D=300,F=300,ee=f.x*D,$=h.currentX+ee,Q=f.y*F,pe=h.currentY+Q;f.x!==0&&(D=Math.abs(($-h.currentX)/f.x)),f.y!==0&&(F=Math.abs((pe-h.currentY)/f.y));let $t=Math.max(D,F);h.currentX=$,h.currentY=pe;let sn=h.width*P.scale,Ze=h.height*P.scale;h.minX=Math.min(u.slideWidth/2-sn/2,0),h.maxX=-h.minX,h.minY=Math.min(u.slideHeight/2-Ze/2,0),h.maxY=-h.minY,h.currentX=Math.max(Math.min(h.currentX,h.maxX),h.minX),h.currentY=Math.max(Math.min(h.currentY,h.maxY),h.minY),u.imageWrapEl.style.transitionDuration=`${$t}ms`,u.imageWrapEl.style.transform=`translate3d(${h.currentX}px, ${h.currentY}px,0)`}function S(){let P=e.zoom;u.slideEl&&e.activeIndex!==e.slides.indexOf(u.slideEl)&&(u.imageEl&&(u.imageEl.style.transform="translate3d(0,0,0) scale(1)"),u.imageWrapEl&&(u.imageWrapEl.style.transform="translate3d(0,0,0)"),u.slideEl.classList.remove(`${e.params.zoom.zoomedSlideClass}`),P.scale=1,o=1,u.slideEl=void 0,u.imageEl=void 0,u.imageWrapEl=void 0,u.originX=0,u.originY=0)}function R(P){let D=e.zoom,F=e.params.zoom;if(!u.slideEl){P&&P.target&&(u.slideEl=P.target.closest(`.${e.params.slideClass}, swiper-slide`)),u.slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?u.slideEl=Se(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:u.slideEl=e.slides[e.activeIndex]);let gi=u.slideEl.querySelector(`.${F.containerClass}`);gi&&(gi=gi.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),u.imageEl=gi,gi?u.imageWrapEl=nt(u.imageEl,`.${F.containerClass}`)[0]:u.imageWrapEl=void 0}if(!u.imageEl||!u.imageWrapEl)return;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),u.slideEl.classList.add(`${F.zoomedSlideClass}`);let ee,$,Q,pe,$t,sn,Ze,Et,Xo,Ko,Qo,Zo,rn,on,Cs,Ss,Ts,xs;typeof h.touchesStart.x>"u"&&P?(ee=P.pageX,$=P.pageY):(ee=h.touchesStart.x,$=h.touchesStart.y);let mi=typeof P=="number"?P:null;o===1&&mi&&(ee=void 0,$=void 0);let Jo=v();D.scale=mi||Jo,o=mi||Jo,P&&!(o===1&&mi)?(Ts=u.slideEl.offsetWidth,xs=u.slideEl.offsetHeight,Q=Pt(u.slideEl).left+r.scrollX,pe=Pt(u.slideEl).top+r.scrollY,$t=Q+Ts/2-ee,sn=pe+xs/2-$,Xo=u.imageEl.offsetWidth||u.imageEl.clientWidth,Ko=u.imageEl.offsetHeight||u.imageEl.clientHeight,Qo=Xo*D.scale,Zo=Ko*D.scale,rn=Math.min(Ts/2-Qo/2,0),on=Math.min(xs/2-Zo/2,0),Cs=-rn,Ss=-on,Ze=$t*D.scale,Et=sn*D.scale,Ze<rn&&(Ze=rn),Ze>Cs&&(Ze=Cs),Et<on&&(Et=on),Et>Ss&&(Et=Ss)):(Ze=0,Et=0),mi&&D.scale===1&&(u.originX=0,u.originY=0),u.imageWrapEl.style.transitionDuration="300ms",u.imageWrapEl.style.transform=`translate3d(${Ze}px, ${Et}px,0)`,u.imageEl.style.transitionDuration="300ms",u.imageEl.style.transform=`translate3d(0,0,0) scale(${D.scale})`}function W(){let P=e.zoom,D=e.params.zoom;if(!u.slideEl){e.params.virtual&&e.params.virtual.enabled&&e.virtual?u.slideEl=Se(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:u.slideEl=e.slides[e.activeIndex];let F=u.slideEl.querySelector(`.${D.containerClass}`);F&&(F=F.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),u.imageEl=F,F?u.imageWrapEl=nt(u.imageEl,`.${D.containerClass}`)[0]:u.imageWrapEl=void 0}!u.imageEl||!u.imageWrapEl||(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),P.scale=1,o=1,u.imageWrapEl.style.transitionDuration="300ms",u.imageWrapEl.style.transform="translate3d(0,0,0)",u.imageEl.style.transitionDuration="300ms",u.imageEl.style.transform="translate3d(0,0,0) scale(1)",u.slideEl.classList.remove(`${D.zoomedSlideClass}`),u.slideEl=void 0,u.originX=0,u.originY=0)}function E(P){let D=e.zoom;D.scale&&D.scale!==1?W():R(P)}function C(){let P=e.params.passiveListeners?{passive:!0,capture:!1}:!1,D=e.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:P,activeListenerWithCapture:D}}function L(){let P=e.zoom;if(P.enabled)return;P.enabled=!0;let{passiveListener:D,activeListenerWithCapture:F}=C();e.wrapperEl.addEventListener("pointerdown",k,D),e.wrapperEl.addEventListener("pointermove",O,F),["pointerup","pointercancel","pointerout"].forEach(ee=>{e.wrapperEl.addEventListener(ee,A,D)}),e.wrapperEl.addEventListener("pointermove",x,F)}function V(){let P=e.zoom;if(!P.enabled)return;P.enabled=!1;let{passiveListener:D,activeListenerWithCapture:F}=C();e.wrapperEl.removeEventListener("pointerdown",k,D),e.wrapperEl.removeEventListener("pointermove",O,F),["pointerup","pointercancel","pointerout"].forEach(ee=>{e.wrapperEl.removeEventListener(ee,A,D)}),e.wrapperEl.removeEventListener("pointermove",x,F)}n("init",()=>{e.params.zoom.enabled&&L()}),n("destroy",()=>{V()}),n("touchStart",(P,D)=>{e.zoom.enabled&&z(D)}),n("touchEnd",(P,D)=>{e.zoom.enabled&&T()}),n("doubleTap",(P,D)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&E(D)}),n("transitionEnd",()=>{e.zoom.enabled&&e.params.zoom.enabled&&S()}),n("slideChange",()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&S()}),Object.assign(e.zoom,{enable:L,disable:V,in:R,out:W,toggle:E})}function xu(i){let{swiper:e,extendParams:t,on:n}=i;t({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function s(c,d){let u=function(){let g,v,p;return(_,w)=>{for(v=-1,g=_.length;g-v>1;)p=g+v>>1,_[p]<=w?v=p:g=p;return g}}();this.x=c,this.y=d,this.lastIndex=c.length-1;let h,f;return this.interpolate=function(g){return g?(f=u(this.x,g),h=f-1,(g-this.x[h])*(this.y[f]-this.y[h])/(this.x[f]-this.x[h])+this.y[h]):0},this}function r(c){e.controller.spline=e.params.loop?new s(e.slidesGrid,c.slidesGrid):new s(e.snapGrid,c.snapGrid)}function o(c,d){let u=e.controller.control,h,f,m=e.constructor;function g(v){if(v.destroyed)return;let p=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(r(v),f=-e.controller.spline.interpolate(-p)),(!f||e.params.controller.by==="container")&&(h=(v.maxTranslate()-v.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(h)||!Number.isFinite(h))&&(h=1),f=(p-e.minTranslate())*h+v.minTranslate()),e.params.controller.inverse&&(f=v.maxTranslate()-f),v.updateProgress(f),v.setTranslate(f,e),v.updateActiveIndex(),v.updateSlidesClasses()}if(Array.isArray(u))for(let v=0;v<u.length;v+=1)u[v]!==d&&u[v]instanceof m&&g(u[v]);else u instanceof m&&d!==u&&g(u)}function a(c,d){let u=e.constructor,h=e.controller.control,f;function m(g){g.destroyed||(g.setTransition(c,e),c!==0&&(g.transitionStart(),g.params.autoHeight&&It(()=>{g.updateAutoHeight()}),dt(g.wrapperEl,()=>{h&&g.transitionEnd()})))}if(Array.isArray(h))for(f=0;f<h.length;f+=1)h[f]!==d&&h[f]instanceof u&&m(h[f]);else h instanceof u&&d!==h&&m(h)}function l(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}n("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){(typeof e.params.controller.control=="string"?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(d=>{if(e.controller.control||(e.controller.control=[]),d&&d.swiper)e.controller.control.push(d.swiper);else if(d){let u=`${e.params.eventsPrefix}init`,h=f=>{e.controller.control.push(f.detail[0]),e.update(),d.removeEventListener(u,h)};d.addEventListener(u,h)}});return}e.controller.control=e.params.controller.control}),n("update",()=>{l()}),n("resize",()=>{l()}),n("observerUpdate",()=>{l()}),n("setTranslate",(c,d,u)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(d,u)}),n("setTransition",(c,d,u)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(d,u)}),Object.assign(e.controller,{setTranslate:o,setTransition:a})}function Iu(i){let{swiper:e,extendParams:t,on:n}=i;t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0}}),e.a11y={clicked:!1};let s=null,r,o,a=new Date().getTime();function l(E){let C=s;C.length!==0&&(C.innerHTML="",C.innerHTML=E)}function c(E){E===void 0&&(E=16);let C=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(E).replace(/x/g,C)}function d(E){E=U(E),E.forEach(C=>{C.setAttribute("tabIndex","0")})}function u(E){E=U(E),E.forEach(C=>{C.setAttribute("tabIndex","-1")})}function h(E,C){E=U(E),E.forEach(L=>{L.setAttribute("role",C)})}function f(E,C){E=U(E),E.forEach(L=>{L.setAttribute("aria-roledescription",C)})}function m(E,C){E=U(E),E.forEach(L=>{L.setAttribute("aria-controls",C)})}function g(E,C){E=U(E),E.forEach(L=>{L.setAttribute("aria-label",C)})}function v(E,C){E=U(E),E.forEach(L=>{L.setAttribute("id",C)})}function p(E,C){E=U(E),E.forEach(L=>{L.setAttribute("aria-live",C)})}function _(E){E=U(E),E.forEach(C=>{C.setAttribute("aria-disabled",!0)})}function w(E){E=U(E),E.forEach(C=>{C.setAttribute("aria-disabled",!1)})}function b(E){if(E.keyCode!==13&&E.keyCode!==32)return;let C=e.params.a11y,L=E.target;if(!(e.pagination&&e.pagination.el&&(L===e.pagination.el||e.pagination.el.contains(E.target))&&!E.target.matches(Oe(e.params.pagination.bulletClass)))){if(e.navigation&&e.navigation.prevEl&&e.navigation.nextEl){let V=U(e.navigation.prevEl);U(e.navigation.nextEl).includes(L)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?l(C.lastSlideMessage):l(C.nextSlideMessage)),V.includes(L)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?l(C.firstSlideMessage):l(C.prevSlideMessage))}e.pagination&&L.matches(Oe(e.params.pagination.bulletClass))&&L.click()}}function k(){if(e.params.loop||e.params.rewind||!e.navigation)return;let{nextEl:E,prevEl:C}=e.navigation;C&&(e.isBeginning?(_(C),u(C)):(w(C),d(C))),E&&(e.isEnd?(_(E),u(E)):(w(E),d(E)))}function O(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function A(){return O()&&e.params.pagination.clickable}function I(){let E=e.params.a11y;O()&&e.pagination.bullets.forEach(C=>{e.params.pagination.clickable&&(d(C),e.params.pagination.renderBullet||(h(C,"button"),g(C,E.paginationBulletMessage.replace(/\{\{index\}\}/,yi(C)+1)))),C.matches(Oe(e.params.pagination.bulletActiveClass))?C.setAttribute("aria-current","true"):C.removeAttribute("aria-current")})}let y=(E,C,L)=>{d(E),E.tagName!=="BUTTON"&&(h(E,"button"),E.addEventListener("keydown",b)),g(E,L),m(E,C)},N=E=>{o&&o!==E.target&&!o.contains(E.target)&&(r=!0),e.a11y.clicked=!0},z=()=>{r=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},x=E=>{a=new Date().getTime()},T=E=>{if(e.a11y.clicked||!e.params.a11y.scrollOnFocus||new Date().getTime()-a<100)return;let C=E.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!C||!e.slides.includes(C))return;o=C;let L=e.slides.indexOf(C)===e.activeIndex,V=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(C);L||V||E.sourceCapabilities&&E.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,requestAnimationFrame(()=>{r||(e.params.loop?e.slideToLoop(parseInt(C.getAttribute("data-swiper-slide-index")),0):e.slideTo(e.slides.indexOf(C),0),r=!1)}))},S=()=>{let E=e.params.a11y;E.itemRoleDescriptionMessage&&f(e.slides,E.itemRoleDescriptionMessage),E.slideRole&&h(e.slides,E.slideRole);let C=e.slides.length;E.slideLabelMessage&&e.slides.forEach((L,V)=>{let P=e.params.loop?parseInt(L.getAttribute("data-swiper-slide-index"),10):V,D=E.slideLabelMessage.replace(/\{\{index\}\}/,P+1).replace(/\{\{slidesLength\}\}/,C);g(L,D)})},R=()=>{let E=e.params.a11y;e.el.append(s);let C=e.el;E.containerRoleDescriptionMessage&&f(C,E.containerRoleDescriptionMessage),E.containerMessage&&g(C,E.containerMessage);let L=e.wrapperEl,V=E.id||L.getAttribute("id")||`swiper-wrapper-${c(16)}`,P=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";v(L,V),p(L,P),S();let{nextEl:D,prevEl:F}=e.navigation?e.navigation:{};D=U(D),F=U(F),D&&D.forEach($=>y($,V,E.nextSlideMessage)),F&&F.forEach($=>y($,V,E.prevSlideMessage)),A()&&U(e.pagination.el).forEach(Q=>{Q.addEventListener("keydown",b)}),ce().addEventListener("visibilitychange",x),e.el.addEventListener("focus",T,!0),e.el.addEventListener("focus",T,!0),e.el.addEventListener("pointerdown",N,!0),e.el.addEventListener("pointerup",z,!0)};function W(){s&&s.remove();let{nextEl:E,prevEl:C}=e.navigation?e.navigation:{};E=U(E),C=U(C),E&&E.forEach(V=>V.removeEventListener("keydown",b)),C&&C.forEach(V=>V.removeEventListener("keydown",b)),A()&&U(e.pagination.el).forEach(P=>{P.removeEventListener("keydown",b)}),ce().removeEventListener("visibilitychange",x),e.el&&typeof e.el!="string"&&(e.el.removeEventListener("focus",T,!0),e.el.removeEventListener("pointerdown",N,!0),e.el.removeEventListener("pointerup",z,!0))}n("beforeInit",()=>{s=ue("span",e.params.a11y.notificationClass),s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true")}),n("afterInit",()=>{e.params.a11y.enabled&&R()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&S()}),n("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&k()}),n("paginationUpdate",()=>{e.params.a11y.enabled&&I()}),n("destroy",()=>{e.params.a11y.enabled&&W()})}function Pu(i){let{swiper:e,extendParams:t,on:n}=i;t({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let s=!1,r={},o=f=>f.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),a=f=>{let m=Te(),g;f?g=new URL(f):g=m.location;let v=g.pathname.slice(1).split("/").filter(b=>b!==""),p=v.length,_=v[p-2],w=v[p-1];return{key:_,value:w}},l=(f,m)=>{let g=Te();if(!s||!e.params.history.enabled)return;let v;e.params.url?v=new URL(e.params.url):v=g.location;let p=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${m}"]`):e.slides[m],_=o(p.getAttribute("data-history"));if(e.params.history.root.length>0){let b=e.params.history.root;b[b.length-1]==="/"&&(b=b.slice(0,b.length-1)),_=`${b}/${f?`${f}/`:""}${_}`}else v.pathname.includes(f)||(_=`${f?`${f}/`:""}${_}`);e.params.history.keepQuery&&(_+=v.search);let w=g.history.state;w&&w.value===_||(e.params.history.replaceState?g.history.replaceState({value:_},null,_):g.history.pushState({value:_},null,_))},c=(f,m,g)=>{if(m)for(let v=0,p=e.slides.length;v<p;v+=1){let _=e.slides[v];if(o(_.getAttribute("data-history"))===m){let b=e.getSlideIndex(_);e.slideTo(b,f,g)}}else e.slideTo(0,f,g)},d=()=>{r=a(e.params.url),c(e.params.speed,r.value,!1)},u=()=>{let f=Te();if(e.params.history){if(!f.history||!f.history.pushState){e.params.history.enabled=!1,e.params.hashNavigation.enabled=!0;return}if(s=!0,r=a(e.params.url),!r.key&&!r.value){e.params.history.replaceState||f.addEventListener("popstate",d);return}c(0,r.value,e.params.runCallbacksOnInit),e.params.history.replaceState||f.addEventListener("popstate",d)}},h=()=>{let f=Te();e.params.history.replaceState||f.removeEventListener("popstate",d)};n("init",()=>{e.params.history.enabled&&u()}),n("destroy",()=>{e.params.history.enabled&&h()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{s&&l(e.params.history.key,e.activeIndex)}),n("slideChange",()=>{s&&e.params.cssMode&&l(e.params.history.key,e.activeIndex)})}function Mu(i){let{swiper:e,extendParams:t,emit:n,on:s}=i,r=!1,o=ce(),a=Te();t({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(h,f){if(e.virtual&&e.params.virtual.enabled){let m=e.slides.filter(v=>v.getAttribute("data-hash")===f)[0];return m?parseInt(m.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(Se(e.slidesEl,`.${e.params.slideClass}[data-hash="${f}"], swiper-slide[data-hash="${f}"]`)[0])}}});let l=()=>{n("hashChange");let h=o.location.hash.replace("#",""),f=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],m=f?f.getAttribute("data-hash"):"";if(h!==m){let g=e.params.hashNavigation.getSlideIndex(e,h);if(typeof g>"u"||Number.isNaN(g))return;e.slideTo(g)}},c=()=>{if(!r||!e.params.hashNavigation.enabled)return;let h=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],f=h?h.getAttribute("data-hash")||h.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&a.history&&a.history.replaceState?(a.history.replaceState(null,null,`#${f}`||""),n("hashSet")):(o.location.hash=f||"",n("hashSet"))},d=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;r=!0;let h=o.location.hash.replace("#","");if(h){let m=e.params.hashNavigation.getSlideIndex(e,h);e.slideTo(m||0,0,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&a.addEventListener("hashchange",l)},u=()=>{e.params.hashNavigation.watchState&&a.removeEventListener("hashchange",l)};s("init",()=>{e.params.hashNavigation.enabled&&d()}),s("destroy",()=>{e.params.hashNavigation.enabled&&u()}),s("transitionEnd _freeModeNoMomentumRelease",()=>{r&&c()}),s("slideChange",()=>{r&&e.params.cssMode&&c()})}function ku(i){let{swiper:e,extendParams:t,on:n,emit:s,params:r}=i;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=r&&r.autoplay?r.autoplay.delay:3e3,c=r&&r.autoplay?r.autoplay.delay:3e3,d,u=new Date().getTime(),h,f,m,g,v,p,_;function w(C){!e||e.destroyed||!e.wrapperEl||C.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",w),!(_||C.detail&&C.detail.bySwiperTouchMove)&&N())}let b=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?h=!0:h&&(c=d,h=!1);let C=e.autoplay.paused?d:u+c-new Date().getTime();e.autoplay.timeLeft=C,s("autoplayTimeLeft",C,C/l),a=requestAnimationFrame(()=>{b()})},k=()=>{let C;return e.virtual&&e.params.virtual.enabled?C=e.slides.filter(V=>V.classList.contains("swiper-slide-active"))[0]:C=e.slides[e.activeIndex],C?parseInt(C.getAttribute("data-swiper-autoplay"),10):void 0},O=C=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),b();let L=typeof C>"u"?e.params.autoplay.delay:C;l=e.params.autoplay.delay,c=e.params.autoplay.delay;let V=k();!Number.isNaN(V)&&V>0&&typeof C>"u"&&(L=V,l=V,c=V),d=L;let P=e.params.speed,D=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(P,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,P,!0,!0),s("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(P,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,P,!0,!0),s("autoplay")),e.params.cssMode&&(u=new Date().getTime(),requestAnimationFrame(()=>{O()})))};return L>0?(clearTimeout(o),o=setTimeout(()=>{D()},L)):requestAnimationFrame(()=>{D()}),L},A=()=>{u=new Date().getTime(),e.autoplay.running=!0,O(),s("autoplayStart")},I=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),s("autoplayStop")},y=(C,L)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),C||(p=!0);let V=()=>{s("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",w):N()};if(e.autoplay.paused=!0,L){v&&(d=e.params.autoplay.delay),v=!1,V();return}d=(d||e.params.autoplay.delay)-(new Date().getTime()-u),!(e.isEnd&&d<0&&!e.params.loop)&&(d<0&&(d=0),V())},N=()=>{e.isEnd&&d<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(u=new Date().getTime(),p?(p=!1,O(d)):O(),e.autoplay.paused=!1,s("autoplayResume"))},z=()=>{if(e.destroyed||!e.autoplay.running)return;let C=ce();C.visibilityState==="hidden"&&(p=!0,y(!0)),C.visibilityState==="visible"&&N()},x=C=>{C.pointerType==="mouse"&&(p=!0,_=!0,!(e.animating||e.autoplay.paused)&&y(!0))},T=C=>{C.pointerType==="mouse"&&(_=!1,e.autoplay.paused&&N())},S=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",x),e.el.addEventListener("pointerleave",T))},R=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",x),e.el.removeEventListener("pointerleave",T))},W=()=>{ce().addEventListener("visibilitychange",z)},E=()=>{ce().removeEventListener("visibilitychange",z)};n("init",()=>{e.params.autoplay.enabled&&(S(),W(),A())}),n("destroy",()=>{R(),E(),e.autoplay.running&&I()}),n("_freeModeStaticRelease",()=>{(m||p)&&N()}),n("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?I():y(!0,!0)}),n("beforeTransitionStart",(C,L,V)=>{e.destroyed||!e.autoplay.running||(V||!e.params.autoplay.disableOnInteraction?y(!0,!0):I())}),n("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){I();return}f=!0,m=!1,p=!1,g=setTimeout(()=>{p=!0,m=!0,y(!0)},200)}}),n("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!f)){if(clearTimeout(g),clearTimeout(o),e.params.autoplay.disableOnInteraction){m=!1,f=!1;return}m&&e.params.cssMode&&N(),m=!1,f=!1}}),n("slideChange",()=>{e.destroyed||!e.autoplay.running||(v=!0)}),Object.assign(e.autoplay,{start:A,stop:I,pause:y,resume:N})}function Au(i){let{swiper:e,extendParams:t,on:n}=i;t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let s=!1,r=!1;e.thumbs={swiper:null};function o(){let c=e.thumbs.swiper;if(!c||c.destroyed)return;let d=c.clickedIndex,u=c.clickedSlide;if(u&&u.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof d>"u"||d===null)return;let h;c.params.loop?h=parseInt(c.clickedSlide.getAttribute("data-swiper-slide-index"),10):h=d,e.params.loop?e.slideToLoop(h):e.slideTo(h)}function a(){let{thumbs:c}=e.params;if(s)return!1;s=!0;let d=e.constructor;if(c.swiper instanceof d)e.thumbs.swiper=c.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(wl(c.swiper)){let u=Object.assign({},c.swiper);Object.assign(u,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new d(u),r=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",o),!0}function l(c){let d=e.thumbs.swiper;if(!d||d.destroyed)return;let u=d.params.slidesPerView==="auto"?d.slidesPerViewDynamic():d.params.slidesPerView,h=1,f=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(h=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(h=1),h=Math.floor(h),d.slides.forEach(v=>v.classList.remove(f)),d.params.loop||d.params.virtual&&d.params.virtual.enabled)for(let v=0;v<h;v+=1)Se(d.slidesEl,`[data-swiper-slide-index="${e.realIndex+v}"]`).forEach(p=>{p.classList.add(f)});else for(let v=0;v<h;v+=1)d.slides[e.realIndex+v]&&d.slides[e.realIndex+v].classList.add(f);let m=e.params.thumbs.autoScrollOffset,g=m&&!d.params.loop;if(e.realIndex!==d.realIndex||g){let v=d.activeIndex,p,_;if(d.params.loop){let w=d.slides.filter(b=>b.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];p=d.slides.indexOf(w),_=e.activeIndex>e.previousIndex?"next":"prev"}else p=e.realIndex,_=p>e.previousIndex?"next":"prev";g&&(p+=_==="next"?m:-1*m),d.visibleSlidesIndexes&&d.visibleSlidesIndexes.indexOf(p)<0&&(d.params.centeredSlides?p>v?p=p-Math.floor(u/2)+1:p=p+Math.floor(u/2)-1:p>v&&d.params.slidesPerGroup,d.slideTo(p,c?0:void 0))}}n("beforeInit",()=>{let{thumbs:c}=e.params;if(!(!c||!c.swiper))if(typeof c.swiper=="string"||c.swiper instanceof HTMLElement){let d=ce(),u=()=>{let f=typeof c.swiper=="string"?d.querySelector(c.swiper):c.swiper;if(f&&f.swiper)c.swiper=f.swiper,a(),l(!0);else if(f){let m=`${e.params.eventsPrefix}init`,g=v=>{c.swiper=v.detail[0],f.removeEventListener(m,g),a(),l(!0),c.swiper.update(),e.update()};f.addEventListener(m,g)}return f},h=()=>{if(e.destroyed)return;u()||requestAnimationFrame(h)};requestAnimationFrame(h)}else a(),l(!0)}),n("slideChange update resize observerUpdate",()=>{l()}),n("setTransition",(c,d)=>{let u=e.thumbs.swiper;!u||u.destroyed||u.setTransition(d)}),n("beforeDestroy",()=>{let c=e.thumbs.swiper;!c||c.destroyed||r&&c.destroy()}),Object.assign(e.thumbs,{init:a,update:l})}function Ru(i){let{swiper:e,extendParams:t,emit:n,once:s}=i;t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function r(){if(e.params.cssMode)return;let l=e.getTranslate();e.setTranslate(l),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function o(){if(e.params.cssMode)return;let{touchEventsData:l,touches:c}=e;l.velocities.length===0&&l.velocities.push({position:c[e.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:c[e.isHorizontal()?"currentX":"currentY"],time:Ue()})}function a(l){let{currentPos:c}=l;if(e.params.cssMode)return;let{params:d,wrapperEl:u,rtlTranslate:h,snapGrid:f,touchEventsData:m}=e,v=Ue()-m.touchStartTime;if(c<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(c>-e.maxTranslate()){e.slides.length<f.length?e.slideTo(f.length-1):e.slideTo(e.slides.length-1);return}if(d.freeMode.momentum){if(m.velocities.length>1){let I=m.velocities.pop(),y=m.velocities.pop(),N=I.position-y.position,z=I.time-y.time;e.velocity=N/z,e.velocity/=2,Math.abs(e.velocity)<d.freeMode.minimumVelocity&&(e.velocity=0),(z>150||Ue()-I.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=d.freeMode.momentumVelocityRatio,m.velocities.length=0;let p=1e3*d.freeMode.momentumRatio,_=e.velocity*p,w=e.translate+_;h&&(w=-w);let b=!1,k,O=Math.abs(e.velocity)*20*d.freeMode.momentumBounceRatio,A;if(w<e.maxTranslate())d.freeMode.momentumBounce?(w+e.maxTranslate()<-O&&(w=e.maxTranslate()-O),k=e.maxTranslate(),b=!0,m.allowMomentumBounce=!0):w=e.maxTranslate(),d.loop&&d.centeredSlides&&(A=!0);else if(w>e.minTranslate())d.freeMode.momentumBounce?(w-e.minTranslate()>O&&(w=e.minTranslate()+O),k=e.minTranslate(),b=!0,m.allowMomentumBounce=!0):w=e.minTranslate(),d.loop&&d.centeredSlides&&(A=!0);else if(d.freeMode.sticky){let I;for(let y=0;y<f.length;y+=1)if(f[y]>-w){I=y;break}Math.abs(f[I]-w)<Math.abs(f[I-1]-w)||e.swipeDirection==="next"?w=f[I]:w=f[I-1],w=-w}if(A&&s("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(h?p=Math.abs((-w-e.translate)/e.velocity):p=Math.abs((w-e.translate)/e.velocity),d.freeMode.sticky){let I=Math.abs((h?-w:w)-e.translate),y=e.slidesSizesGrid[e.activeIndex];I<y?p=d.speed:I<2*y?p=d.speed*1.5:p=d.speed*2.5}}else if(d.freeMode.sticky){e.slideToClosest();return}d.freeMode.momentumBounce&&b?(e.updateProgress(k),e.setTransition(p),e.setTranslate(w),e.transitionStart(!0,e.swipeDirection),e.animating=!0,dt(u,()=>{!e||e.destroyed||!m.allowMomentumBounce||(n("momentumBounce"),e.setTransition(d.speed),setTimeout(()=>{e.setTranslate(k),dt(u,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(w),e.setTransition(p),e.setTranslate(w),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,dt(u,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(w),e.updateActiveIndex(),e.updateSlidesClasses()}else if(d.freeMode.sticky){e.slideToClosest();return}else d.freeMode&&n("_freeModeNoMomentumRelease");(!d.freeMode.momentum||v>=d.longSwipesMs)&&(n("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:r,onTouchMove:o,onTouchEnd:a}})}function Nu(i){let{swiper:e,extendParams:t,on:n}=i;t({grid:{rows:1,fill:"column"}});let s,r,o,a,l=()=>{let g=e.params.spaceBetween;return typeof g=="string"&&g.indexOf("%")>=0?g=parseFloat(g.replace("%",""))/100*e.size:typeof g=="string"&&(g=parseFloat(g)),g},c=g=>{let{slidesPerView:v}=e.params,{rows:p,fill:_}=e.params.grid,w=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:g.length;o=Math.floor(w/p),Math.floor(w/p)===w/p?s=w:s=Math.ceil(w/p)*p,v!=="auto"&&_==="row"&&(s=Math.max(s,v*p)),r=s/p},d=()=>{e.slides&&e.slides.forEach(g=>{g.swiperSlideGridSet&&(g.style.height="",g.style[e.getDirectionLabel("margin-top")]="")})},u=(g,v,p)=>{let{slidesPerGroup:_}=e.params,w=l(),{rows:b,fill:k}=e.params.grid,O=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:p.length,A,I,y;if(k==="row"&&_>1){let N=Math.floor(g/(_*b)),z=g-b*_*N,x=N===0?_:Math.min(Math.ceil((O-N*b*_)/b),_);y=Math.floor(z/x),I=z-y*x+N*_,A=I+y*s/b,v.style.order=A}else k==="column"?(I=Math.floor(g/b),y=g-I*b,(I>o||I===o&&y===b-1)&&(y+=1,y>=b&&(y=0,I+=1))):(y=Math.floor(g/r),I=g-y*r);v.row=y,v.column=I,v.style.height=`calc((100% - ${(b-1)*w}px) / ${b})`,v.style[e.getDirectionLabel("margin-top")]=y!==0?w&&`${w}px`:"",v.swiperSlideGridSet=!0},h=(g,v)=>{let{centeredSlides:p,roundLengths:_}=e.params,w=l(),{rows:b}=e.params.grid;if(e.virtualSize=(g+w)*s,e.virtualSize=Math.ceil(e.virtualSize/b)-w,e.params.cssMode||(e.wrapperEl.style[e.getDirectionLabel("width")]=`${e.virtualSize+w}px`),p){let k=[];for(let O=0;O<v.length;O+=1){let A=v[O];_&&(A=Math.floor(A)),v[O]<e.virtualSize+v[0]&&k.push(A)}v.splice(0,v.length),v.push(...k)}},f=()=>{a=e.params.grid&&e.params.grid.rows>1},m=()=>{let{params:g,el:v}=e,p=g.grid&&g.grid.rows>1;a&&!p?(v.classList.remove(`${g.containerModifierClass}grid`,`${g.containerModifierClass}grid-column`),o=1,e.emitContainerClasses()):!a&&p&&(v.classList.add(`${g.containerModifierClass}grid`),g.grid.fill==="column"&&v.classList.add(`${g.containerModifierClass}grid-column`),e.emitContainerClasses()),a=p};n("init",f),n("update",m),e.grid={initSlides:c,unsetSlides:d,updateSlide:u,updateWrapperSize:h}}function fm(i){let e=this,{params:t,slidesEl:n}=e;t.loop&&e.loopDestroy();let s=r=>{if(typeof r=="string"){let o=document.createElement("div");o.innerHTML=r,n.append(o.children[0]),o.innerHTML=""}else n.append(r)};if(typeof i=="object"&&"length"in i)for(let r=0;r<i.length;r+=1)i[r]&&s(i[r]);else s(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update()}function mm(i){let e=this,{params:t,activeIndex:n,slidesEl:s}=e;t.loop&&e.loopDestroy();let r=n+1,o=a=>{if(typeof a=="string"){let l=document.createElement("div");l.innerHTML=a,s.prepend(l.children[0]),l.innerHTML=""}else s.prepend(a)};if(typeof i=="object"&&"length"in i){for(let a=0;a<i.length;a+=1)i[a]&&o(i[a]);r=n+i.length}else o(i);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),e.slideTo(r,0,!1)}function gm(i,e){let t=this,{params:n,activeIndex:s,slidesEl:r}=t,o=s;n.loop&&(o-=t.loopedSlides,t.loopDestroy(),t.recalcSlides());let a=t.slides.length;if(i<=0){t.prependSlide(e);return}if(i>=a){t.appendSlide(e);return}let l=o>i?o+1:o,c=[];for(let d=a-1;d>=i;d-=1){let u=t.slides[d];u.remove(),c.unshift(u)}if(typeof e=="object"&&"length"in e){for(let d=0;d<e.length;d+=1)e[d]&&r.append(e[d]);l=o>i?o+e.length:o}else r.append(e);for(let d=0;d<c.length;d+=1)r.append(c[d]);t.recalcSlides(),n.loop&&t.loopCreate(),(!n.observer||t.isElement)&&t.update(),n.loop?t.slideTo(l+t.loopedSlides,0,!1):t.slideTo(l,0,!1)}function vm(i){let e=this,{params:t,activeIndex:n}=e,s=n;t.loop&&(s-=e.loopedSlides,e.loopDestroy());let r=s,o;if(typeof i=="object"&&"length"in i){for(let a=0;a<i.length;a+=1)o=i[a],e.slides[o]&&e.slides[o].remove(),o<r&&(r-=1);r=Math.max(r,0)}else o=i,e.slides[o]&&e.slides[o].remove(),o<r&&(r-=1),r=Math.max(r,0);e.recalcSlides(),t.loop&&e.loopCreate(),(!t.observer||e.isElement)&&e.update(),t.loop?e.slideTo(r+e.loopedSlides,0,!1):e.slideTo(r,0,!1)}function _m(){let i=this,e=[];for(let t=0;t<i.slides.length;t+=1)e.push(t);i.removeSlide(e)}function Du(i){let{swiper:e}=i;Object.assign(e,{appendSlide:fm.bind(e),prependSlide:mm.bind(e),addSlide:gm.bind(e),removeSlide:vm.bind(e),removeAllSlides:_m.bind(e)})}function Le(i){let{effect:e,swiper:t,on:n,setTranslate:s,setTransition:r,overwriteParams:o,perspective:a,recreateShadows:l,getEffectParams:c}=i;n("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),a&&a()&&t.classNames.push(`${t.params.containerModifierClass}3d`);let u=o?o():{};Object.assign(t.params,u),Object.assign(t.originalParams,u)}),n("setTranslate",()=>{t.params.effect===e&&s()}),n("setTransition",(u,h)=>{t.params.effect===e&&r(h)}),n("transitionEnd",()=>{if(t.params.effect===e&&l){if(!c||!c().slideShadows)return;t.slides.forEach(u=>{u.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>h.remove())}),l()}});let d;n("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(d=!0),requestAnimationFrame(()=>{d&&t.slides&&t.slides.length&&(s(),d=!1)}))})}function Ke(i,e){let t=Ce(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function bt(i){let{swiper:e,duration:t,transformElements:n,allSlides:s}=i,{activeIndex:r}=e,o=a=>a.parentElement?a.parentElement:e.slides.filter(c=>c.shadowRoot&&c.shadowRoot===a.parentNode)[0];if(e.params.virtualTranslate&&t!==0){let a=!1,l;s?l=n:l=n.filter(c=>{let d=c.classList.contains("swiper-slide-transform")?o(c):c;return e.getSlideIndex(d)===r}),l.forEach(c=>{dt(c,()=>{if(a||!e||e.destroyed)return;a=!0,e.animating=!1;let d=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(d)})})}}function Ou(i){let{swiper:e,extendParams:t,on:n}=i;t({fadeEffect:{crossFade:!1}}),Le({effect:"fade",swiper:e,on:n,setTranslate:()=>{let{slides:o}=e,a=e.params.fadeEffect;for(let l=0;l<o.length;l+=1){let c=e.slides[l],u=-c.swiperSlideOffset;e.params.virtualTranslate||(u-=e.translate);let h=0;e.isHorizontal()||(h=u,u=0);let f=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(c.progress),0):1+Math.min(Math.max(c.progress,-1),0),m=Ke(a,c);m.style.opacity=f,m.style.transform=`translate3d(${u}px, ${h}px, 0px)`}},setTransition:o=>{let a=e.slides.map(l=>Ce(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`}),bt({swiper:e,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function Lu(i){let{swiper:e,extendParams:t,on:n}=i;t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});let s=(l,c,d)=>{let u=d?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),h=d?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");u||(u=ue("div",`swiper-slide-shadow-cube swiper-slide-shadow-${d?"left":"top"}`.split(" ")),l.append(u)),h||(h=ue("div",`swiper-slide-shadow-cube swiper-slide-shadow-${d?"right":"bottom"}`.split(" ")),l.append(h)),u&&(u.style.opacity=Math.max(-c,0)),h&&(h.style.opacity=Math.max(c,0))};Le({effect:"cube",swiper:e,on:n,setTranslate:()=>{let{el:l,wrapperEl:c,slides:d,width:u,height:h,rtlTranslate:f,size:m,browser:g}=e,v=ut(e),p=e.params.cubeEffect,_=e.isHorizontal(),w=e.virtual&&e.params.virtual.enabled,b=0,k;p.shadow&&(_?(k=e.wrapperEl.querySelector(".swiper-cube-shadow"),k||(k=ue("div","swiper-cube-shadow"),e.wrapperEl.append(k)),k.style.height=`${u}px`):(k=l.querySelector(".swiper-cube-shadow"),k||(k=ue("div","swiper-cube-shadow"),l.append(k))));for(let A=0;A<d.length;A+=1){let I=d[A],y=A;w&&(y=parseInt(I.getAttribute("data-swiper-slide-index"),10));let N=y*90,z=Math.floor(N/360);f&&(N=-N,z=Math.floor(-N/360));let x=Math.max(Math.min(I.progress,1),-1),T=0,S=0,R=0;y%4===0?(T=-z*4*m,R=0):(y-1)%4===0?(T=0,R=-z*4*m):(y-2)%4===0?(T=m+z*4*m,R=m):(y-3)%4===0&&(T=-m,R=3*m+m*4*z),f&&(T=-T),_||(S=T,T=0);let W=`rotateX(${v(_?0:-N)}deg) rotateY(${v(_?N:0)}deg) translate3d(${T}px, ${S}px, ${R}px)`;x<=1&&x>-1&&(b=y*90+x*90,f&&(b=-y*90-x*90)),I.style.transform=W,p.slideShadows&&s(I,x,_)}if(c.style.transformOrigin=`50% 50% -${m/2}px`,c.style["-webkit-transform-origin"]=`50% 50% -${m/2}px`,p.shadow)if(_)k.style.transform=`translate3d(0px, ${u/2+p.shadowOffset}px, ${-u/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${p.shadowScale})`;else{let A=Math.abs(b)-Math.floor(Math.abs(b)/90)*90,I=1.5-(Math.sin(A*2*Math.PI/360)/2+Math.cos(A*2*Math.PI/360)/2),y=p.shadowScale,N=p.shadowScale/I,z=p.shadowOffset;k.style.transform=`scale3d(${y}, 1, ${N}) translate3d(0px, ${h/2+z}px, ${-h/2/N}px) rotateX(-89.99deg)`}let O=(g.isSafari||g.isWebView)&&g.needPerspectiveFix?-m/2:0;c.style.transform=`translate3d(0px,0,${O}px) rotateX(${v(e.isHorizontal()?0:b)}deg) rotateY(${v(e.isHorizontal()?-b:0)}deg)`,c.style.setProperty("--swiper-cube-translate-z",`${O}px`)},setTransition:l=>{let{el:c,slides:d}=e;if(d.forEach(u=>{u.style.transitionDuration=`${l}ms`,u.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${l}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){let u=c.querySelector(".swiper-cube-shadow");u&&(u.style.transitionDuration=`${l}ms`)}},recreateShadows:()=>{let l=e.isHorizontal();e.slides.forEach(c=>{let d=Math.max(Math.min(c.progress,1),-1);s(c,d,l)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function Qe(i,e,t){let n=`swiper-slide-shadow${t?`-${t}`:""}${i?` swiper-slide-shadow-${i}`:""}`,s=Ce(e),r=s.querySelector(`.${n.split(" ").join(".")}`);return r||(r=ue("div",n.split(" ")),s.append(r)),r}function Fu(i){let{swiper:e,extendParams:t,on:n}=i;t({flipEffect:{slideShadows:!0,limitRotation:!0}});let s=(l,c)=>{let d=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),u=e.isHorizontal()?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");d||(d=Qe("flip",l,e.isHorizontal()?"left":"top")),u||(u=Qe("flip",l,e.isHorizontal()?"right":"bottom")),d&&(d.style.opacity=Math.max(-c,0)),u&&(u.style.opacity=Math.max(c,0))};Le({effect:"flip",swiper:e,on:n,setTranslate:()=>{let{slides:l,rtlTranslate:c}=e,d=e.params.flipEffect,u=ut(e);for(let h=0;h<l.length;h+=1){let f=l[h],m=f.progress;e.params.flipEffect.limitRotation&&(m=Math.max(Math.min(f.progress,1),-1));let g=f.swiperSlideOffset,p=-180*m,_=0,w=e.params.cssMode?-g-e.translate:-g,b=0;e.isHorizontal()?c&&(p=-p):(b=w,w=0,_=-p,p=0),f.style.zIndex=-Math.abs(Math.round(m))+l.length,d.slideShadows&&s(f,m);let k=`translate3d(${w}px, ${b}px, 0px) rotateX(${u(_)}deg) rotateY(${u(p)}deg)`,O=Ke(d,f);O.style.transform=k}},setTransition:l=>{let c=e.slides.map(d=>Ce(d));c.forEach(d=>{d.style.transitionDuration=`${l}ms`,d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(u=>{u.style.transitionDuration=`${l}ms`})}),bt({swiper:e,duration:l,transformElements:c})},recreateShadows:()=>{e.params.flipEffect,e.slides.forEach(l=>{let c=l.progress;e.params.flipEffect.limitRotation&&(c=Math.max(Math.min(l.progress,1),-1)),s(l,c)})},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function zu(i){let{swiper:e,extendParams:t,on:n}=i;t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Le({effect:"coverflow",swiper:e,on:n,setTranslate:()=>{let{width:o,height:a,slides:l,slidesSizesGrid:c}=e,d=e.params.coverflowEffect,u=e.isHorizontal(),h=e.translate,f=u?-h+o/2:-h+a/2,m=u?d.rotate:-d.rotate,g=d.depth,v=ut(e);for(let p=0,_=l.length;p<_;p+=1){let w=l[p],b=c[p],k=w.swiperSlideOffset,O=(f-k-b/2)/b,A=typeof d.modifier=="function"?d.modifier(O):O*d.modifier,I=u?m*A:0,y=u?0:m*A,N=-g*Math.abs(A),z=d.stretch;typeof z=="string"&&z.indexOf("%")!==-1&&(z=parseFloat(d.stretch)/100*b);let x=u?0:z*A,T=u?z*A:0,S=1-(1-d.scale)*Math.abs(A);Math.abs(T)<.001&&(T=0),Math.abs(x)<.001&&(x=0),Math.abs(N)<.001&&(N=0),Math.abs(I)<.001&&(I=0),Math.abs(y)<.001&&(y=0),Math.abs(S)<.001&&(S=0);let R=`translate3d(${T}px,${x}px,${N}px)  rotateX(${v(y)}deg) rotateY(${v(I)}deg) scale(${S})`,W=Ke(d,w);if(W.style.transform=R,w.style.zIndex=-Math.abs(Math.round(A))+1,d.slideShadows){let E=u?w.querySelector(".swiper-slide-shadow-left"):w.querySelector(".swiper-slide-shadow-top"),C=u?w.querySelector(".swiper-slide-shadow-right"):w.querySelector(".swiper-slide-shadow-bottom");E||(E=Qe("coverflow",w,u?"left":"top")),C||(C=Qe("coverflow",w,u?"right":"bottom")),E&&(E.style.opacity=A>0?A:0),C&&(C.style.opacity=-A>0?-A:0)}}},setTransition:o=>{e.slides.map(l=>Ce(l)).forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(c=>{c.style.transitionDuration=`${o}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function $u(i){let{swiper:e,extendParams:t,on:n}=i;t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});let s=a=>typeof a=="string"?a:`${a}px`;Le({effect:"creative",swiper:e,on:n,setTranslate:()=>{let{slides:a,wrapperEl:l,slidesSizesGrid:c}=e,d=e.params.creativeEffect,{progressMultiplier:u}=d,h=e.params.centeredSlides,f=ut(e);if(h){let m=c[0]/2-e.params.slidesOffsetBefore||0;l.style.transform=`translateX(calc(50% - ${m}px))`}for(let m=0;m<a.length;m+=1){let g=a[m],v=g.progress,p=Math.min(Math.max(g.progress,-d.limitProgress),d.limitProgress),_=p;h||(_=Math.min(Math.max(g.originalProgress,-d.limitProgress),d.limitProgress));let w=g.swiperSlideOffset,b=[e.params.cssMode?-w-e.translate:-w,0,0],k=[0,0,0],O=!1;e.isHorizontal()||(b[1]=b[0],b[0]=0);let A={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};p<0?(A=d.next,O=!0):p>0&&(A=d.prev,O=!0),b.forEach((S,R)=>{b[R]=`calc(${S}px + (${s(A.translate[R])} * ${Math.abs(p*u)}))`}),k.forEach((S,R)=>{let W=A.rotate[R]*Math.abs(p*u);k[R]=W}),g.style.zIndex=-Math.abs(Math.round(v))+a.length;let I=b.join(", "),y=`rotateX(${f(k[0])}deg) rotateY(${f(k[1])}deg) rotateZ(${f(k[2])}deg)`,N=_<0?`scale(${1+(1-A.scale)*_*u})`:`scale(${1-(1-A.scale)*_*u})`,z=_<0?1+(1-A.opacity)*_*u:1-(1-A.opacity)*_*u,x=`translate3d(${I}) ${y} ${N}`;if(O&&A.shadow||!O){let S=g.querySelector(".swiper-slide-shadow");if(!S&&A.shadow&&(S=Qe("creative",g)),S){let R=d.shadowPerProgress?p*(1/d.limitProgress):p;S.style.opacity=Math.min(Math.max(Math.abs(R),0),1)}}let T=Ke(d,g);T.style.transform=x,T.style.opacity=z,A.origin&&(T.style.transformOrigin=A.origin)}},setTransition:a=>{let l=e.slides.map(c=>Ce(c));l.forEach(c=>{c.style.transitionDuration=`${a}ms`,c.querySelectorAll(".swiper-slide-shadow").forEach(d=>{d.style.transitionDuration=`${a}ms`})}),bt({swiper:e,duration:a,transformElements:l,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}function Wu(i){let{swiper:e,extendParams:t,on:n}=i;t({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),Le({effect:"cards",swiper:e,on:n,setTranslate:()=>{let{slides:o,activeIndex:a,rtlTranslate:l}=e,c=e.params.cardsEffect,{startTranslate:d,isTouched:u}=e.touchEventsData,h=l?-e.translate:e.translate;for(let f=0;f<o.length;f+=1){let m=o[f],g=m.progress,v=Math.min(Math.max(g,-4),4),p=m.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(p-=o[0].swiperSlideOffset);let _=e.params.cssMode?-p-e.translate:-p,w=0,b=-100*Math.abs(v),k=1,O=-c.perSlideRotate*v,A=c.perSlideOffset-Math.abs(v)*.75,I=e.virtual&&e.params.virtual.enabled?e.virtual.from+f:f,y=(I===a||I===a-1)&&v>0&&v<1&&(u||e.params.cssMode)&&h<d,N=(I===a||I===a+1)&&v<0&&v>-1&&(u||e.params.cssMode)&&h>d;if(y||N){let S=(1-Math.abs((Math.abs(v)-.5)/.5))**.5;O+=-28*v*S,k+=-.5*S,A+=96*S,w=`${-25*S*Math.abs(v)}%`}if(v<0?_=`calc(${_}px ${l?"-":"+"} (${A*Math.abs(v)}%))`:v>0?_=`calc(${_}px ${l?"-":"+"} (-${A*Math.abs(v)}%))`:_=`${_}px`,!e.isHorizontal()){let S=w;w=_,_=S}let z=v<0?`${1+(1-k)*v}`:`${1-(1-k)*v}`,x=`
        translate3d(${_}, ${w}, ${b}px)
        rotateZ(${c.rotate?l?-O:O:0}deg)
        scale(${z})
      `;if(c.slideShadows){let S=m.querySelector(".swiper-slide-shadow");S||(S=Qe("cards",m)),S&&(S.style.opacity=Math.min(Math.max((Math.abs(v)-.5)/.5,0),1))}m.style.zIndex=-Math.abs(Math.round(g))+o.length;let T=Ke(c,m);T.style.transform=x}},setTransition:o=>{let a=e.slides.map(l=>Ce(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow").forEach(c=>{c.style.transitionDuration=`${o}ms`})}),bt({swiper:e,duration:o,transformElements:a})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}var wm=[_u,wu,yu,bu,Eu,Cu,Su,Tu,xu,Iu,Pu,Mu,ku,Au,Ru,Nu,Du,Ou,Lu,Fu,zu,$u,Wu];Sn.use(wm);var pi=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function zt(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"&&!i.__swiper__}function bs(i,e){let t=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>t.indexOf(n)<0).forEach(n=>{typeof i[n]>"u"?i[n]=e[n]:zt(e[n])&&zt(i[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?i[n]=e[n]:bs(i[n],e[n]):i[n]=e[n]})}function Bu(i){return i===void 0&&(i={}),i.navigation&&typeof i.navigation.nextEl>"u"&&typeof i.navigation.prevEl>"u"}function Hu(i){return i===void 0&&(i={}),i.pagination&&typeof i.pagination.el>"u"}function ju(i){return i===void 0&&(i={}),i.scrollbar&&typeof i.scrollbar.el>"u"}function fi(i){return i===void 0&&(i=""),i.replace(/-[a-z]/g,e=>e.toUpperCase().replace("-",""))}function Uu(i){let{swiper:e,slides:t,passedParams:n,changedParams:s,nextEl:r,prevEl:o,scrollbarEl:a,paginationEl:l}=i,c=s.filter(y=>y!=="children"&&y!=="direction"&&y!=="wrapperClass"),{params:d,pagination:u,navigation:h,scrollbar:f,virtual:m,thumbs:g}=e,v,p,_,w,b,k,O,A;s.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&d.thumbs&&!d.thumbs.swiper&&(v=!0),s.includes("controller")&&n.controller&&n.controller.control&&d.controller&&!d.controller.control&&(p=!0),s.includes("pagination")&&n.pagination&&(n.pagination.el||l)&&(d.pagination||d.pagination===!1)&&u&&!u.el&&(_=!0),s.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(d.scrollbar||d.scrollbar===!1)&&f&&!f.el&&(w=!0),s.includes("navigation")&&n.navigation&&(n.navigation.prevEl||o)&&(n.navigation.nextEl||r)&&(d.navigation||d.navigation===!1)&&h&&!h.prevEl&&!h.nextEl&&(b=!0);let I=y=>{e[y]&&(e[y].destroy(),y==="navigation"?(e.isElement&&(e[y].prevEl.remove(),e[y].nextEl.remove()),d[y].prevEl=void 0,d[y].nextEl=void 0,e[y].prevEl=void 0,e[y].nextEl=void 0):(e.isElement&&e[y].el.remove(),d[y].el=void 0,e[y].el=void 0))};s.includes("loop")&&e.isElement&&(d.loop&&!n.loop?k=!0:!d.loop&&n.loop?O=!0:A=!0),c.forEach(y=>{if(zt(d[y])&&zt(n[y]))Object.assign(d[y],n[y]),(y==="navigation"||y==="pagination"||y==="scrollbar")&&"enabled"in n[y]&&!n[y].enabled&&I(y);else{let N=n[y];(N===!0||N===!1)&&(y==="navigation"||y==="pagination"||y==="scrollbar")?N===!1&&I(y):d[y]=n[y]}}),c.includes("controller")&&!p&&e.controller&&e.controller.control&&d.controller&&d.controller.control&&(e.controller.control=d.controller.control),s.includes("children")&&t&&m&&d.virtual.enabled?(m.slides=t,m.update(!0)):s.includes("virtual")&&m&&d.virtual.enabled&&(t&&(m.slides=t),m.update(!0)),s.includes("children")&&t&&d.loop&&(A=!0),v&&g.init()&&g.update(!0),p&&(e.controller.control=d.controller.control),_&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(d.pagination.el=l),u.init(),u.render(),u.update()),w&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(d.scrollbar.el=a),f.init(),f.updateSize(),f.setTranslate()),b&&(e.isElement&&((!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-button-next"),r.innerHTML=e.hostEl.constructor.nextButtonSvg,r.part.add("button-next"),e.el.appendChild(r)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),r&&(d.navigation.nextEl=r),o&&(d.navigation.prevEl=o),h.init(),h.update()),s.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),s.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),s.includes("direction")&&e.changeDirection(n.direction,!1),(k||A)&&e.loopDestroy(),(O||A)&&e.loopCreate(),e.update()}var Vu=i=>{if(parseFloat(i)===Number(i))return Number(i);if(i==="true"||i==="")return!0;if(i==="false")return!1;if(i==="null")return null;if(i!=="undefined"){if(typeof i=="string"&&i.includes("{")&&i.includes("}")&&i.includes('"')){let e;try{e=JSON.parse(i)}catch{e=i}return e}return i}},Yu=["a11y","autoplay","controller","cards-effect","coverflow-effect","creative-effect","cube-effect","fade-effect","flip-effect","free-mode","grid","hash-navigation","history","keyboard","mousewheel","navigation","pagination","parallax","scrollbar","thumbs","virtual","zoom"];function Yo(i,e,t){let n={},s={};bs(n,El);let r=[...pi,"on"],o=r.map(l=>l.replace(/_/,""));r.forEach(l=>{l=l.replace("_",""),typeof i[l]<"u"&&(s[l]=i[l])});let a=[...i.attributes];return typeof e=="string"&&typeof t<"u"&&a.push({name:e,value:zt(t)?fe({},t):t}),a.forEach(l=>{let c=Yu.filter(d=>l.name.indexOf(`${d}-`)===0)[0];if(c){let d=fi(c),u=fi(l.name.split(`${c}-`)[1]);typeof s[d]>"u"&&(s[d]={}),s[d]===!0&&(s[d]={enabled:!0}),s[d][u]=Vu(l.value)}else{let d=fi(l.name);if(!o.includes(d))return;let u=Vu(l.value);s[d]&&Yu.includes(l.name)&&!zt(u)?(s[d].constructor!==Object&&(s[d]={}),s[d].enabled=!!u):s[d]=u}}),bs(n,s),n.navigation?n.navigation=fe({prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},n.navigation!==!0?n.navigation:{}):n.navigation===!1&&delete n.navigation,n.scrollbar?n.scrollbar=fe({el:".swiper-scrollbar"},n.scrollbar!==!0?n.scrollbar:{}):n.scrollbar===!1&&delete n.scrollbar,n.pagination?n.pagination=fe({el:".swiper-pagination"},n.pagination!==!0?n.pagination:{}):n.pagination===!1&&delete n.pagination,{params:n,passedParams:s}}var ym=":host{--swiper-theme-color:#007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{width:100%;height:100%;margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function,initial);box-sizing:content-box}.swiper-android ::slotted(swiper-slide),.swiper-ios ::slotted(swiper-slide),.swiper-wrapper{transform:translate3d(0px,0,0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}::slotted(swiper-slide){flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}::slotted(.swiper-slide-invisible-blank){visibility:hidden}.swiper-autoheight,.swiper-autoheight ::slotted(swiper-slide){height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden ::slotted(swiper-slide){transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-cube-shadow,.swiper-3d ::slotted(swiper-slide){transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode ::slotted(swiper-slide){scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode ::slotted(swiper-slide){scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper::before{content:'';flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered ::slotted(swiper-slide){scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal ::slotted(swiper-slide):first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper::before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical ::slotted(swiper-slide):first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper::before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-virtual ::slotted(swiper-slide){-webkit-backface-visibility:hidden;transform:translateZ(0)}.swiper-virtual.swiper-css-mode .swiper-wrapper::after{content:'';position:absolute;left:0;top:0;pointer-events:none}.swiper-virtual.swiper-css-mode.swiper-horizontal .swiper-wrapper::after{height:1px;width:var(--swiper-virtual-size)}.swiper-virtual.swiper-css-mode.swiper-vertical .swiper-wrapper::after{width:1px;height:var(--swiper-virtual-size)}:host{--swiper-navigation-size:44px}.swiper-button-next,.swiper-button-prev{position:absolute;top:var(--swiper-navigation-top-offset,50%);width:calc(var(--swiper-navigation-size)/ 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size)/ 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color,var(--swiper-theme-color))}.swiper-button-next.swiper-button-disabled,.swiper-button-prev.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-next.swiper-button-hidden,.swiper-button-prev.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-next,.swiper-navigation-disabled .swiper-button-prev{display:none!important}.swiper-button-next svg,.swiper-button-prev svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-next svg,.swiper-rtl .swiper-button-prev svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset,10px);right:auto}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset,10px);left:auto}.swiper-button-lock{display:none}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translate3d(0,0,0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal,.swiper-pagination-custom,.swiper-pagination-fraction{bottom:var(--swiper-pagination-bottom,8px);top:var(--swiper-pagination-top,auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width,var(--swiper-pagination-bullet-size,8px));height:var(--swiper-pagination-bullet-height,var(--swiper-pagination-bullet-size,8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius,50%);background:var(--swiper-pagination-bullet-inactive-color,#000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color,var(--swiper-theme-color))}.swiper-pagination-vertical.swiper-pagination-bullets,.swiper-vertical>.swiper-pagination-bullets{right:var(--swiper-pagination-right,8px);left:var(--swiper-pagination-left,auto);top:50%;transform:translate3d(0px,-50%,0)}.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap,6px) 0;display:block}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap,4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translateX(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color,inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color,rgba(0,0,0,.25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color,var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size,4px);left:0;top:0}.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-vertical>.swiper-pagination-progressbar{width:var(--swiper-pagination-progressbar-size,4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius,10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color,rgba(0,0,0,.1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset,1%);bottom:var(--swiper-scrollbar-bottom,4px);top:var(--swiper-scrollbar-top,auto);z-index:50;height:var(--swiper-scrollbar-size,4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar.swiper-scrollbar-vertical,.swiper-vertical>.swiper-scrollbar{position:absolute;left:var(--swiper-scrollbar-left,auto);right:var(--swiper-scrollbar-right,4px);top:var(--swiper-scrollbar-sides-offset,1%);z-index:50;width:var(--swiper-scrollbar-size,4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset,1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color,rgba(0,0,0,.5));border-radius:var(--swiper-scrollbar-border-radius,10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}::slotted(.swiper-slide-zoomed){cursor:move;touch-action:none}.swiper .swiper-notification{position:absolute;left:0;top:0;pointer-events:none;opacity:0;z-index:-1000}.swiper-free-mode>.swiper-wrapper{transition-timing-function:ease-out;margin:0 auto}.swiper-grid>.swiper-wrapper{flex-wrap:wrap}.swiper-grid-column>.swiper-wrapper{flex-wrap:wrap;flex-direction:column}.swiper-fade.swiper-free-mode ::slotted(swiper-slide){transition-timing-function:ease-out}.swiper-fade ::slotted(swiper-slide){pointer-events:none;transition-property:opacity}.swiper-fade ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-fade ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-fade ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube{overflow:visible}.swiper-cube ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1;visibility:hidden;transform-origin:0 0;width:100%;height:100%}.swiper-cube ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-cube.swiper-rtl ::slotted(swiper-slide){transform-origin:100% 0}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-cube ::slotted(.swiper-slide-active),.swiper-cube ::slotted(.swiper-slide-next),.swiper-cube ::slotted(.swiper-slide-prev){pointer-events:auto;visibility:visible}.swiper-cube .swiper-cube-shadow{position:absolute;left:0;bottom:0px;width:100%;height:100%;opacity:.6;z-index:0}.swiper-cube .swiper-cube-shadow:before{content:'';background:#000;position:absolute;left:0;top:0;bottom:0;right:0;filter:blur(50px)}.swiper-cube ::slotted(.swiper-slide-next)+::slotted(swiper-slide){pointer-events:auto;visibility:visible}.swiper-flip{overflow:visible}.swiper-flip ::slotted(swiper-slide){pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1}.swiper-flip ::slotted(swiper-slide) ::slotted(swiper-slide){pointer-events:none}.swiper-flip ::slotted(.swiper-slide-active),.swiper-flip ::slotted(.swiper-slide-active) ::slotted(.swiper-slide-active){pointer-events:auto}.swiper-creative ::slotted(swiper-slide){-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden;transition-property:transform,opacity,height}.swiper-cards{overflow:visible}.swiper-cards ::slotted(swiper-slide){transform-origin:center bottom;-webkit-backface-visibility:hidden;backface-visibility:hidden;overflow:hidden}",bm="::slotted(.swiper-slide-shadow),::slotted(.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-top){position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}::slotted(.swiper-slide-shadow){background:rgba(0,0,0,.15)}::slotted(.swiper-slide-shadow-left){background-image:linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-right){background-image:linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-top){background-image:linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0))}::slotted(.swiper-slide-shadow-bottom){background-image:linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0))}.swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear;width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color,var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}@keyframes swiper-preloader-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-cube.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-bottom),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-left),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-right),::slotted(.swiper-slide-shadow-flip.swiper-slide-shadow-top){z-index:0;-webkit-backface-visibility:hidden;backface-visibility:hidden}::slotted(.swiper-zoom-container){width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-align:center}::slotted(.swiper-zoom-container)>canvas,::slotted(.swiper-zoom-container)>img,::slotted(.swiper-zoom-container)>svg{max-width:100%;max-height:100%;object-fit:contain}",qo=class{},Gu=typeof window>"u"||typeof HTMLElement>"u"?qo:HTMLElement,qu=`<svg width="11" height="20" viewBox="0 0 11 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.38296 20.0762C0.111788 19.805 0.111788 19.3654 0.38296 19.0942L9.19758 10.2796L0.38296 1.46497C0.111788 1.19379 0.111788 0.754138 0.38296 0.482966C0.654131 0.211794 1.09379 0.211794 1.36496 0.482966L10.4341 9.55214C10.8359 9.9539 10.8359 10.6053 10.4341 11.007L1.36496 20.0762C1.09379 20.3474 0.654131 20.3474 0.38296 20.0762Z" fill="currentColor"/></svg>
    `,Xu=(i,e)=>{if(typeof CSSStyleSheet<"u"&&i.adoptedStyleSheets){let t=new CSSStyleSheet;t.replaceSync(e),i.adoptedStyleSheets=[t]}else{let t=document.createElement("style");t.rel="stylesheet",t.textContent=e,i.appendChild(t)}},Es=class extends Gu{constructor(){super(),this.attachShadow({mode:"open"})}static get nextButtonSvg(){return qu}static get prevButtonSvg(){return qu.replace("/></svg>",' transform-origin="center" transform="rotate(180)"/></svg>')}cssStyles(){return[ym,...this.injectStyles&&Array.isArray(this.injectStyles)?this.injectStyles:[]].join(`
`)}cssLinks(){return this.injectStylesUrls||[]}calcSlideSlots(){let e=this.slideSlots||0,t=[...this.querySelectorAll("[slot^=slide-]")].map(n=>parseInt(n.getAttribute("slot").split("slide-")[1],10));if(this.slideSlots=t.length?Math.max(...t)+1:0,!!this.rendered){if(this.slideSlots>e)for(let n=e;n<this.slideSlots;n+=1){let s=document.createElement("swiper-slide");s.setAttribute("part",`slide slide-${n+1}`);let r=document.createElement("slot");r.setAttribute("name",`slide-${n+1}`),s.appendChild(r),this.shadowRoot.querySelector(".swiper-wrapper").appendChild(s)}else if(this.slideSlots<e){let n=this.swiper.slides;for(let s=n.length-1;s>=0;s-=1)s>this.slideSlots&&n[s].remove()}}}render(){if(this.rendered)return;this.calcSlideSlots();let e=this.cssStyles();this.slideSlots>0&&(e=e.replace(/::slotted\(([a-z-0-9.]*)\)/g,"$1")),e.length&&Xu(this.shadowRoot,e),this.cssLinks().forEach(n=>{if(this.shadowRoot.querySelector(`link[href="${n}"]`))return;let r=document.createElement("link");r.rel="stylesheet",r.href=n,this.shadowRoot.appendChild(r)});let t=document.createElement("div");t.classList.add("swiper"),t.part="container",t.innerHTML=`
      <slot name="container-start"></slot>
      <div class="swiper-wrapper" part="wrapper">
        <slot></slot>
        ${Array.from({length:this.slideSlots}).map((n,s)=>`
        <swiper-slide part="slide slide-${s}">
          <slot name="slide-${s}"></slot>
        </swiper-slide>
        `).join("")}
      </div>
      <slot name="container-end"></slot>
      ${Bu(this.passedParams)?`
        <div part="button-prev" class="swiper-button-prev">${this.constructor.prevButtonSvg}</div>
        <div part="button-next" class="swiper-button-next">${this.constructor.nextButtonSvg}</div>
      `:""}
      ${Hu(this.passedParams)?`
        <div part="pagination" class="swiper-pagination"></div>
      `:""}
      ${ju(this.passedParams)?`
        <div part="scrollbar" class="swiper-scrollbar"></div>
      `:""}
    `,this.shadowRoot.appendChild(t),this.rendered=!0}initialize(){var e=this;if(this.initialized)return;this.initialized=!0;let{params:t,passedParams:n}=Yo(this);this.swiperParams=t,this.passedParams=n,delete this.swiperParams.init,this.render(),this.swiper=new Sn(this.shadowRoot.querySelector(".swiper"),an(fe(fe({},t.virtual?{}:{observer:!0}),t),{touchEventsTarget:"container",onAny:function(s){s==="observerUpdate"&&e.calcSlideSlots();let r=t.eventsPrefix?`${t.eventsPrefix}${s.toLowerCase()}`:s.toLowerCase();for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];let c=new CustomEvent(r,{detail:a,bubbles:s!=="hashChange",cancelable:!0});e.dispatchEvent(c)}}))}connectedCallback(){this.initialized&&this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||this.init===!1||this.getAttribute("init")==="false"||this.initialize()}disconnectedCallback(){this.nested&&this.closest("swiper-slide")&&this.closest("swiper-slide").swiperLoopMoveDOM||(this.swiper&&this.swiper.destroy&&this.swiper.destroy(),this.initialized=!1)}updateSwiperOnPropChange(e,t){let{params:n,passedParams:s}=Yo(this,e,t);this.passedParams=s,this.swiperParams=n,!(this.swiper&&this.swiper.params[e]===t)&&Uu(fe(fe(fe({swiper:this.swiper,passedParams:this.passedParams,changedParams:[fi(e)]},e==="navigation"&&s[e]?{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}:{}),e==="pagination"&&s[e]?{paginationEl:".swiper-pagination"}:{}),e==="scrollbar"&&s[e]?{scrollbarEl:".swiper-scrollbar"}:{}))}attributeChangedCallback(e,t,n){this.initialized&&(t==="true"&&n===null&&(n=!1),this.updateSwiperOnPropChange(e,n))}static get observedAttributes(){return pi.filter(t=>t.includes("_")).map(t=>t.replace(/[A-Z]/g,n=>`-${n}`).replace("_","").toLowerCase())}};pi.forEach(i=>{i!=="init"&&(i=i.replace("_",""),Object.defineProperty(Es.prototype,i,{configurable:!0,get(){return(this.passedParams||{})[i]},set(e){this.passedParams||(this.passedParams={}),this.passedParams[i]=e,this.initialized&&this.updateSwiperOnPropChange(i,e)}}))});var Go=class extends Gu{constructor(){super(),this.attachShadow({mode:"open"})}render(){let e=this.lazy||this.getAttribute("lazy")===""||this.getAttribute("lazy")==="true";if(Xu(this.shadowRoot,bm),this.shadowRoot.appendChild(document.createElement("slot")),e){let t=document.createElement("div");t.classList.add("swiper-lazy-preloader"),t.part.add("preloader"),this.shadowRoot.appendChild(t)}}initialize(){this.render()}connectedCallback(){this.initialize()}},Ku=()=>{typeof window>"u"||(window.customElements.get("swiper-container")||window.customElements.define("swiper-container",Es),window.customElements.get("swiper-slide")||window.customElements.define("swiper-slide",Go))};typeof window<"u"&&(window.SwiperElementRegisterParams=i=>{pi.push(...i)});Ku();Tt.production&&void 0;Ia().bootstrapModule(vu).catch(i=>console.error(i));
